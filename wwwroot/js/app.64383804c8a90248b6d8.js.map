{"version":3,"sources":["webpack:///static/js/app.64383804c8a90248b6d8.js","webpack:///src/components/workspace/WorkSpace.vue","webpack:///./src/components/workspace/shapes/Line.vue?561a","webpack:///./src/components/panelbar/SidePanel.vue","webpack:///./src/components/workspace/shapes/Triangle.vue","webpack:///src/components/panelbar/panels/TreePanel/TreeNode.vue","webpack:///src/components/workspace/shapes/Triangle.vue","webpack:///./src/components/workspace/utils/ControlNode.vue","webpack:///./src/components/panelbar/SidePanelBar.vue?c165","webpack:///src/components/toolbox/tools/ScaleTool.vue","webpack:///src/components/workspace/objects/TextObject.vue","webpack:///src/components/workspace/utils/ScaleSelect.vue","webpack:///./src/components/workspace/shapes/Echelon.vue?5838","webpack:///./src/components/utils/ToolSlider.vue?2bce","webpack:///./src/components/workspace/shapes/Hexagon.vue","webpack:///./src/components/panelbar/panels/StoryPanel.vue","webpack:///./src/components/workspace/utils/BezierTool.vue?2ead","webpack:///./src/components/toolbox/tools/CurveTool.vue?d4a1","webpack:///src/components/toolbox/tools/OrderTool.vue","webpack:///./src/components/toolbox/tools/PenTool.vue?6474","webpack:///./src/types/StoryLoader.js","webpack:///src/components/workspace/objects/VisualObject.vue","webpack:///./src/components/toolbox/tools/ScaleTool.vue","webpack:///./src/components/workspace/frames/ScaleFrame.vue","webpack:///src/components/panelbar/SidePanelBar.vue","webpack:///src/components/toolbox/ToolItem.vue","webpack:///./src/store/modules/ObjectStore.js","webpack:///./src/components/workspace/shapes/Pentagon.vue?086e","webpack:///src/components/panelbar/panels/TreePanel/TreePanel.vue","webpack:///./src/components/toolbox/tools/UploadTool.vue?6bc1","webpack:///./src/components/toolbox/tools/UndoTool.vue","webpack:///./src/store/modules/PanelStore.js","webpack:///./src/components/toolbox/tools/PenTool.vue","webpack:///./src/components/workspace/utils/GroupSelect.vue","webpack:///./node_modules/vue-awesome/components/Icon.vue","webpack:///./src/types/CubicSpline.js","webpack:///src/components/panelbar/panels/StoryPanel.vue","webpack:///./src/components/utils/ToolSlider.vue","webpack:///./src/components/toolbox/ToolItem.vue?e000","webpack:///./src/components/workspace/frames/MoveFrame.vue?c5d4","webpack:///src/components/workspace/cards/SVGCard.vue","webpack:///./src/components/panelbar/panels/TreePanel/TreeNode.vue","webpack:///src/components/utils/ToolSlider.vue","webpack:///./src/App.vue?14f8","webpack:///./src/components/toolbox/tools/OrderTool.vue?5878","webpack:///./src/components/panelbar/panels/TreePanel/TreePanel.vue?5453","webpack:///src/components/workspace/frames/RectFrame.vue","webpack:///./src/components/workspace/cards/SVGCard.vue","webpack:///./src/store/modules/StyleStore.js","webpack:///src/components/workspace/shapes/Rectangle.vue","webpack:///./src/components/workspace/utils/GroupSelect.vue?e17d","webpack:///./src/store/index.js","webpack:///./src/components/workspace/frames/RotateFrame.vue?e50c","webpack:///src/components/workspace/shapes/Echelon.vue","webpack:///src/components/workspace/shapes/Hexagon.vue","webpack:///./src/types/UniformSampler.js","webpack:///./src/store/modules/StoryStore.js","webpack:///./src/App.vue","webpack:///./src/components/panelbar/panels/TreePanel/TreePanel.vue","webpack:///src/components/menus/ContextMenu.vue","webpack:///./src/main.js","webpack:///./src/components/panelbar/SidePanelBar.vue","webpack:///./node_modules/vue-awesome/components/Icon.vue?3adb","webpack:///./src/components/workspace/shapes/Pentagon.vue","webpack:///./src/types/SplineTwister.js","webpack:///./src/store/modules/CardStore.js","webpack:///./src/components/toolbox/tools/LinkTool.vue?17e1","webpack:///./src/components/panelbar/panels/TextPanel.vue?51a3","webpack:///src/components/toolbox/tools/BendTool.vue","webpack:///./src/components/workspace/utils/ScaleSelect.vue","webpack:///src/components/toolbox/tools/LinkTool.vue","webpack:///./src/components/workspace/utils/ControlNode.vue?33d0","webpack:///src/components/workspace/frames/RotateFrame.vue","webpack:///./src/components/toolbox/tools/SaveTool.vue?c562","webpack:///./src/components/toolbox/tools/UndoTool.vue?335b","webpack:///./src/components/toolbox/tools/ScaleTool.vue?9b7e","webpack:///./src/components/workspace/WorkSpace.vue?968f","webpack:///./src/types/CardObject.js","webpack:///./src/components/workspace/objects/TextObject.vue","webpack:///./src/components/workspace/frames/StyleFrame.vue?3445","webpack:///./src/components/toolbox/ToolBox.vue","webpack:///./src/components/toolbox/tools/OrderTool.vue","webpack:///./src/components/toolbox/tools/SaveTool.vue","webpack:///src/components/panelbar/panels/ShapePanel.vue","webpack:///src/components/workspace/utils/BezierTool.vue","webpack:///src/components/workspace/shapes/Line.vue","webpack:///src/components/workspace/utils/ControlNode.vue","webpack:///./src/components/workspace/frames/ScaleFrame.vue?836e","webpack:///./src/components/workspace/utils/BezierTool.vue","webpack:///./src/components/toolbox/ToolBox.vue?fbd5","webpack:///node_modules/vue-awesome/components/Icon.vue","webpack:///./src/components/workspace/frames/RotateFrame.vue","webpack:///./src/components/panelbar/panels/StoryPanel.vue?c933","webpack:///src/components/workspace/shapes/Storyline.vue","webpack:///src/components/panelbar/SidePanel.vue","webpack:///./src/components/workspace/utils/PathSelect.vue","webpack:///./src/components/workspace/shapes/CustomShape.vue?37a7","webpack:///./src/components/workspace/shapes/Storyline.vue","webpack:///src/components/workspace/shapes/Pentagon.vue","webpack:///src/components/panelbar/panels/TextPanel.vue","webpack:///./src/components/panelbar/panels/ShapePanel.vue?b3e6","webpack:///./src/components/workspace/frames/RectFrame.vue?848b","webpack:///./src/components/panelbar/panels/ShapePanel.vue","webpack:///./src/components/menus/ContextMenu.vue?3c4a","webpack:///./src/components/toolbox/ToolItem.vue","webpack:///src/components/workspace/frames/StyleFrame.vue","webpack:///./src/store/modules/TextStore.js","webpack:///./src/components/toolbox/tools/CurveTool.vue","webpack:///./src/components/menus/ContextMenu.vue","webpack:///./src/components/workspace/objects/VisualObject.vue?967e","webpack:///./src/types/PathReshaper.js","webpack:///./src/components/workspace/shapes/CustomShape.vue","webpack:///./src/components/workspace/cards/SVGCard.vue?ca22","webpack:///./src/components/workspace/frames/MoveFrame.vue","webpack:///src/components/toolbox/tools/UndoTool.vue","webpack:///src/components/workspace/utils/GroupSelect.vue","webpack:///./src/components/workspace/shapes/Rectangle.vue?6d0d","webpack:///./src/components/workspace/shapes/Echelon.vue","webpack:///./src/components/panelbar/SidePanel.vue?1036","webpack:///./src/components/panelbar/panels/TextPanel.vue","webpack:///./src/components/workspace/shapes/Triangle.vue?43f0","webpack:///./src/components/workspace/objects/TextObject.vue?73df","webpack:///./src/components/workspace/frames/StyleFrame.vue","webpack:///src/components/toolbox/tools/SaveTool.vue","webpack:///./src/types/Selector.js","webpack:///./src/components/workspace/shapes/Rectangle.vue","webpack:///./src/components/panelbar/panels/TreePanel/TreeNode.vue?2b07","webpack:///./src/components/workspace/WorkSpace.vue","webpack:///./src/components/workspace/utils/ScaleSelect.vue?a183","webpack:///./src/types/VisualObject.js","webpack:///./src/components/toolbox/tools/BendTool.vue?3c40","webpack:///./src/components/workspace/shapes/Line.vue","webpack:///src/components/toolbox/tools/CurveTool.vue","webpack:///src/components/workspace/utils/PathSelect.vue","webpack:///./src/components/toolbox/tools/LinkTool.vue","webpack:///src/components/toolbox/tools/PenTool.vue","webpack:///./src/components/workspace/frames/RectFrame.vue","webpack:///./src/components/workspace/shapes/Hexagon.vue?8855","webpack:///./src/components/toolbox/tools/BendTool.vue","webpack:///./src/components/toolbox/tools/UploadTool.vue","webpack:///./src/components/workspace/objects/VisualObject.vue","webpack:///src/components/workspace/shapes/CustomShape.vue","webpack:///./src/store/MutationTypes.js","webpack:///src/components/toolbox/ToolBox.vue","webpack:///src/components/workspace/frames/MoveFrame.vue","webpack:///src/components/toolbox/tools/UploadTool.vue","webpack:///src/App.vue","webpack:///./src/types/EquivalentIndexFinder.js","webpack:///./src/store/modules/ToolStore.js","webpack:///src/components/workspace/frames/ScaleFrame.vue","webpack:///./src/components/workspace/shapes/Storyline.vue?c1d1","webpack:///./src/types/BezierNode.js","webpack:///./src/components/workspace/utils/PathSelect.vue?7287"],"names":["webpackJsonp","+ICT","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2_vue_color__","__WEBPACK_IMPORTED_MODULE_3__menus_ContextMenu__","__WEBPACK_IMPORTED_MODULE_4__cards_SVGCard__","name","data","paintingEl","isShowContextMenu","contextMenuPositionX","contextMenuPositionY","paintingScrollX","paintingScrollY","mouse","positionX","positionY","upCount","downCount","computed","Object","mounted","this","$store","dispatch","document","getElementById","methods","handleMousemove","event","clientX","clientY","handleMousedown","button","handleMouseup","handleContextmenu","handleClick","handleScroll","scrollLeft","scrollTop","components","context-menu","color-picker","svg-card","/scB","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticClass","attrs","d","pathD","fill","fillColor","stroke","strokeColor","stroke-width","strokeWidth","opacity","_v","_l","node","index","key","mouseX","mouseY","mouseupCount","mousedownCount","staticRenderFns","esExports","/vB+","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SidePanel_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5ccfb464_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SidePanel_vue__","normalizeComponent","__vue_styles__","Component","01qU","exports","0bPP","0d6M","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Triangle_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1d69c3fe_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Triangle_vue__","0sPE","props","model","open","isFolder","children","length","visible","isShow","toggle","changeVisible","closeShow","activateShow","changeType","$set","addChild","push","17Zw","__WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__","object","isCreate","addBezierNode","init","nodes","reshape","isReshape","forEach","x","y","controlnode","1N/p","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ControlNode_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0becab1a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ControlNode_vue__","24zk","on","click","handleElementPanel","scale","handleShapePanel","handleTextPanel","handleStoryPanel","2Kl6","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faExpandArrowsAlt__","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faExpandArrowsAlt___default","icon","a","2htf","3LUW","__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__","scrollX","Number","scrollY","isLocated","isDragged","recordMouseX","recordMouseY","commit","beginMove","handleContextMenu","frameX","frameY","w","frameW","h","frameH","fontSize","fontFamily","color","content","styleObject","top","left","cursor","watch","newVal","displacementX","updateX","displacementY","updateY","3eZz","__WEBPACK_IMPORTED_MODULE_2_mousetrap__","sPoints","ePoints","linesNum","mousedownNum","reset","_this","bind","isUsingScaleTool","3jbm","3zLJ","style","type","min","max","step","domProps","__r","$event","modelVal","target","4IQm","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Hexagon_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_45149f60_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Hexagon_vue__","4yjx","58s9","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_StoryPanel_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_16a62adc_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_StoryPanel_vue__","5G65","x1","x3","y1","y3","x2","y2","r","cx","cy","mousedown","handleMousedownForSymmetryBezierNode","handleMousedownForBezierNode","5H7z","5e6B","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSort__","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSort___default","6eR/","6zYt","76OO","StoryLoader","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_4__BezierNode__","__WEBPACK_IMPORTED_MODULE_5__SplineTwister__","sessionTable","frameSteps","curveSteps","storyConfig","positionXTable","generatePositionXTable","storylinesData","storylines","i","len","tmpStoryline","tmpStorylineSegments","points","tmpStorylinePoints","generateSingleStorylinePair","characterId","character_id","SplineTwister","twist","storylineSegments","bezierNodes","xBaseline","paddingLeft","yBaseline","paddingTop","xScaleFactor","yScaleFactor","tmpSegment","sTimeStamp","getPositionX","eTimeStamp","yPos","item3","sYPos","isStepPoint","sNode","Node","eNode","frame","frameCount","session","sessionCount","c","lastSegmentY","nextSegmentY","currSegmentY","isLeft","_positionXTable$get","get","_positionXTable$get2","leftX","rightX","currLeftX","currRightX","set","7TG9","__WEBPACK_IMPORTED_MODULE_2__frames_MoveFrame__","cursorStyle","cursorType","isScale","isUsingCurveTool","isUsingBendTool","move-frame","7Tca","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_fc24ff6e_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleTool_vue__","9Dxg","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleFrame_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2d4140b6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleFrame_vue__","9iOO","usingElementPanel","usingShapePanel","usingTextPanel","usingStoryPanel","switchPanel","panel","isOpen","resetPanel","AeaF","__WEBPACK_IMPORTED_MODULE_1__tools_OrderTool__","__WEBPACK_IMPORTED_MODULE_2__tools_BendTool__","__WEBPACK_IMPORTED_MODULE_3__tools_ScaleTool__","__WEBPACK_IMPORTED_MODULE_4__tools_CurveTool__","__WEBPACK_IMPORTED_MODULE_5__tools_LinkTool__","__WEBPACK_IMPORTED_MODULE_6__tools_PenTool__","usingToolName","String","toolName","usingToolCard","activeColor","background","newToolName","$emit","handleMouseover","handleMouseout","order-tool","bend-tool","scale-tool","curve-tool","link-tool","pen-tool","Ao5O","_mutations","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default","__WEBPACK_IMPORTED_MODULE_1__MutationTypes__","__WEBPACK_IMPORTED_MODULE_2_lodash__","state","objectsQueue","objectsTree","focusObject","copiedBuffer","count","customshapes","rectangles","triangles","pentagons","hexagons","lines","echelons","circles","getters","objects","mutations","INSERT_VISUAL_OBJECT","obj","id","counts","LOCATE_FOCUSOBJECT","UPDATE_STORYLINE","actions","groupObjects","_ref","tree","subtree","item","isSelected","removeStorylines","_ref2","scaleFocusObject","_ref3","activateScale","closeMove","closeReshape","reshapeFocusObject","_ref4","closeScale","activateReshape","hideFocusObject","_ref5","copyFocusObject","_ref6","pasteFocusObject","_ref7","newPosition","oldX","oldY","newX","newY","moveX","moveY","copiedObject","_","move","cutFocusObject","_ref8","objectID","splice","cancelFocusObject","_ref9","activateMove","closeSelect","Ap5A","B4Sq","BAdX","change","handleUpload","BYOV","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_UndoTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e77dd880_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_UndoTool_vue__","C84b","panelActivated","panelName","OPEN_PANEL","CLOSE_PANEL","ACTIVATE_PANEL","CHANGE_PANEL","CKGA","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PenTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_38e98cbf_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PenTool_vue__","Crh7","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_GroupSelect_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0dbee687_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_GroupSelect_vue__","D4uH","__WEBPACK_IMPORTED_MODULE_0__babel_loader_vue_loader_lib_selector_type_script_index_0_Icon_vue__","__WEBPACK_IMPORTED_MODULE_1__vue_loader_lib_template_compiler_index_id_data_v_5e22f0aa_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_vue_loader_lib_selector_type_template_index_0_Icon_vue__","DLEB","getQuadraticBSplinePoints","sampleNum","px","map","py","outPoints","tmpT","p1","Math","pow","p2","p3","tmpX","tmpY","tmpNode","StyleNode","cubicFit","path","orgPoints","getCurvePoints","tmpStyleNode","CubicSplineSimple","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_5_cardinal_spline_js__","__WEBPACK_IMPORTED_MODULE_6__BezierNode__","Spline","_Spline","__proto__","call","flatSampleNum","stepSampleNum","tension","slice","abs","j","distance","middleNodesCount","console","error","middle","middleIndex","result","concat","k","undefined","v","Array","isArray","DeHT","canvasW","paintingCardList","width","canvasH","height","updateCanvasW","geometry","updateCanvasH","updateXScalingFactor","updateYScalingFactor","updateRelaxingFactor","relaxingFactor","updateFrameStep","frameStep","updateCurveStep","curveStep","updateSampleStep","sampleStep","updateJitterWave","jitterWave","E7qz","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolSlider_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_270c3e90_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolSlider_vue__","EVPn","mouseover","mouseout","_e","Ef3N","mouseup","stopPropagation","contextmenu","EgXv","__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__","__WEBPACK_IMPORTED_MODULE_3__types_VisualObject__","__WEBPACK_IMPORTED_MODULE_4__objects_VisualObject__","__WEBPACK_IMPORTED_MODULE_5__utils_GroupSelect__","__WEBPACK_IMPORTED_MODULE_6__utils_ScaleSelect__","__WEBPACK_IMPORTED_MODULE_7__utils_PathSelect__","__WEBPACK_IMPORTED_MODULE_8__objects_TextObject__","cardObject","cardEl","storyReorder","sessionMover","reorderRecordY","cardID","ID","cardWidth","cardHeight","cardDepth","depth","cardPositionX","cardPositionY","isUsingTextTool","padding","textObj","getElementsByClassName","paintingW","clientWidth","paintingH","clientHeight","svgCardW","svgCardH","updateGeometry","visual-object","frame-select","scale-select","path-select","text-object","EnH0","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TreeNode_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_b06ac9b8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TreeNode_vue__","F2Om","ratio","backgroundSize","GBS+","GMF1","Gc5s","H5jB","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default","b","draggedNode","frameUpdateCount","xMouseInFrame","yMouseInFrame","rx","ry","sin","cos","updateW","updateH","oldW","oldH","tPoint","rPoint","bPoint","lPoint","tlPoint","trPoint","brPoint","blPoint","rotateNode","handleRotateMousedown","handleRotateMouseup","newW","newH","log","H6qF","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SVGCard_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_bc271eb0_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SVGCard_vue__","HuY9","RGBA_BLACK","rgba","g","RGBA_WHITE","DEFAULT_STYLE","focusObjectStyle","isUsingFillColor","isUsingStrokeColor","objectStyle","LOCATE_FOCUSOBJECT_STYLE","RESTORE_FOCUSOBJECT_STYLE","OPEN_FILL_COLOR","CLOSE_FILL_COLOR","OPEN_STROKE_COLOR","CLOSE_STROKE_COLOR","IJeS","Iaoo","IcnI","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2_vuex__","__WEBPACK_IMPORTED_MODULE_3__modules_StyleStore__","__WEBPACK_IMPORTED_MODULE_4__modules_ObjectStore__","__WEBPACK_IMPORTED_MODULE_5__modules_ToolStore__","__WEBPACK_IMPORTED_MODULE_6__modules_TextStore__","__WEBPACK_IMPORTED_MODULE_7__modules_CardStore__","__WEBPACK_IMPORTED_MODULE_8__modules_PanelStore__","__WEBPACK_IMPORTED_MODULE_9__modules_StoryStore__","__WEBPACK_IMPORTED_MODULE_10__MutationTypes__","Vue","use","Vuex","isObjectsActiveChange","RESTORE_DEFAULT_OBJECTS","CHANGE_TOOL","tool","Store","modules","StyleStore","ObjectStore","ToolStore","TextStore","CardStore","PanelStore","StoryStore","J4kB","rotate","Kj9C","KuhB","L8V5","UniformSampler","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2__BezierNode__","lastNode","thisNode","arc","atan2","yStep","xStep","range","randomJitter","PI","random","M7H2","updateMajorCharacters","oldArr","character","arr","flag","item1","item2","findUpperSession","rawStorylines","charactersY","sort","upperSession","updateInnerGaps","newArr","sessionMap","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default","sessionArr","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default","next","done","_ref24","_ref25","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default","sessionId","gap","err","return","updateOuterGaps","pair","sItem","eItem","has","subMap","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref26","_ref27","session1","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref28","_ref29","session2","updateOrders","ordersMap","ordersArr","order","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_ref30","_ref31","sId","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_ref32","_ref33","eId","updateSessionBreaks","updatedArr","existingBreakMap","tmpMap","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_ref34","_ref35","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_ref36","_ref37","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map__","__WEBPACK_IMPORTED_MODULE_6__MutationTypes__","__WEBPACK_IMPORTED_MODULE_7__types_VisualObject__","__WEBPACK_IMPORTED_MODULE_8__types_StoryLoader__","__WEBPACK_IMPORTED_MODULE_9__types_Selector__","__WEBPACK_IMPORTED_MODULE_10__types_PathReshaper__","__WEBPACK_IMPORTED_MODULE_11_lodash__","__WEBPACK_IMPORTED_MODULE_12_axios__","__WEBPACK_IMPORTED_MODULE_12_axios___default","instance","axios","create","baseURL","storylinesBak","frameTable","permTable","characterTable","storylineTable","dashRangeMap","targetPath","focusCharacters","twineCharacters","twineRange","twineUsed","selectedCharacters","selectedFrames","paddingBottom","paddingRight","curveTheta","request","sessionInnerGap","sessionOuterGap","sessionInnerGaps","sessionOuterGaps","majorCharacters","orders","groupIds","selectedSessions","orderTable","sessionBreaks","history","identifier","storyFrameMap","storySessionMap","storyCharacterMap","UPDATE_REQUEST","ADD_FOCUSING_CHARACTER","indexOf","ADD_SELECTING_CHARACTER","CLEAR_SELECTING_CHARACTERS","RECORD_TARGET_PATH","UPDATE_SVG_CARD","size","ADD_HISTORY","uploadXMLFile","file","mark","_callee","xmlData","response","wrap","_context","prev","FormData","append","post","sent","stop","layoutStoryline","_this2","_callee2","storyLoader","_context2","array","perm","generateStorylines","storyline","tmpVisualObject","Storyline","updateStoryline","_this3","_callee3","_context3","anchorStorylines","characterCount","minCharacterY","deltaY","storylineNodes","updateFrameCurveSteps","defaultFrameStep","defaultCurveStep","apply","updateStorySize","storyLength","updateFrameTable","tmpFrameTable","lBound","rBound","lIndex","rIndex","tmpLBound","tmpRBound","currBound","nextBound","lastBound","updateCharacterTable","orderStoryline","constraints","characterYMap","focusCharacterY","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_ref10","_ref11","oldOrders","newOrders","orderSession","_ref12","reshapeCharacters","_ref13","characters","PathReshaper","cancelReshape","_ref14","copyPoints","point","isOptimized","selectFrames","_ref15","select","selector","StorySelector","tmpSFrame","matchFrame","tmpEFrame","straightenCharacter","_ref16","tmpArr","breakSession","_ref17","newOuterGaps","matchCharacterR","lastSession","frameBak","oldSessionBreaks","brushingCharacter","_ref18","_ref19","copy0","copy1","p","t","scaleSession","_ref20","sPoint","ePoint","scaleSessionVertical","_ref21","emphasizeSelector","EmphasizeSelector","buildSessionConstraints","oldInnerGaps","newInnerGaps","oldOuterGaps","scaleSessionHorizontal","_ref22","frameScaler","FrameScaler","UNDO","_ref23","last","M93x","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_a1ac8c8c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","MIrv","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TreePanel_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_65897df7_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TreePanel_vue__","Mcgq","states","position","recordY","recordX","NHnr","defineProperty","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_2__store__","__WEBPACK_IMPORTED_MODULE_22_vue_awesome_components_Icon__","__WEBPACK_IMPORTED_MODULE_23__components_panelbar_panels_TreePanel_TreeNode__","__WEBPACK_IMPORTED_MODULE_24__components_utils_ToolSlider__","__WEBPACK_IMPORTED_MODULE_25__fortawesome_vue_fontawesome__","__WEBPACK_IMPORTED_MODULE_25__fortawesome_vue_fontawesome___default","__WEBPACK_IMPORTED_MODULE_26_v_tooltip__","directive","VTooltip","VClosePopover","component","VPopover","Icon","TreeNode","ToolSlider","FontAwesomeIcon","config","productionTip","el","store","template","App","NZGm","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SidePanelBar_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1bd8595a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SidePanelBar_vue__","Naw1","O0jz","class","klass","version","role","label","aria-label","viewBox","box","_t","paths","_b","polygons","polygon","raw","innerHTML","_s","O1zv","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Pentagon_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5dd72131_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Pentagon_vue__","O6Ek","unit","validateData","timeframeCount","characterByOrders","timeframe","right","characterByOrder","nextRight","characterList","upSet","downSet","up","down","previousDirection","lastDiff","lastY","nextY","diff","round","_cleanUpDownSet","cleanUpDownSet","_cleanUpDownSet2","maxXDiff","charactersArray","internalTwist","info","fixWrongPosition","scalePosition","rowLen","colLen","minDelta","tmpNextY","tmpDelta","moveDistance","xMin","xMax","tmpXMax","leftBound","_upSet","_downSet","tmpUp","tmpDown","currentLength","tan","factor","direction","nextLeft","anchor","xDiff","pc","yDiff","unitMoveDistance","calculateMoveDistance","O9ke","__WEBPACK_IMPORTED_MODULE_0__types_CardObject__","paintingCardCount","addPaintingCard","card","CardObject","Oky+","transform","PCxI","focusText","placeholder","input","composing","cols","rows","QZzn","QsEu","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faHandPaper__","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faHandPaper___default","R/my","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleSelect_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_63cb121b_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleSelect_vue__","SQ8e","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSpinner__","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSpinner___default","Skty","squareSize","TdY+","U02f","__WEBPACK_IMPORTED_MODULE_0__ScaleFrame__","scaleframe","Ui19","UiOb","Vn2c","W1Js","WZ6U","mousemove","scroll","callback","$$v","Wt/O","zIndex","X1HP","X9oV","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TextObject_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f8ed344_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TextObject_vue__","XW8H","storylineSelect","handleStorylineStyle","YRYm","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolBox_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3960e457_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolBox_vue__","YfC9","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_OrderTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_798aca9f_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_OrderTool_vue__","Yq7S","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SaveTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e1f692d8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SaveTool_vue__","YrUE","__WEBPACK_IMPORTED_MODULE_2__types_VisualObject__","__WEBPACK_IMPORTED_MODULE_3__workspace_objects_VisualObject__","__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__","shapeType","hex","handleRectangle","insertShape","handleHexagon","handlePentagon","handleTriangle","handleEchelon","handleLine","isUsingPenTool","updateOpacity","updateStrokeWidth","handleFillColor","handleStrokeColor","customShape","Z3Nt","ZSvP","isBezierNodeDragged","isSymmetryBezierNodeDragged","xInNodeCoordinate","yInNodeCoordinate","fixedLength","fixedSymmetryLength","deltaX","_deltaX","_deltaY","moveBezierNodeX","newLength","moveBezierNodeY","moveSymmetryBezierNodeX","moveSymmetryBezierNodeY","aYsG","ayw7","dragged","isActiveBezierTool","closeBezierTool","activateBezierTool","cPX6","crmn","scaleByX","scaleByY","scaleByW","scaleByH","updateFrame","cxcd","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_BezierTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5bfb6b88_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_BezierTool_vue__","d5AP","enterTool","calcelTool","cancelTool","dXrS","getId","toString","icons","validator","val","warn","spin","Boolean","inverse","pulse","flip","childrenWidth","childrenHeight","outerScale","normalizedScale","isNaN","fa-icon","fa-spin","fa-flip-horizontal","fa-flip-vertical","fa-inverse","fa-pulse","$options","_icon","ids","replace","match","quote","uniqueId","rawId","pointerId","$children","child","register","dZkg","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RotateFrame_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4fbbcee8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RotateFrame_vue__","eVrT","updateSliderVal","ebHo","__WEBPACK_IMPORTED_MODULE_3__types_Selector__","__WEBPACK_IMPORTED_MODULE_4__types_CubicSpline__","__WEBPACK_IMPORTED_MODULE_5__types_PathReshaper__","__WEBPACK_IMPORTED_MODULE_6__types_UniformSampler__","__WEBPACK_IMPORTED_MODULE_7_gsap__","__WEBPACK_IMPORTED_MODULE_8_mousetrap__","sampleNodes","dragMoving","dashlineRange","needAnimation","cleanNodes","filter","samples","starwarColor","labelX","labelY","labelXEnd","labelYEnd","bone","removeInvalidNodes","cubicSpline","fittingNodes","fit","sample","wave","jitter","dashlineStep","calculatePathD","isUsingOrderTool","locate","reorder","handleSelecting","isUsingLinkTool","beginDragMoving","endDragMoving","_nodes","appendDashline","intensity","endY","startY","endX","startX","currentX","solid","appendCurve","wasDashline","inDashline","addDashlineRange","moveFocusCharacter","distY","_moveY","newRange","newNodes","oldNodes","fromTo","ecCa","__WEBPACK_IMPORTED_MODULE_2__panels_TreePanel_TreePanel__","__WEBPACK_IMPORTED_MODULE_3__panels_ShapePanel__","__WEBPACK_IMPORTED_MODULE_4__panels_StoryPanel__","__WEBPACK_IMPORTED_MODULE_5__panels_TextPanel__","tree-panel","shape-panel","story-panel","text-panel","ewtb","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PathSelect_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6a45afae_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PathSelect_vue__","fOqo","created","deleteNode","fb9g","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Storyline_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_25510291_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Storyline_vue__","flRY","g7oG","gHnp","readonly","gW7Q","gfC4","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShapePanel_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7dab7d6e_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ShapePanel_vue__","grRP","gsLH","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolItem_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c1164880_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolItem_vue__","gxps","__WEBPACK_IMPORTED_MODULE_1__shapes_CustomShape__","__WEBPACK_IMPORTED_MODULE_2__shapes_Storyline__","__WEBPACK_IMPORTED_MODULE_3__shapes_Triangle__","__WEBPACK_IMPORTED_MODULE_4__shapes_Rectangle__","__WEBPACK_IMPORTED_MODULE_5__shapes_Pentagon__","__WEBPACK_IMPORTED_MODULE_6__shapes_Hexagon__","__WEBPACK_IMPORTED_MODULE_7__shapes_Line__","__WEBPACK_IMPORTED_MODULE_8__shapes_Echelon__","isStorylineSelected","selected","customshape","triangleg","rectangleg","pentagong","hexagong","lineg","echelong","hSCs","textObjects","LOCATE_TEXT_OBJECT","RESTORE_TEXT_OBJECT","insertTextObject","hnEm","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CurveTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_56e4ee1f_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CurveTool_vue__","hxIt","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ContextMenu_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5e689c14_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ContextMenu_vue__","i0bz","iJRs","PathReshaperSingle","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_map__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_map___default","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray__","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_8__BezierNode__","__WEBPACK_IMPORTED_MODULE_9_cardinal_spline_js__","PathReshaperFrame","minFrame","maxFrame","focusCharacter","resetOptimization","fitter","CubicFitCurve","_fitter$match","_fitter$match2","start","end","contextMap","setOptimizingCharacters","contextCharacters","fitCurve","alignContextPoint","moveContextCharacters","isOptimizedTmp","contextCharactersMap","tmpContextCharacters","scanInSessionCharacters","sortingCharacters","generateFrame","parseInt","focusMoveY","upper","lower","isUpper","reverse","lastCharacterMoveY","isLeftAlign","isRightAlign","leftAnchorY","rightAnchorY","baseY","leftPoint","rightPoint","_fitter$matchStorylin","matchStoryline","_fitter$matchStorylin2","targetPaths","_fitter$matchStorylin3","_fitter$matchStorylin4","FitCurve","fittedCurve","_this4","fittedNode","syncrize","_locate","_locate2","leftIndex","rightIndex","firstPoint","lastPoint","xScale","yScale","firstTargetPoint","lastTargetPoint","isFirstPointAnchored","isLastPointAnchored","leftBoundIndex","rightBoundIndex","leftI","rightI","getLeftPointIndex","getRightPointIndex","_FitCurve","LinearFitCurve","tempK","targetY","_FitCurve2","inPoints","ieIR","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CustomShape_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e9f6a0ce_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CustomShape_vue__","ihPm","ikkP","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_MoveFrame_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_33c04bfc_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_MoveFrame_vue__","ip5d","j73T","isUsingFrameSelect","restore","isUsingSessionBreak","kcJT","l1bS","meyI","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Echelon_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0920a5a6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Echelon_vue__","nNI8","nNzv","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TextPanel_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_732e8251_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TextPanel_vue__","nbaU","ncPy","pP5b","peX0","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_StyleFrame_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_04094dac_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_StyleFrame_vue__","pq9Y","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default","handleSaveSvg","svgEl","setAttribute","svgData","outerHTML","svgBlob","Blob","svgUrl","URL","createObjectURL","downloadLink","createElement","href","download","body","appendChild","removeChild","handleSaveConfig","configContent","str","dataUrl","encodeURIComponent","handleSaveHistory","puZo","StoryReorder","SessionMover","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_8__EquivalentIndexFinder__","frameMap","characterMap","minBound","characterY","_StorySelector","defaultInnerGap","defaultOuterGap","sArr","eArr","sFrame","matchFrameUnBound","eFrame","topY","bottomY","sessionList","getSelectSessionList","scaleFactor","getScaleFactor","scaleInnerGap","scaleOuterGap","_StorySelector2","yBak1","yBak2","getPositionY","pos","scaleMoveY","moveStoryline","cOrder","reorderCharacter","cSession","generateSessionOrder","sOrder","reorderSession","sSession","isArrayEqual","arr1","arr2","cMap","cArr","finalList","characterInSessionMap","tmpSession","tmpList","sessionYMap","sortedCharacters","sessionY","tmpCharacter","sortedSessions","sortedList","unionList","rabbitId","_unionList","finalMap","_this5","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","_StorySelector3","Merger","matchSession","_StorySelector4","Spliter","_this7","_StorySelector5","_this8","x4","startFrame","endFrame","scaleCurveStep","scaleFrameStep","_StorySelector6","_this9","moveTable","equivalentIndexFinder","EquivalentIndexFinder","find","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","frameRange","tmpFrame","tmpLeftY","tmpRightY","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","_this10","tmpYBak1","tmpYBak2","q+vf","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Rectangle_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_18251bbe_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Rectangle_vue__","qOY/","bold","dblclick","qTQm","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_WorkSpace_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_eefc79a0_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_WorkSpace_vue__","rFRI","rNQu","rWw5","RegularShape","CustomShape","Text","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default","__WEBPACK_IMPORTED_MODULE_5__BezierNode__","State","_visible","_scale","_reshape","_move","_select","_rotate","_create","VisualObject","_State","_id","_type","_name","_cardID","Shape","_VisualObject","_frameX","_frameY","_frameW","_frameH","_positionX","_positionY","_offsetX","_offsetY","distX","update","updatePosition","xNodes","yNodes","backup","bezierNode","BezierNode","initState","_Shape","_Shape2","_Shape3","_this6","_characterId","_Shape4","ToolShape","_VisualObject2","rkOb","segE","sfWC","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Line_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5cc15f5a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Line_vue__","sl5J","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faPaintBrush__","__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faPaintBrush___default","syNJ","t2k0","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_LinkTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d2ea0aec_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_LinkTool_vue__","t3u6","__WEBPACK_IMPORTED_MODULE_3__store_MutationTypes__","tS/o","tbYJ","u1Rf","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RectFrame_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1aee5186_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RectFrame_vue__","u4D7","uBqI","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_BendTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_89dde5b6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_BendTool_vue__","uWrl","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_UploadTool_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2bb215e4_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_UploadTool_vue__","upPS","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_VisualObject_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_04f6f320_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_VisualObject_vue__","vDLA","__WEBPACK_IMPORTED_MODULE_3__utils_BezierTool__","__WEBPACK_IMPORTED_MODULE_4__utils_ControlNode__","__WEBPACK_IMPORTED_MODULE_5__types_VisualObject__","__WEBPACK_IMPORTED_MODULE_6_mousetrap__","draggedNodeId","xReferedToNode","yReferedToNode","deleteBezierNode","beziertool","veAT","vjNh","OPEN_TOOL","CLOSE_TOOL","RESTORE_DEFAULT_TOOLS","OPEN_TEXT_TOOL","CLOSE_TEXT_TOOL","vqau","__WEBPACK_IMPORTED_MODULE_0__ToolItem__","__WEBPACK_IMPORTED_MODULE_1__tools_UploadTool__","__WEBPACK_IMPORTED_MODULE_2__tools_SaveTool__","__WEBPACK_IMPORTED_MODULE_3__tools_UndoTool__","toolItems","upload-tool","save-tool","undo-tool","tool-item","wEMg","__WEBPACK_IMPORTED_MODULE_3__RotateFrame__","moveDragged","objectDragged","recordedMouseX","recordedMouseY","objectDraggedLocked","isMove","moveDraggedLocked","initTransform","lastDisplacementX","lastDisplacementY","rotateframe","xGqh","files","split","reader","FileReader","onloadend","readyState","DONE","JSON","parse","readAsText","xJD8","__WEBPACK_IMPORTED_MODULE_0__components_toolbox_ToolBox__","__WEBPACK_IMPORTED_MODULE_1__components_workspace_WorkSpace__","__WEBPACK_IMPORTED_MODULE_2__components_panelbar_SidePanelBar__","__WEBPACK_IMPORTED_MODULE_3__components_panelbar_SidePanel__","oncontextmenu","tool-box","workspace","side-panelbar","side-panel","y8Pj","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default","timeframeRange","yO/d","isUsingUndoTool","yezX","__WEBPACK_IMPORTED_MODULE_1_lodash__","__WEBPACK_IMPORTED_MODULE_1_lodash___default","__WEBPACK_IMPORTED_MODULE_3__RectFrame__","__WEBPACK_IMPORTED_MODULE_4__StyleFrame__","copyNodes","isScaleShow","mousedownTime","Date","now","cloneDeep","_mousedownTime","scaleRatio","updateNodeX","updateNodeY","copyNode","_x","_x2","_x3","_y","_y2","_y3","styleframe","rectframe","yq3R","text-anchor","font-size","z4iF","_activate","_last","_xBak","_yBak","_xBak2","_yBak2","_xBak3","_yBak3","refX","refY","zr+e"],"mappings":"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","file":"static/js/app.64383804c8a90248b6d8.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"+ICT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_color__ = __webpack_require__(\"Zzkc\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_color___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_vue_color__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__menus_ContextMenu__ = __webpack_require__(\"hxIt\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__cards_SVGCard__ = __webpack_require__(\"H6qF\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'WorkSpace',\n\n  data: function data() {\n    return {\n      paintingEl: null,\n      isShowContextMenu: false,\n      contextMenuPositionX: 0,\n      contextMenuPositionY: 0,\n      paintingScrollX: 0,\n      paintingScrollY: 0,\n      mouse: {\n        positionX: 0,\n        positionY: 0,\n        upCount: 0,\n        downCount: 0\n      }\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingFillColor', 'isUsingStrokeColor', 'paintingCardList', 'objectStyle', 'objects'])),\n\n  mounted: function mounted() {\n    this.$store.dispatch('addPaintingCard');\n    this.paintingEl = document.getElementById('painting');\n  },\n\n\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    handleMousemove: function handleMousemove() {\n      this.mouse.positionX = event.clientX;\n      this.mouse.positionY = event.clientY;\n    },\n    handleMousedown: function handleMousedown() {\n      if (event.button === 0) {\n        this.mouse.downCount++;\n      }\n    },\n    handleMouseup: function handleMouseup() {\n      if (event.button === 0) {\n        this.mouse.upCount++;\n      }\n    },\n    handleContextmenu: function handleContextmenu() {\n      this.contextMenuPositionX = this.mouse.positionX;\n      this.contextMenuPositionY = this.mouse.positionY;\n      this.isShowContextMenu = true;\n    },\n    handleClick: function handleClick() {\n      this.isShowContextMenu = false;\n    },\n    handleScroll: function handleScroll() {\n      this.paintingScrollX = this.paintingEl.scrollLeft;\n      this.paintingScrollY = this.paintingEl.scrollTop;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapActions */])(['addPaintingCard'])),\n\n  components: {\n    'context-menu': __WEBPACK_IMPORTED_MODULE_3__menus_ContextMenu__[\"a\" /* default */],\n    'color-picker': __WEBPACK_IMPORTED_MODULE_2_vue_color__[\"Sketch\"],\n    'svg-card': __WEBPACK_IMPORTED_MODULE_4__cards_SVGCard__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"/scB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"line\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"/vB+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SidePanel_vue__ = __webpack_require__(\"ecCa\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5ccfb464_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SidePanel_vue__ = __webpack_require__(\"nNI8\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"4yjx\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SidePanel_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5ccfb464_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SidePanel_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"01qU\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"0bPP\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"0d6M\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Triangle_vue__ = __webpack_require__(\"17Zw\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1d69c3fe_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Triangle_vue__ = __webpack_require__(\"nbaU\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Triangle_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1d69c3fe_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Triangle_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"0sPE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'TreeNode',\n\n  props: {\n    model: Object\n  },\n\n  data: function data() {\n    return {\n      open: false\n    };\n  },\n\n\n  computed: {\n    isFolder: function isFolder() {\n      return this.model.children && this.model.children.length;\n    },\n    visible: function visible() {\n      return this.model.isShow;\n    }\n  },\n\n  methods: {\n    toggle: function toggle() {\n      if (this.isFolder) {\n        this.open = !this.open;\n      }\n    },\n    changeVisible: function changeVisible() {\n      if (this.model.isShow) {\n        this.model.closeShow();\n      } else {\n        this.model.activateShow();\n      }\n    },\n    changeType: function changeType() {\n      if (!this.isFolder) {\n        this.$set(this.model, 'children', []);\n        this.addChild();\n        this.open = true;\n      }\n    },\n    addChild: function addChild() {\n      this.model.children.push({\n        name: 'new element'\n      });\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"17Zw\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Triangle',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  mounted: function mounted() {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(150, 50, 150, 50);\n      this.object.addBezierNode(50, 150, 50, 150);\n      this.object.addBezierNode(250, 150, 250, 150);\n      this.object.init();\n    }\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    pathD: function pathD() {\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          pathD += ' L ' + node.x + ' ' + node.y;\n        }\n      });\n      if (this.nodes.length > 2) {\n        pathD += ' L ' + this.nodes[0].x + ' ' + this.nodes[0].y;\n      }\n      return pathD;\n    }\n  },\n\n  components: {\n    controlnode: __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"1N/p\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ControlNode_vue__ = __webpack_require__(\"ayw7\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0becab1a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ControlNode_vue__ = __webpack_require__(\"Skty\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ControlNode_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0becab1a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ControlNode_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"24zk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"side-panel-bar\"},[_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleElementPanel}},[_c('icon',{attrs:{\"name\":\"navicon\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Element\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleShapePanel}},[_c('icon',{attrs:{\"name\":\"map\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Shape\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleTextPanel}},[_c('icon',{attrs:{\"name\":\"text-width\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Text\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleStoryPanel}},[_c('icon',{attrs:{\"name\":\"file-text\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Story\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"2Kl6\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faExpandArrowsAlt__ = __webpack_require__(\"lr0z\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faExpandArrowsAlt___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faExpandArrowsAlt__);\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ScaleTool',\n\n  computed: {\n    icon: function icon() {\n      return __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faExpandArrowsAlt___default.a;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"2htf\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"3LUW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'TextObject',\n\n  props: {\n    mouse: Object,\n    object: Object,\n    scrollX: Number,\n    scrollY: Number\n  },\n\n  data: function data() {\n    return {\n      isLocated: false,\n      isDragged: false,\n      recordMouseX: 0,\n      recordMouseY: 0\n    };\n  },\n\n\n  methods: {\n    handleClick: function handleClick() {\n      this.isLocated = !this.isLocated;\n      if (this.isLocated) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"p\" /* LOCATE_TEXT_OBJECT */], this.object);\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"z\" /* RESTORE_TEXT_OBJECT */]);\n      }\n    },\n    handleMousedown: function handleMousedown() {\n      if (event.button === 0) {\n        this.isDragged = true;\n        this.object.beginMove();\n        this.recordMouseX = this.mouseX;\n        this.recordMouseY = this.mouseY;\n      }\n    },\n    handleMouseup: function handleMouseup() {\n      if (event.button === 0) {\n        this.isDragged = false;\n      }\n    },\n    handleContextMenu: function handleContextMenu() {\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"n\" /* LOCATE_FOCUSOBJECT */], this.object);\n    }\n  },\n\n  computed: {\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    mouseX: function mouseX() {\n      return this.mouse.positionX + this.scrollX;\n    },\n    mouseY: function mouseY() {\n      return this.mouse.positionY + this.scrollY;\n    },\n    x: function x() {\n      return this.object.frameX;\n    },\n    y: function y() {\n      return this.object.frameY;\n    },\n    w: function w() {\n      return this.object.frameW;\n    },\n    h: function h() {\n      return this.object.frameH;\n    },\n    fontSize: function fontSize() {\n      return this.object.fontSize;\n    },\n    fontFamily: function fontFamily() {\n      return this.object.fontFamily;\n    },\n    color: function color() {\n      return this.object.color;\n    },\n    content: function content() {\n      return this.object.content;\n    },\n    styleObject: function styleObject() {\n      return {\n        top: this.y + 'px',\n        left: this.x + 'px',\n        fontSize: this.fontSize + 'px',\n        fontFamily: '' + this.fontFamily,\n        color: '' + this.color,\n        cursor: 'move'\n      };\n    }\n  },\n\n  watch: {\n    mouseX: function mouseX(newVal) {\n      if (this.isDragged) {\n        var displacementX = newVal - this.recordMouseX;\n        this.object.updateX(displacementX);\n      }\n    },\n    mouseY: function mouseY(newVal) {\n      if (this.isDragged) {\n        var displacementY = newVal - this.recordMouseY;\n        this.object.updateY(displacementY);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"3eZz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mousetrap__ = __webpack_require__(\"knr3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mousetrap___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_mousetrap__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ScaleSelect',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number\n  },\n\n  data: function data() {\n    return {\n      sPoints: [],\n      ePoints: [],\n      linesNum: 0,\n      mousedownNum: 0\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingScaleTool'])),\n\n  methods: {\n    reset: function reset() {\n      this.sPoints = [];\n      this.ePoints = [];\n      this.linesNum = 0;\n      this.mousedownNum = 0;\n    }\n  },\n\n  mounted: function mounted() {\n    var _this = this;\n\n    var mousetrap = new __WEBPACK_IMPORTED_MODULE_2_mousetrap__();\n    mousetrap.bind('esc', function () {\n      if (_this.linesNum === 2) {\n        if (_this.isUsingScaleTool) {\n          _this.$store.dispatch('scaleSession', {\n            sPoints: _this.sPoints,\n            ePoints: _this.ePoints,\n            linesNum: _this.linesNum\n          });\n        }\n        // if (this.isUsingHorizontalScale) {\n        //   this.$store.dispatch('scaleSessionHorizontal', {\n        //     sPoints: this.sPoints,\n        //     ePoints: this.ePoints,\n        //     linesNum: this.linesNum\n        //   })\n        // }\n      }\n      _this.reset();\n    });\n  },\n\n\n  watch: {\n    mousedownCount: function mousedownCount(newVal) {\n      if (this.isUsingScaleTool) {\n        this.mousedownNum++;\n        if (this.mousedownNum % 2 === 1) {\n          this.sPoints.push({\n            x: this.mouseX,\n            y: this.mouseY\n          });\n        }\n        if (this.mousedownNum % 2 === 0) {\n          this.linesNum++;\n          this.ePoints.push({\n            x: this.mouseX,\n            y: this.mouseY\n          });\n        }\n        // if (this.mousedownNum === 5) {\n        //   if (this.isUsingScaleTool) {\n        //     this.$store.dispatch('scaleSession', {\n        //       sPoints: this.sPoints,\n        //       ePoints: this.ePoints,\n        //       linesNum: this.linesNum\n        //     })\n        //   }\n        //   if (this.isUsingHorizontalScale) {\n        //     this.$store.dispatch('scaleSessionHorizontal', {\n        //       sPoints: this.sPoints,\n        //       ePoints: this.ePoints,\n        //       linesNum: this.linesNum\n        //     })\n        //   }\n        //   this.reset()\n        // }\n      }\n    },\n    isUsingScaleTool: function isUsingScaleTool(newVal) {\n      if (newVal) {\n        this.reset();\n      } else if (this.linesNum === 2) {\n        this.$store.dispatch('scaleSession', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        });\n      }\n    }\n\n    // isUsingHorizontalScale (newVal) {\n    //   if (newVal) {\n    //     this.reset()\n    //   } else if (this.linesNum === 2) {\n    //     this.$store.dispatch('scaleSessionHorizontal', {\n    //       sPoints: this.sPoints,\n    //       ePoints: this.ePoints,\n    //       linesNum: this.linesNum\n    //     })\n    //   }\n    // }\n\n  }\n});\n\n/***/ }),\n\n/***/ \"3jbm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"echelon\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"3zLJ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.modelVal),expression:\"modelVal\"}],style:(_vm.styleObject),attrs:{\"type\":\"range\",\"min\":_vm.min,\"max\":_vm.max,\"step\":_vm.step},domProps:{\"value\":(_vm.modelVal)},on:{\"__r\":function($event){_vm.modelVal=$event.target.value}}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"4IQm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Hexagon_vue__ = __webpack_require__(\"KuhB\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_45149f60_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Hexagon_vue__ = __webpack_require__(\"u4D7\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Hexagon_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_45149f60_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Hexagon_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"4yjx\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"58s9\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_StoryPanel_vue__ = __webpack_require__(\"DeHT\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_16a62adc_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_StoryPanel_vue__ = __webpack_require__(\"eVrT\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"segE\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_StoryPanel_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_16a62adc_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_StoryPanel_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"5G65\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"BezierTool\"},[_c('line',{attrs:{\"stroke\":\"black\",\"x1\":_vm.node.x3,\"y1\":_vm.node.y3,\"x2\":_vm.node.x2,\"y2\":_vm.node.y2,\"stroke-width\":\"1\"}}),_vm._v(\" \"),_c('circle',{attrs:{\"r\":\"3\",\"cx\":_vm.node.x3,\"cy\":_vm.node.y3,\"fill\":\"black\"},on:{\"mousedown\":_vm.handleMousedownForSymmetryBezierNode}}),_vm._v(\" \"),_c('circle',{attrs:{\"r\":\"3\",\"cx\":_vm.node.x2,\"cy\":_vm.node.y2,\"fill\":\"black\"},on:{\"mousedown\":_vm.handleMousedownForBezierNode}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"5H7z\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Curving'),expression:\"'Curving'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"5e6B\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSort__ = __webpack_require__(\"J+hv\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSort___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSort__);\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'OrderTool',\n\n  computed: {\n    icon: function icon() {\n      return __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSort___default.a;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"6eR/\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"6zYt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('icon',{attrs:{\"name\":\"pencil\",\"scale\":\"1.5\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"76OO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return StoryLoader; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray__ = __webpack_require__(\"d7EF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map__ = __webpack_require__(\"ifoU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__BezierNode__ = __webpack_require__(\"z4iF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__SplineTwister__ = __webpack_require__(\"O6Ek\");\n\n\n\n\n\n\n\nvar StoryLoader = function () {\n  function StoryLoader(data, sessionTable, frameSteps, curveSteps, storyConfig) {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, StoryLoader);\n\n    this.data = data;\n    this.sessionTable = sessionTable;\n    this.frameSteps = frameSteps;\n    this.curveSteps = curveSteps;\n    this.positionXTable = new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_map___default.a();\n    this.storyConfig = storyConfig;\n    this.generatePositionXTable();\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(StoryLoader, [{\n    key: 'generateStorylines',\n    value: function generateStorylines() {\n      var storylinesData = this.data;\n      var storylines = [];\n      for (var i = 0, len = storylinesData.length; i < len; i++) {\n        var tmpStoryline = storylinesData[i];\n        var tmpStorylineSegments = tmpStoryline.points;\n        var tmpStorylinePoints = this.generateSingleStorylinePair(tmpStorylineSegments, i);\n        storylines.push({\n          name: tmpStoryline.name,\n          characterId: tmpStoryline.character_id,\n          points: tmpStorylinePoints\n        });\n      }\n      var twister = new __WEBPACK_IMPORTED_MODULE_5__SplineTwister__[\"a\" /* SplineTwister */](storylines, this.sessionTable, this.storyConfig);\n      twister.twist(1);\n      return storylines;\n    }\n  }, {\n    key: 'generateSingleStorylinePair',\n    value: function generateSingleStorylinePair(storylineSegments, characterId) {\n      var bezierNodes = [];\n      // do transform here!\n      var xBaseline = this.storyConfig.paddingLeft;\n      var yBaseline = this.storyConfig.paddingTop;\n      var xScaleFactor = this.storyConfig.xScaleFactor;\n      var yScaleFactor = this.storyConfig.yScaleFactor;\n      for (var i = 0, len = storylineSegments.length; i < len; i++) {\n        var tmpSegment = storylineSegments[i];\n        var sTimeStamp = this.getPositionX(i, true) * xScaleFactor + xBaseline;\n        var eTimeStamp = this.getPositionX(i, false) * xScaleFactor + xBaseline;\n        var yPos = tmpSegment.item3 > 0 ? tmpSegment.item3 * yScaleFactor + yBaseline : -10000;\n        var sYPos = this.isStepPoint(i, characterId) ? -5000 : yPos;\n        var sNode = new __WEBPACK_IMPORTED_MODULE_4__BezierNode__[\"b\" /* Node */](sTimeStamp, sYPos);\n        var eNode = new __WEBPACK_IMPORTED_MODULE_4__BezierNode__[\"b\" /* Node */](eTimeStamp, yPos);\n        bezierNodes.push(sNode);\n        bezierNodes.push(eNode);\n      }\n      return bezierNodes;\n    }\n  }, {\n    key: 'isStepPoint',\n    value: function isStepPoint(frame, characterId) {\n      // debugger\n      var storylineSegments = this.data[characterId].points;\n      var frameCount = storylineSegments.length;\n      if (frame === 0 || frame === frameCount - 1) {\n        return false;\n      }\n      // must be in session whose characters less than 3\n      var session = this.sessionTable[characterId][frame];\n      var sessionCount = 0;\n      for (var c = 0, len = this.sessionTable.length; c < len; c++) {\n        var tmpSession = this.sessionTable[c][frame];\n        if (tmpSession === session) {\n          sessionCount++;\n        }\n      }\n      if (sessionCount > 2) {\n        return false;\n      }\n      var lastSegmentY = storylineSegments[frame - 1].item3;\n      var nextSegmentY = storylineSegments[frame + 1].item3;\n      var currSegmentY = storylineSegments[frame].item3;\n      // let threshold = 10\n      var result = (currSegmentY - lastSegmentY) * (currSegmentY - nextSegmentY);\n      if (result < 0) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: 'getSegmentY',\n    value: function getSegmentY(frame, characterId) {\n      return this.data[characterId].points[frame].item3;\n    }\n  }, {\n    key: 'getPositionX',\n    value: function getPositionX(frame, isLeft) {\n      var _positionXTable$get = this.positionXTable.get(frame),\n          _positionXTable$get2 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_slicedToArray___default()(_positionXTable$get, 2),\n          leftX = _positionXTable$get2[0],\n          rightX = _positionXTable$get2[1];\n\n      return isLeft ? leftX : rightX;\n    }\n  }, {\n    key: 'generatePositionXTable',\n    value: function generatePositionXTable() {\n      var frameCount = this.sessionTable[0].length;\n      var currLeftX = 0;\n      var currRightX = this.frameSteps[0];\n      var positionXTable = this.positionXTable;\n      for (var frame = 0; frame < frameCount; frame++) {\n        positionXTable.set(frame, [currLeftX, currRightX]);\n        currLeftX += this.frameSteps[frame] + this.curveSteps[frame];\n        if (frame < frameCount - 1) {\n          currRightX = currLeftX + this.frameSteps[frame + 1];\n        }\n      }\n    }\n  }]);\n\n  return StoryLoader;\n}();\n\n/***/ }),\n\n/***/ \"7TG9\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__frames_MoveFrame__ = __webpack_require__(\"ikkP\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'VisualObject',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number,\n    mouseupCount: Number,\n    object: Object\n  },\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    cursorStyle: function cursorStyle() {\n      var cursorType = 'move';\n      if (this.object.type === 'storyline') {\n        cursorType = 'pointer';\n      } else if (this.object.isScale) {\n        cursorType = 'default';\n      }\n      if (this.isUsingCurveTool) {\n        cursorType = 'crosshair';\n      }\n      if (this.isUsingBendTool) {\n        cursorType = 'crosshair';\n      }\n      if (this.isUsingScaleTool) {\n        cursorType = 'crosshair';\n      }\n      return {\n        'cursor': cursorType\n      };\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingCurveTool', 'isUsingBendTool', 'isUsingScaleTool'])),\n\n  components: {\n    'move-frame': __WEBPACK_IMPORTED_MODULE_2__frames_MoveFrame__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"7Tca\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleTool_vue__ = __webpack_require__(\"2Kl6\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_fc24ff6e_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleTool_vue__ = __webpack_require__(\"W1Js\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_fc24ff6e_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"9Dxg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleFrame_vue__ = __webpack_require__(\"yezX\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2d4140b6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleFrame_vue__ = __webpack_require__(\"crmn\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleFrame_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2d4140b6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleFrame_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"9iOO\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'SidePanelBar',\n\n  data: function data() {\n    return {\n      usingElementPanel: false,\n      usingShapePanel: false,\n      usingTextPanel: false,\n      usingStoryPanel: false\n    };\n  },\n\n\n  methods: {\n    handleElementPanel: function handleElementPanel() {\n      this.usingElementPanel = !this.usingElementPanel;\n      this.switchPanel('ElementPanel', this.usingElementPanel);\n    },\n    handleShapePanel: function handleShapePanel() {\n      this.usingShapePanel = !this.usingShapePanel;\n      this.switchPanel('ShapePanel', this.usingShapePanel);\n    },\n    handleTextPanel: function handleTextPanel() {\n      this.usingTextPanel = !this.usingTextPanel;\n      this.switchPanel('TextPanel', this.usingTextPanel);\n    },\n    handleStoryPanel: function handleStoryPanel() {\n      this.usingStoryPanel = !this.usingStoryPanel;\n      this.switchPanel('StoryPanel', this.usingStoryPanel);\n    },\n    switchPanel: function switchPanel(panel, isOpen) {\n      this.resetPanel();\n      if (isOpen) {\n        switch (panel) {\n          case 'ElementPanel':\n            this.usingElementPanel = true;\n            break;\n          case 'ShapePanel':\n            this.usingShapePanel = true;\n            break;\n          case 'TextPanel':\n            this.usingTextPanel = true;\n            this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"t\" /* OPEN_TEXT_TOOL */]);\n            break;\n          case 'StoryPanel':\n            this.usingStoryPanel = true;\n            break;\n          default:\n            break;\n        }\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"r\" /* OPEN_PANEL */], panel);\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"i\" /* CLOSE_PANEL */], panel);\n      }\n    },\n    resetPanel: function resetPanel() {\n      this.usingElementPanel = false;\n      this.usingShapePanel = false;\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"h\" /* CLOSE_FILL_COLOR */]);\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"j\" /* CLOSE_STROKE_COLOR */]);\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n      this.usingTextPanel = false;\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"k\" /* CLOSE_TEXT_TOOL */]);\n      this.usingStoryPanel = false;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"AeaF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__tools_OrderTool__ = __webpack_require__(\"YfC9\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tools_BendTool__ = __webpack_require__(\"uBqI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tools_ScaleTool__ = __webpack_require__(\"7Tca\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tools_CurveTool__ = __webpack_require__(\"hnEm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tools_LinkTool__ = __webpack_require__(\"t2k0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__tools_PenTool__ = __webpack_require__(\"CKGA\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ToolItem',\n\n  props: {\n    usingToolName: String,\n    toolName: String\n  },\n\n  data: function data() {\n    return {\n      usingToolCard: false,\n      activeColor: '#ddd',\n      styleObject: {\n        background: ''\n      }\n    };\n  },\n\n\n  watch: {\n    usingToolName: function usingToolName(newToolName) {\n      if (newToolName === this.toolName) {\n        this.styleObject.background = this.activeColor;\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"u\" /* OPEN_TOOL */], this.toolName);\n        this.usingToolCard = true;\n      } else {\n        this.styleObject.background = '';\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], this.toolName);\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"g\" /* CLEAR_SELECTING_CHARACTERS */]);\n        this.usingToolCard = false;\n      }\n    }\n  },\n\n  methods: {\n    handleClick: function handleClick() {\n      if (this.usingToolName === this.toolName) {\n        this.$emit('cancelTool', this.toolName);\n        this.usingToolCard = !this.usingToolCard;\n        if (this.usingToolCard) {\n          this.styleObject.background = this.activeColor;\n          this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"u\" /* OPEN_TOOL */], this.toolName);\n        } else {\n          this.styleObject.background = '';\n          this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], this.toolName);\n          this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"g\" /* CLEAR_SELECTING_CHARACTERS */]);\n        }\n      } else {\n        this.$emit('enterTool', this.toolName);\n      }\n    },\n    handleMouseover: function handleMouseover() {\n      if (this.styleObject.background === '') {\n        if (this.usingToolName !== this.toolName) {\n          this.styleObject.background = this.activeColor;\n        }\n      }\n    },\n    handleMouseout: function handleMouseout() {\n      if (this.styleObject.background === this.activeColor) {\n        if (this.usingToolName !== this.toolName) {\n          this.styleObject.background = '';\n        }\n      }\n    }\n  },\n\n  components: {\n    'order-tool': __WEBPACK_IMPORTED_MODULE_1__tools_OrderTool__[\"a\" /* default */],\n    'bend-tool': __WEBPACK_IMPORTED_MODULE_2__tools_BendTool__[\"a\" /* default */],\n    'scale-tool': __WEBPACK_IMPORTED_MODULE_3__tools_ScaleTool__[\"a\" /* default */],\n    'curve-tool': __WEBPACK_IMPORTED_MODULE_4__tools_CurveTool__[\"a\" /* default */],\n    'link-tool': __WEBPACK_IMPORTED_MODULE_5__tools_LinkTool__[\"a\" /* default */],\n    'pen-tool': __WEBPACK_IMPORTED_MODULE_6__tools_PenTool__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"Ao5O\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);\n\n\nvar _mutations;\n\n\n\n\nvar state = {\n  objectsQueue: [],\n  objectsTree: [],\n  focusObject: {},\n  copiedBuffer: {},\n  count: {\n    storylines: 0,\n    customshapes: 0,\n    rectangles: 0,\n    triangles: 0,\n    pentagons: 0,\n    hexagons: 0,\n    lines: 0,\n    echelons: 0,\n    circles: 0\n  }\n};\n\nvar getters = {\n  objects: function objects(state) {\n    return state.objectsQueue;\n  },\n  objectsTree: function objectsTree(state) {\n    return state.objectsTree;\n  },\n  focusObject: function focusObject(state) {\n    return state.focusObject;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"m\" /* INSERT_VISUAL_OBJECT */], function (state, obj) {\n  obj.id = state.objectsQueue.length;\n  var counts = 0;\n  switch (obj.type) {\n    case 'customshape':\n      counts = ++state.count.customshapes;\n      break;\n    case 'storyline':\n      counts = ++state.count.storylines;\n      break;\n    case 'rectangle':\n      counts = ++state.count.rectangles;\n      break;\n    case 'triangle':\n      counts = ++state.count.triangles;\n      break;\n    case 'pentagon':\n      counts = ++state.count.pentagons;\n      break;\n    case 'hexagon':\n      counts = ++state.count.hexagons;\n      break;\n    case 'echelon':\n      counts = ++state.count.echelons;\n      break;\n    case 'line':\n      counts = ++state.count.lines;\n      break;\n    case 'circle':\n      counts = ++state.count.circles;\n      break;\n    default:\n      break;\n  }\n  if (obj.type !== 'storyline') {\n    obj.name = '' + obj.type + counts;\n  }\n  obj.id = state.objectsQueue.length;\n  state.objectsQueue.push(obj);\n  state.objectsTree.push({\n    name: obj.name,\n    children: [obj]\n  });\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"n\" /* LOCATE_FOCUSOBJECT */], function (state, obj) {\n  state.focusObject = obj;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"C\" /* UPDATE_STORYLINE */], function (state, obj) {\n  state.objectsQueue[obj.id].nodes = obj.nodes;\n  // obj.nodes.forEach((node, i) => {\n  //   state.objectsQueue[obj.id].nodes[i].x = node.x\n  //   state.objectsQueue[obj.id].nodes[i].y = node.y\n  // })\n}), _mutations);\n\nvar actions = {\n  groupObjects: function groupObjects(_ref) {\n    var state = _ref.state;\n\n    var tree = state.objectsTree;\n    if (tree.length > 0) {\n      var children = [];\n      // only support two-level grouping\n      tree.forEach(function (subtree) {\n        subtree.children.forEach(function (item) {\n          if (item.isSelected) {\n            children.push(item);\n          }\n        });\n      });\n      tree.push({\n        name: 'group',\n        children: children\n      });\n    }\n  },\n  removeStorylines: function removeStorylines(_ref2) {\n    var state = _ref2.state;\n\n    state.objectsQueue = [];\n    state.objectsTree = [];\n  },\n  scaleFocusObject: function scaleFocusObject(_ref3) {\n    var state = _ref3.state;\n\n    state.focusObject.activateScale();\n    state.focusObject.closeMove();\n    state.focusObject.closeReshape();\n  },\n  reshapeFocusObject: function reshapeFocusObject(_ref4) {\n    var state = _ref4.state;\n\n    state.focusObject.closeScale();\n    state.focusObject.closeMove();\n    state.focusObject.activateReshape();\n  },\n  hideFocusObject: function hideFocusObject(_ref5) {\n    var state = _ref5.state;\n\n    state.focusObject.closeShow();\n  },\n  copyFocusObject: function copyFocusObject(_ref6) {\n    var state = _ref6.state;\n\n    state.copiedBuffer = state.focusObject;\n  },\n  pasteFocusObject: function pasteFocusObject(_ref7, newPosition) {\n    var state = _ref7.state;\n\n    var oldX = state.copiedBuffer.positionX;\n    var oldY = state.copiedBuffer.positionY;\n    var newX = newPosition.x;\n    var newY = newPosition.y;\n    var moveX = newX - oldX;\n    var moveY = newY - oldY;\n    var copiedObject = __WEBPACK_IMPORTED_MODULE_2_lodash__[\"cloneDeep\"](state.copiedBuffer);\n    copiedObject.id = state.objectsQueue.length;\n    // debugger\n    copiedObject.move(moveX, moveY);\n    copiedObject.name += '-copy';\n    state.objectsQueue.push(copiedObject);\n    state.objectsTree.push({\n      name: copiedObject.name,\n      children: [copiedObject]\n    });\n    // state.copiedBuffer = {}\n  },\n  cutFocusObject: function cutFocusObject(_ref8) {\n    var state = _ref8.state;\n\n    state.copiedBuffer = state.focusObject;\n    var objectID = state.focusObject.id;\n    for (var i = objectID + 1, len = state.objectsQueue.length; i < len; i++) {\n      var tmpObject = state.objectsQueue[i];\n      tmpObject.id--;\n    }\n    state.objectsQueue.splice(objectID, 1);\n  },\n  cancelFocusObject: function cancelFocusObject(_ref9) {\n    var state = _ref9.state;\n\n    if (state.focusObject.type !== 'storyline') {\n      state.focusObject.activateMove();\n    }\n    state.focusObject.closeScale();\n    state.focusObject.closeReshape();\n    state.focusObject.closeSelect();\n    state.focusObject = {};\n  }\n};\n\n// TODO: support multi-level grouping\n// function scanObjectsTree (tree, group, newTree) {\n//   if (tree) {\n//     tree.forEach(subtree => {\n//       if (subtree.state.isSelected) {\n//         group.children.push(subtree)\n//       } else {\n//         let newSubTree = _.cloneDeep(subtree)\n//         newSubTree.children = []\n//         newTree.push(newSubTree)\n//         if (subtree.children) {\n//           scanObjectsTree(subtree.children, group, newSubTree.children)\n//         }\n//       }\n//     })\n//   }\n// }\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n});\n\n/***/ }),\n\n/***/ \"Ap5A\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"pentagon\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"B4Sq\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'TreePanel',\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['objectsTree']))\n});\n\n/***/ }),\n\n/***/ \"BAdX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-tool\"},[_c('icon',{attrs:{\"name\":\"plus\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('input',{attrs:{\"name\":\"upload\",\"type\":\"file\"},on:{\"change\":_vm.handleUpload}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"BYOV\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_UndoTool_vue__ = __webpack_require__(\"ip5d\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e77dd880_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_UndoTool_vue__ = __webpack_require__(\"Vn2c\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"6eR/\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_UndoTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e77dd880_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_UndoTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"C84b\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MutationTypes__ = __webpack_require__(\"vjNh\");\n\n\nvar _mutations;\n\n\n\nvar state = {\n  panelActivated: false,\n  panelName: ''\n};\n\nvar getters = {\n  panelActivated: function panelActivated(state) {\n    return state.panelActivated;\n  },\n  panelName: function panelName(state) {\n    return state.panelName;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"r\" /* OPEN_PANEL */], function (state, name) {\n  state.panelActivated = true;\n  state.panelName = name;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"i\" /* CLOSE_PANEL */], function (state) {\n  state.panelActivated = false;\n  state.panelName = '';\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"a\" /* ACTIVATE_PANEL */], function (state, name) {\n  if (state.panelActivated) {\n    state.panelActivated = false;\n    state.panelName = '';\n  } else {\n    state.panelActivated = true;\n    state.panelName = name;\n  }\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"e\" /* CHANGE_PANEL */], function (state, name) {\n  state.panelName = name;\n  state.panelActivated = true;\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ \"CKGA\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PenTool_vue__ = __webpack_require__(\"t3u6\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_38e98cbf_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PenTool_vue__ = __webpack_require__(\"6zYt\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PenTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_38e98cbf_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PenTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"Crh7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_GroupSelect_vue__ = __webpack_require__(\"j73T\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0dbee687_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_GroupSelect_vue__ = __webpack_require__(\"Iaoo\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_GroupSelect_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0dbee687_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_GroupSelect_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"D4uH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_vue_loader_lib_selector_type_script_index_0_Icon_vue__ = __webpack_require__(\"dXrS\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vue_loader_lib_template_compiler_index_id_data_v_5e22f0aa_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_vue_loader_lib_selector_type_template_index_0_Icon_vue__ = __webpack_require__(\"O0jz\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"tbYJ\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_vue_loader_lib_selector_type_script_index_0_Icon_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__vue_loader_lib_template_compiler_index_id_data_v_5e22f0aa_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_vue_loader_lib_selector_type_template_index_0_Icon_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"DLEB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CubicSplineSimple; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_cardinal_spline_js__ = __webpack_require__(\"gkiq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_cardinal_spline_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_cardinal_spline_js__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__BezierNode__ = __webpack_require__(\"z4iF\");\n\n\n\n\n\n\n\n\nvar Spline = function Spline(points) {\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default()(this, Spline);\n\n  this.points = points;\n};\n\n// input three points, the middle one is the control point\n\n\nfunction getQuadraticBSplinePoints(nodes, sampleNum) {\n  var px = nodes.map(function (node) {\n    return node.x;\n  });\n  var py = nodes.map(function (node) {\n    return node.y;\n  });\n  var step = 1 / (sampleNum - 1);\n  var outPoints = [];\n  for (var i = 0; i < sampleNum; i++) {\n    var tmpT = i * step;\n    var p1 = 0.5 * Math.pow(tmpT - 1, 2);\n    var p2 = 0.5 * (-2 * tmpT * tmpT + 2 * tmpT + 1);\n    var p3 = 0.5 * Math.pow(tmpT, 2);\n    var tmpX = p1 * px[0] + p2 * px[1] + p3 * px[2];\n    var tmpY = p1 * py[0] + p2 * py[1] + p3 * py[2];\n    var tmpNode = new __WEBPACK_IMPORTED_MODULE_6__BezierNode__[\"c\" /* StyleNode */](tmpX, tmpY);\n    outPoints.push(tmpNode);\n  }\n  return outPoints;\n}\n\n// sample number between two control points\nfunction cubicFit(nodes, sampleNum) {\n  var path = [];\n  var orgPoints = [];\n  nodes.forEach(function (node) {\n    orgPoints.push(node.x);\n    orgPoints.push(node.y);\n  });\n  var outPoints = Object(__WEBPACK_IMPORTED_MODULE_5_cardinal_spline_js__[\"getCurvePoints\"])(orgPoints, 0.5, sampleNum);\n  var len = outPoints.length / 2;\n  for (var i = 0; i < len - 1; i++) {\n    var tmpX = outPoints[2 * i];\n    var tmpY = outPoints[2 * i + 1];\n    var tmpStyleNode = new __WEBPACK_IMPORTED_MODULE_6__BezierNode__[\"c\" /* StyleNode */](tmpX, tmpY);\n    path.push(tmpStyleNode);\n  }\n  return path;\n}\n\nvar CubicSplineSimple = function (_Spline) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(CubicSplineSimple, _Spline);\n\n  function CubicSplineSimple(points) {\n    __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_classCallCheck___default()(this, CubicSplineSimple);\n\n    var _this = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CubicSplineSimple.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(CubicSplineSimple)).call(this, points));\n\n    _this.flatSampleNum = 4;\n    _this.stepSampleNum = 8;\n    _this.tension = 0.15;\n    return _this;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(CubicSplineSimple, [{\n    key: 'fit',\n    value: function fit() {\n      // console.log('fit')\n      var points = this.points;\n      var path = this.points.slice();\n      for (var i = 0; i < points.length - 1;) {\n        if (Math.abs(points[i].y - points[i + 1].y) < 0.001) {\n          // first seg found\n          for (var j = i + 2; j < points.length - 1; j++) {\n            if (Math.abs(points[j].y - points[j + 1].y) < 0.001) {\n              if (Math.abs(points[i].y - points[j].y) > 0.001) {\n                // segs with diffrent y\n                var distance = j - i - 1;\n                var middleNodesCount = distance - 1;\n                if (middleNodesCount < 0) {\n                  // what?\n                  console.error('middleNode less than 0');\n                } else if (middleNodesCount < 3) {\n                  var middle = void 0;\n                  if (middleNodesCount === 0) {\n                    middle = new __WEBPACK_IMPORTED_MODULE_6__BezierNode__[\"c\" /* StyleNode */]((points[i + 1].x + points[j].x) / 2, (points[i + 1].y + points[j].y) / 2);\n                  } else {\n                    var middleIndex = middleNodesCount === 1 ? i + 2 : i + 3;\n                    middle = new __WEBPACK_IMPORTED_MODULE_6__BezierNode__[\"c\" /* StyleNode */](points[middleIndex].x, points[middleIndex].y);\n                  }\n                  var _result = getQuadraticBSplinePoints([points[i], points[i + 1], middle], this.stepSampleNum);\n                  _result = _result.concat(getQuadraticBSplinePoints([middle, points[j], points[j + 1]], this.stepSampleNum));\n                  path[i + 1] = _result;\n                  for (var k = i + 2; k <= i + 2 + middleNodesCount; k++) {\n                    path[k] = undefined;\n                  }\n                } else {\n                  var nodes = points.slice(i + 1, j + 1);\n                  // console.log(nodes.length)\n                  var _result2 = nodes.length > 3 ? cubicFit(nodes, 2) : getQuadraticBSplinePoints(nodes, (nodes.length + 1) * this.stepSampleNum);\n                  // let result = getQuadraticBSplinePoints(nodes, (nodes.length + 1) * this.stepSampleNum)\n                  path[i + 1] = _result2;\n                  for (var _k = i + 2; _k <= j + 1; _k++) {\n                    path[_k] = undefined;\n                  }\n                }\n              } else {}\n              // first seg match second\n\n              // let second seg as first\n              i = j - 1;\n              break;\n            }\n          }\n          i++;\n        } else {\n          i++;\n        }\n      }\n      // flatmap here\n      var result = [];\n      path.forEach(function (v) {\n        if (v) {\n          if (Array.isArray(v)) {\n            v.forEach(function (n) {\n              result.push(n);\n            });\n          } else {\n            result.push(v);\n          }\n        }\n      });\n      return result;\n    }\n  }]);\n\n  return CubicSplineSimple;\n}(Spline);\n\n/***/ }),\n\n/***/ \"DeHT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'StoryPanel',\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    canvasW: function canvasW() {\n      return this.paintingCardList[0].width;\n    },\n    canvasH: function canvasH() {\n      return this.paintingCardList[0].height;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['objects', 'storyConfig', 'paintingCardList'])),\n\n  methods: {\n    updateCanvasW: function updateCanvasW(event) {\n      this.paintingCardList[0].geometry.width = event;\n    },\n    updateCanvasH: function updateCanvasH(event) {\n      this.paintingCardList[0].geometry.height = event;\n    },\n    updateXScalingFactor: function updateXScalingFactor(event) {\n      this.storyConfig.xScaleFactor = event;\n    },\n    updateYScalingFactor: function updateYScalingFactor(event) {\n      this.storyConfig.yScaleFactor = event;\n    },\n    updateRelaxingFactor: function updateRelaxingFactor(event) {\n      this.storyConfig.relaxingFactor = event;\n    },\n    updateFrameStep: function updateFrameStep(event) {\n      this.storyConfig.frameStep = event;\n    },\n    updateCurveStep: function updateCurveStep(event) {\n      this.storyConfig.curveStep = event;\n    },\n    updateSampleStep: function updateSampleStep(event) {\n      this.storyConfig.sampleStep = event;\n    },\n    updateJitterWave: function updateJitterWave(event) {\n      this.storyConfig.jitterWave = event;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"E7qz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolSlider_vue__ = __webpack_require__(\"F2Om\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_270c3e90_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolSlider_vue__ = __webpack_require__(\"3zLJ\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"TdY+\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolSlider_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_270c3e90_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolSlider_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"EVPn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tool-item\",style:(_vm.styleObject),on:{\"mouseover\":_vm.handleMouseover,\"mouseout\":_vm.handleMouseout,\"click\":function($event){return _vm.handleClick($event)}}},[(_vm.toolName === 'OrderTool')?_c('div',[_c('order-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'BendTool')?_c('div',[_c('bend-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'ScaleTool')?_c('div',[_c('scale-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'CurveTool')?_c('div',[_c('curve-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'LinkTool')?_c('div',[_c('link-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'PenTool')?_c('div',[_c('pen-tool')],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Ef3N\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"move-frame\",on:{\"mouseup\":function($event){return _vm.handleMouseup($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMousedown($event)},\"click\":function($event){$event.stopPropagation();},\"contextmenu\":function($event){return _vm.handleContextmenu($event)}}},[_c('rotateframe',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"EgXv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__types_VisualObject__ = __webpack_require__(\"rWw5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__objects_VisualObject__ = __webpack_require__(\"upPS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_GroupSelect__ = __webpack_require__(\"Crh7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_ScaleSelect__ = __webpack_require__(\"R/my\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__utils_PathSelect__ = __webpack_require__(\"ewtb\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__objects_TextObject__ = __webpack_require__(\"X9oV\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'SVGCard',\n\n  props: {\n    mouse: Object,\n    cardObject: Object,\n    scrollX: Number,\n    scrollY: Number\n  },\n\n  data: function data() {\n    return {\n      cardEl: {},\n      storyReorder: null,\n      sessionMover: null,\n      reorderRecordY: 0\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    cardID: function cardID() {\n      return this.cardObject.ID;\n    },\n    cardWidth: function cardWidth() {\n      return this.cardObject.width;\n    },\n    cardHeight: function cardHeight() {\n      return this.cardObject.height;\n    },\n    cardDepth: function cardDepth() {\n      return this.cardObject.depth;\n    },\n    cardPositionX: function cardPositionX() {\n      return this.cardObject.positionX;\n    },\n    cardPositionY: function cardPositionY() {\n      return this.cardObject.positionY;\n    },\n    styleObject: function styleObject() {\n      var cursorType = '';\n      if (this.isUsingCurveTool) {\n        cursorType = 'crosshair';\n      }\n      if (this.isUsingBendTool) {\n        cursorType = 'crosshair';\n      }\n      if (this.isUsingScaleTool) {\n        cursorType = 'crosshair';\n      }\n      if (this.isUsingTextTool) {\n        cursorType = 'text';\n      }\n      return {\n        width: this.cardWidth + 'px',\n        height: this.cardHeight + 'px',\n        padding: this.cardPositionY + 'px ' + this.cardPositionX + 'px',\n        cursor: cursorType\n      };\n    },\n    mouseX: function mouseX() {\n      return this.mouse.positionX - this.cardPositionX + this.scrollX;\n    },\n    mouseY: function mouseY() {\n      return this.mouse.positionY - this.cardPositionY + this.scrollY;\n    },\n    mousedownCount: function mousedownCount() {\n      return this.mouse.downCount;\n    },\n    mouseupCount: function mouseupCount() {\n      return this.mouse.upCount;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['paintingCardList', 'isUsingCurveTool', 'isUsingBendTool', 'isUsingScaleTool', 'isUsingTextTool', 'objects', 'textObjects'])),\n\n  methods: {\n    handleMousedown: function handleMousedown() {\n      if (this.isUsingTextTool) {\n        var x = this.mouse.positionX + this.scrollX;\n        var y = this.mouse.positionY + this.scrollY;\n        var textObj = new __WEBPACK_IMPORTED_MODULE_3__types_VisualObject__[\"d\" /* Text */]('text', x, y);\n        this.$store.dispatch('insertTextObject', textObj);\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__[\"p\" /* LOCATE_TEXT_OBJECT */], textObj);\n      }\n    }\n  },\n\n  mounted: function mounted() {\n    // update svg size\n    var paintingEl = document.getElementsByClassName('painting')[0];\n    var paintingW = paintingEl.clientWidth;\n    var paintingH = paintingEl.clientHeight;\n    var positionX = 0.05 * paintingW;\n    var positionY = 0.02 * paintingH;\n    var svgCardW = paintingW - 2 * positionX;\n    var svgCardH = paintingH - 2 * positionY;\n    this.paintingCardList[0].updateGeometry(positionX, positionY, svgCardW, svgCardH);\n    this.$store.commit(__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__[\"D\" /* UPDATE_SVG_CARD */], {\n      canvasW: svgCardW,\n      canvasH: svgCardH\n    });\n  },\n\n\n  components: {\n    'visual-object': __WEBPACK_IMPORTED_MODULE_4__objects_VisualObject__[\"a\" /* default */],\n    'frame-select': __WEBPACK_IMPORTED_MODULE_5__utils_GroupSelect__[\"a\" /* default */],\n    'scale-select': __WEBPACK_IMPORTED_MODULE_6__utils_ScaleSelect__[\"a\" /* default */],\n    'path-select': __WEBPACK_IMPORTED_MODULE_7__utils_PathSelect__[\"a\" /* default */],\n    'text-object': __WEBPACK_IMPORTED_MODULE_8__objects_TextObject__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"EnH0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TreeNode_vue__ = __webpack_require__(\"0sPE\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_b06ac9b8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TreeNode_vue__ = __webpack_require__(\"qOY/\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"0bPP\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TreeNode_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_b06ac9b8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TreeNode_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"F2Om\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ToolSlider',\n\n  props: {\n    min: Number,\n    max: Number,\n    step: Number,\n    modelVal: Number\n  },\n\n  computed: {\n    styleObject: function styleObject() {\n      var ratio = (this.modelVal - this.min) * 100 / (this.max - this.min);\n      this.$emit('updateSliderVal', this.modelVal);\n      return {\n        backgroundSize: ratio + '% 100%'\n      };\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"GBS+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('workspace'),_vm._v(\" \"),_c('side-panel'),_vm._v(\" \"),_c('side-panelbar'),_vm._v(\" \"),_c('tool-box')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"GMF1\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Shifting'),expression:\"'Shifting'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Gc5s\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-panel\"},_vm._l((_vm.objectsTree),function(item,index){return _c('ul',{key:index},[(item.children.length == 1)?_c('tree-node',{attrs:{\"model\":item.children[0]}}):_c('tree-node',{attrs:{\"model\":item}})],1)}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"H5jB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot__ = __webpack_require__(\"KmDb\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'RectFrame',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    frameX: Number,\n    frameY: Number,\n    frameW: Number,\n    frameH: Number\n  },\n\n  data: function data() {\n    return {\n      a: 0,\n      b: 0,\n      c: 0,\n      draggedNode: '',\n      frameUpdateCount: 0,\n      xMouseInFrame: 0,\n      yMouseInFrame: 0,\n      rx: 0,\n      ry: -30,\n      sin: 0,\n      cos: 0,\n      updateX: this.frameX || 0,\n      updateY: this.frameY || 0,\n      updateW: this.frameW || 0,\n      updateH: this.frameH || 0,\n      oldW: this.frameW || 0,\n      oldH: this.frameH || 0\n    };\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return {\n        tPoint: { x: this.updateX + this.updateW / 2, y: this.updateY, cursor: { 'cursor': 'n-resize' } },\n        rPoint: { x: this.updateX + this.updateW, y: this.updateY + this.updateH / 2, cursor: { 'cursor': 'e-resize' } },\n        bPoint: { x: this.updateX + this.updateW / 2, y: this.updateY + this.updateH, cursor: { 'cursor': 's-resize' } },\n        lPoint: { x: this.updateX, y: this.updateY + this.updateH / 2, cursor: { 'cursor': 'w-resize' } },\n        tlPoint: { x: this.updateX, y: this.updateY, cursor: { 'cursor': 'nw-resize' } },\n        trPoint: { x: this.updateX + this.updateW, y: this.updateY, cursor: { 'cursor': 'ne-resize' } },\n        brPoint: { x: this.updateX + this.updateW, y: this.updateY + this.updateH, cursor: { 'cursor': 'se-resize' } },\n        blPoint: { x: this.updateX, y: this.updateY + this.updateH, cursor: { 'cursor': 'sw-resize' } }\n      };\n    },\n    positionX: function positionX() {\n      return this.updateX + this.updateW / 2;\n    },\n    positionY: function positionY() {\n      return this.updateY + this.updateH / 2;\n    },\n    rotateNode: function rotateNode() {\n      return {\n        x: this.positionX + this.rx,\n        y: this.positionY + this.ry\n      };\n    }\n  },\n\n  methods: {\n    handleMousedown: function handleMousedown(key) {\n      this.draggedNode = key;\n      this.xMouseInFrame = this.mouseX - this.updateX;\n      this.yMouseInFrame = this.mouseY - this.updateY;\n      this.oldW = this.updateW;\n      this.oldH = this.updateH;\n    },\n    handleMouseup: function handleMouseup() {\n      this.draggedNode = '';\n      this.$emit('updateFrame', {\n        x: this.updateX,\n        y: this.updateY,\n        w: this.updateW,\n        h: this.updateH\n      });\n    },\n    handleRotateMousedown: function handleRotateMousedown() {\n      this.draggedNode = 'circle';\n      var a = this.rotateNode.x - this.positionX;\n      var b = this.positionY - this.rotateNode.y;\n      var c = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(a, b);\n      this.sin = a / c;\n      this.cos = b / c;\n    },\n    handleRotateMouseup: function handleRotateMouseup() {\n      this.draggedNode = '';\n      var a = this.rotateNode.x - this.positionX;\n      var b = this.positionY - this.rotateNode.y;\n      var c = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(a, b);\n      this.$emit('rotate', {\n        sin: a / c * this.cos - b / c * this.sin,\n        cos: b / c * this.cos + a / c * this.sin\n      });\n    }\n  },\n\n  watch: {\n    mouseX: function mouseX(newVal) {\n      var newX = newVal - this.xMouseInFrame;\n      var newW = this.updateW;\n      switch (this.draggedNode) {\n        case 'rPoint':\n        case 'trPoint':\n        case 'brPoint':\n          newW = this.oldW + newX - this.updateX;\n          if (newW > 0) {\n            this.$emit('updateW', newW);\n            this.updateW = newW;\n          }\n          break;\n        case 'lPoint':\n        case 'tlPoint':\n        case 'blPoint':\n          newW = this.updateW - (newX - this.updateX);\n          if (newW > 0) {\n            this.$emit('updateX', newW);\n            this.updateX = newX;\n            this.updateW = newW;\n          }\n          break;\n        case 'circle':\n          this.rx = newVal - this.positionX;\n          var a = this.rotateNode.x - this.positionX;\n          var b = this.positionY - this.rotateNode.y;\n          var c = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(a, b);\n          this.$emit('rotate', { sin: a / c * this.cos - b / c * this.sin, cos: b / c * this.cos + a / c * this.sin });\n          break;\n        default:\n          break;\n      }\n    },\n    mouseY: function mouseY(newVal) {\n      var newY = newVal - this.yMouseInFrame;\n      var newH = this.frameH;\n      switch (this.draggedNode) {\n        case 'tPoint':\n        case 'tlPoint':\n        case 'trPoint':\n          newH = this.updateH - (newY - this.updateY);\n          if (newH > 0) {\n            this.$emit('updateY', newH);\n            this.updateY = newY;\n            this.updateH = newH;\n          }\n          break;\n        case 'bPoint':\n        case 'brPoint':\n        case 'blPoint':\n          newH = this.oldH + (newY - this.updateY);\n          if (newH > 0) {\n            this.$emit('updateH', newH);\n            this.updateH = newH;\n          }\n          break;\n        case 'circle':\n          this.ry = newVal - this.positionY;\n          var a = this.rotateNode.x - this.positionX;\n          var b = this.positionY - this.rotateNode.y;\n          var c = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(a, b);\n          console.log(a, b, c);\n          this.$emit('rotate', { sin: a / c * this.cos - b / c * this.sin, cos: b / c * this.cos + a / c * this.sin });\n          break;\n        default:\n          break;\n      }\n    },\n    frameX: function frameX(newVal) {\n      this.updateX = newVal;\n    },\n    frameY: function frameY(newVal) {\n      this.updateY = newVal;\n    },\n    frameW: function frameW(newVal) {\n      this.updateW = newVal;\n    },\n    frameH: function frameH(newVal) {\n      this.updateH = newVal;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"H6qF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SVGCard_vue__ = __webpack_require__(\"EgXv\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_bc271eb0_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SVGCard_vue__ = __webpack_require__(\"ihPm\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"QZzn\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SVGCard_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_bc271eb0_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SVGCard_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"HuY9\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MutationTypes__ = __webpack_require__(\"vjNh\");\n\n\nvar _mutations;\n\n\n\nvar RGBA_BLACK = {\n  rgba: {\n    r: 0,\n    g: 0,\n    b: 0,\n    a: 1\n  }\n};\n\nvar RGBA_WHITE = {\n  rgba: {\n    r: 255,\n    g: 255,\n    b: 255,\n    a: 1\n  }\n};\n\nvar DEFAULT_STYLE = {\n  fill: RGBA_WHITE,\n  stroke: RGBA_BLACK,\n  strokeWidth: 1,\n  opacity: 1\n};\n\nvar state = {\n  focusObjectStyle: DEFAULT_STYLE,\n  isUsingFillColor: false,\n  isUsingStrokeColor: false\n};\n\nvar getters = {\n  objectStyle: function objectStyle(state) {\n    return state.focusObjectStyle;\n  },\n  isUsingFillColor: function isUsingFillColor(state) {\n    return state.isUsingFillColor;\n  },\n  isUsingStrokeColor: function isUsingStrokeColor(state) {\n    return state.isUsingStrokeColor;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"o\" /* LOCATE_FOCUSOBJECT_STYLE */], function (state, style) {\n  state.focusObjectStyle = style;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"y\" /* RESTORE_FOCUSOBJECT_STYLE */], function (state) {\n  state.focusObjectStyle = DEFAULT_STYLE;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"q\" /* OPEN_FILL_COLOR */], function (state) {\n  state.isUsingStrokeColor = false;\n  state.isUsingFillColor = true;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"h\" /* CLOSE_FILL_COLOR */], function (state) {\n  state.isUsingFillColor = false;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"s\" /* OPEN_STROKE_COLOR */], function (state) {\n  state.isUsingFillColor = false;\n  state.isUsingStrokeColor = true;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"j\" /* CLOSE_STROKE_COLOR */], function (state) {\n  state.isUsingStrokeColor = false;\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ \"IJeS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Rectangle',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  // init rectangle\n  mounted: function mounted() {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(10, 10, 10, 10);\n      this.object.addBezierNode(100, 10, 100, 10);\n      this.object.addBezierNode(100, 100, 100, 100);\n      this.object.addBezierNode(10, 100, 10, 100);\n      this.object.init();\n    }\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    pathD: function pathD() {\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          pathD += ' L ' + node.x + ' ' + node.y;\n        }\n      });\n      if (this.nodes.length > 2) {\n        pathD += ' L ' + this.nodes[0].x + ' ' + this.nodes[0].y;\n      }\n      return pathD;\n    }\n  },\n\n  components: {\n    controlnode: __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"Iaoo\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingFrameSelect),expression:\"isUsingFrameSelect\"}],staticClass:\"group-select\"},_vm._l((_vm.linesNum),function(n){return _c('line',{key:n,attrs:{\"x1\":_vm.sPoints[n-1].x,\"y1\":_vm.sPoints[n-1].y,\"x2\":_vm.ePoints[n-1].x,\"y2\":_vm.ePoints[n-1].y,\"stroke\":\"red\",\"stroke-width\":\"10\",\"opacity\":\"0.5\"}})}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"IcnI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__modules_StyleStore__ = __webpack_require__(\"HuY9\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__modules_ObjectStore__ = __webpack_require__(\"Ao5O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__modules_ToolStore__ = __webpack_require__(\"yO/d\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__modules_TextStore__ = __webpack_require__(\"hSCs\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__modules_CardStore__ = __webpack_require__(\"O9ke\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__modules_PanelStore__ = __webpack_require__(\"C84b\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__modules_StoryStore__ = __webpack_require__(\"M7H2\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__MutationTypes__ = __webpack_require__(\"vjNh\");\n\n\nvar _mutations;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"a\" /* default */]);\n\nvar state = {\n  isObjectsActiveChange: false,\n  usingToolName: ''\n};\n\nvar getters = {\n  isObjectsActiveChange: function isObjectsActiveChange(state) {\n    return state.isObjectsActiveChange;\n  },\n  usingToolName: function usingToolName(state) {\n    return state.usingToolName;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_10__MutationTypes__[\"w\" /* RESTORE_DEFAULT_OBJECTS */], function (state) {\n  state.isObjectsActiveChange = !state.isObjectsActiveChange;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_10__MutationTypes__[\"f\" /* CHANGE_TOOL */], function (state, tool) {\n  state.usingToolName = tool;\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_2_vuex__[\"a\" /* default */].Store({\n  modules: {\n    StyleStore: __WEBPACK_IMPORTED_MODULE_3__modules_StyleStore__[\"a\" /* default */],\n    ObjectStore: __WEBPACK_IMPORTED_MODULE_4__modules_ObjectStore__[\"a\" /* default */],\n    ToolStore: __WEBPACK_IMPORTED_MODULE_5__modules_ToolStore__[\"a\" /* default */],\n    TextStore: __WEBPACK_IMPORTED_MODULE_6__modules_TextStore__[\"a\" /* default */],\n    CardStore: __WEBPACK_IMPORTED_MODULE_7__modules_CardStore__[\"a\" /* default */],\n    PanelStore: __WEBPACK_IMPORTED_MODULE_8__modules_PanelStore__[\"a\" /* default */],\n    StoryStore: __WEBPACK_IMPORTED_MODULE_9__modules_StoryStore__[\"a\" /* default */]\n  },\n  state: state,\n  getters: getters,\n  mutations: mutations\n}));\n\n/***/ }),\n\n/***/ \"J4kB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scaleframe',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount},on:{\"rotate\":function($event){return _vm.rotate($event)}}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Kj9C\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Echelon',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  // init echelon\n  mounted: function mounted() {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(125, 100, 125, 100);\n      this.object.addBezierNode(175, 100, 175, 100);\n      this.object.addBezierNode(200, 200, 200, 200);\n      this.object.addBezierNode(100, 200, 100, 200);\n      this.object.init();\n    }\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    pathD: function pathD() {\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          pathD += ' L ' + node.x + ' ' + node.y;\n        }\n      });\n      if (this.nodes.length > 2) {\n        pathD += ' L ' + this.nodes[0].x + ' ' + this.nodes[0].y;\n      }\n      return pathD;\n    }\n  },\n\n  components: {\n    controlnode: __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"KuhB\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Hexagon',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  // init hexagon\n  mounted: function mounted() {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(100, 10, 100, 10);\n      this.object.addBezierNode(200, 10, 200, 10);\n      this.object.addBezierNode(250, 96.5, 250, 96.5);\n      this.object.addBezierNode(200, 183, 100, 183);\n      this.object.addBezierNode(100, 183, 100, 183);\n      this.object.addBezierNode(50, 96.5, 50, 96.5);\n      this.object.init();\n    }\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    pathD: function pathD() {\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          pathD += ' L ' + node.x + ' ' + node.y;\n        }\n      });\n      if (this.nodes.length > 2) {\n        pathD += ' L ' + this.nodes[0].x + ' ' + this.nodes[0].y;\n      }\n      return pathD;\n    }\n  },\n\n  components: {\n    controlnode: __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"L8V5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UniformSampler; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__BezierNode__ = __webpack_require__(\"z4iF\");\n\n\n\n\nvar UniformSampler = function () {\n  function UniformSampler() {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, UniformSampler);\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(UniformSampler, null, [{\n    key: 'sample',\n\n    // assume nodes are list in a ascending order \n    value: function sample(nodes, step) {\n      var result = [];\n      for (var i = 1; i < nodes.length; i++) {\n        var lastNode = nodes[i - 1];\n        var thisNode = nodes[i];\n\n        var arc = Math.atan2(thisNode.y - lastNode.y, thisNode.x - lastNode.x);\n        var yStep = Math.sin(arc) * step;\n        var xStep = Math.cos(arc) * step;\n        for (var x = lastNode.x, y = lastNode.y; x < thisNode.x; x += xStep, y += yStep) {\n          result.push(new __WEBPACK_IMPORTED_MODULE_2__BezierNode__[\"c\" /* StyleNode */](x, y));\n        }\n      }\n      result.push(nodes[nodes.length - 1]);\n      return result;\n    }\n  }, {\n    key: 'jitter',\n    value: function jitter(nodes, range) {\n      for (var i = 1; i < nodes.length; i++) {\n        var lastNode = nodes[i - 1];\n        var thisNode = nodes[i];\n        var step = UniformSampler.randomJitter(range);\n        var arc = Math.atan2(thisNode.y - lastNode.y, thisNode.x - lastNode.x) + Math.PI / 2;\n        var yStep = Math.sin(arc) * step;\n        var xStep = Math.cos(arc) * step;\n\n        nodes[i].y += yStep;\n        nodes[i].x += xStep;\n      }\n      return nodes;\n    }\n  }, {\n    key: 'randomJitter',\n    value: function randomJitter(range) {\n      return (Math.random() - 0.5) * range;\n    }\n  }]);\n\n  return UniformSampler;\n}();\n\n/***/ }),\n\n/***/ \"M7H2\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(\"BO1k\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(\"d7EF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__ = __webpack_require__(\"Xxa5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__ = __webpack_require__(\"exGp\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map__ = __webpack_require__(\"ifoU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__types_VisualObject__ = __webpack_require__(\"rWw5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__types_StoryLoader__ = __webpack_require__(\"76OO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__types_Selector__ = __webpack_require__(\"puZo\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__types_PathReshaper__ = __webpack_require__(\"iJRs\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_axios__ = __webpack_require__(\"mtWM\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_axios__);\n\n\n\n\n\n\n\nvar _mutations;\n\n\n\n\n\n\n\n\n\nvar instance = __WEBPACK_IMPORTED_MODULE_12_axios___default.a.create({\n  baseURL: 'http://localhost:5050/api/'\n});\n\nvar state = {\n  storylines: [],\n  storylinesBak: [],\n  rawStorylines: [],\n  frameTable: new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a(),\n  sessionTable: [],\n  permTable: [],\n  characterTable: new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a(),\n  storylineTable: new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a(),\n  dashRangeMap: [],\n  targetPath: [],\n  focusCharacters: [],\n  twineCharacters: [],\n  twineRange: [],\n  twineUsed: false,\n  selectedCharacters: [],\n  selectedFrames: [],\n  storyConfig: {\n    paddingTop: 100,\n    paddingLeft: 400,\n    paddingBottom: 100,\n    paddingRight: 100,\n    xScaleFactor: 1,\n    yScaleFactor: 1,\n    relaxingFactor: 60,\n    frameStep: 120,\n    curveStep: 160,\n    canvasW: 1800,\n    canvasH: 860,\n    curveTheta: 30 / 180 * Math.PI,\n    sampleStep: 5,\n    jitterWave: 0.00001,\n    content: ''\n  },\n  frameSteps: [],\n  curveSteps: [],\n  request: {\n    id: '',\n    sessionInnerGap: 18,\n    sessionOuterGap: 54,\n    sessionInnerGaps: [],\n    sessionOuterGaps: [],\n    majorCharacters: [],\n    orders: [],\n    groupIds: [],\n    selectedSessions: [],\n    orderTable: [],\n    sessionBreaks: []\n  },\n  history: []\n};\n\nvar getters = {\n  identifier: function identifier(state) {\n    return state.request.identifier;\n  },\n  request: function request(state) {\n    return state.request;\n  },\n  storyConfig: function storyConfig(state) {\n    return state.storyConfig;\n  },\n  storylines: function storylines(state) {\n    return state.storylines;\n  },\n  targetPath: function targetPath(state) {\n    return state.targetPath;\n  },\n  storyFrameMap: function storyFrameMap(state) {\n    return state.frameTable;\n  },\n  storySessionMap: function storySessionMap(state) {\n    return state.sessionTable;\n  },\n  storyCharacterMap: function storyCharacterMap(state) {\n    return state.characterTable;\n  },\n  dashRangeMap: function dashRangeMap(state) {\n    return state.dashRangeMap;\n  },\n  selectedCharacters: function selectedCharacters(state) {\n    return state.selectedCharacters;\n  },\n  selectedFrames: function selectedFrames(state) {\n    return state.selectedFrames;\n  },\n  twineCharacters: function twineCharacters(state) {\n    return state.twineCharacters;\n  },\n  history: function history(state) {\n    return state.history;\n  },\n  twineUsed: function twineUsed(state) {\n    return state.twineUsed;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"B\" /* UPDATE_REQUEST */], function (state, request) {\n  state.request = request;\n}), __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"b\" /* ADD_FOCUSING_CHARACTER */], function (state, id) {\n  if (state.focusCharacters.indexOf(id) === -1) {\n    state.focusCharacters.push(id);\n  }\n}), __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"d\" /* ADD_SELECTING_CHARACTER */], function (state, id) {\n  // state.selectedCharacters = []\n  if (state.selectedCharacters.indexOf(id) === -1) {\n    state.selectedCharacters.push(id);\n  }\n}), __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"g\" /* CLEAR_SELECTING_CHARACTERS */], function (state, id) {\n  state.selectedCharacters = [];\n}), __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"v\" /* RECORD_TARGET_PATH */], function (state, path) {\n  state.targetPath = path;\n}), __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"D\" /* UPDATE_SVG_CARD */], function (state, size) {\n  state.storyConfig.canvasW = size.canvasW;\n  state.storyConfig.canvasH = size.canvasH;\n}), __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"c\" /* ADD_HISTORY */], function (state) {\n  state.history.push({ storylines: __WEBPACK_IMPORTED_MODULE_11_lodash__[\"cloneDeep\"](state.storylines), request: __WEBPACK_IMPORTED_MODULE_11_lodash__[\"cloneDeep\"](state.request) });\n}), _mutations);\n\nvar actions = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_defineProperty___default()({\n  uploadXMLFile: function uploadXMLFile(_ref, file) {\n    var _this = this;\n\n    var state = _ref.state,\n        dispatch = _ref.dispatch;\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function _callee() {\n      var xmlData, response;\n      return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              xmlData = new FormData();\n\n              xmlData.append('file', file);\n              _context.next = 4;\n              return instance.post('/upload', xmlData);\n\n            case 4:\n              response = _context.sent;\n\n              if (response.data.error === 0) {\n                state.request.id = response.data.data.identifier;\n                dispatch('layoutStoryline');\n              }\n\n            case 6:\n            case 'end':\n              return _context.stop();\n          }\n        }\n      }, _callee, _this);\n    }))();\n  },\n  layoutStoryline: function layoutStoryline(_ref2) {\n    var _this2 = this;\n\n    var state = _ref2.state,\n        commit = _ref2.commit,\n        dispatch = _ref2.dispatch;\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function _callee2() {\n      var response, storyLoader;\n      return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return instance.post('/update', state.request);\n\n            case 2:\n              response = _context2.sent;\n\n              if (response.data.error === 0) {\n                // load story data first\n                state.rawStorylines = response.data.data.array;\n                state.sessionTable = response.data.data.sessionTable;\n                state.permTable = response.data.data.perm;\n                dispatch('anchorStorylines');\n                // load frameTable, characterTable\n                dispatch('updateFrameCurveSteps');\n                dispatch('updateStorySize');\n                storyLoader = new __WEBPACK_IMPORTED_MODULE_8__types_StoryLoader__[\"a\" /* StoryLoader */](state.rawStorylines, state.sessionTable, state.frameSteps, state.curveSteps, state.storyConfig);\n\n                state.storylines = storyLoader.generateStorylines();\n                dispatch('updateFrameTable');\n                dispatch('updateCharacterTable');\n                // generate storylines\n                // load storyilnes using visual objects\n                state.storylines.forEach(function (storyline) {\n                  var tmpVisualObject = new __WEBPACK_IMPORTED_MODULE_7__types_VisualObject__[\"c\" /* Storyline */]('storyline');\n                  tmpVisualObject.name = storyline.name;\n                  tmpVisualObject.nodes = storyline.points;\n                  tmpVisualObject.characterId = storyline.characterId;\n                  commit(__WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"m\" /* INSERT_VISUAL_OBJECT */], tmpVisualObject);\n                  state.storylineTable.set(storyline.name, tmpVisualObject.id);\n                });\n              }\n\n            case 4:\n            case 'end':\n              return _context2.stop();\n          }\n        }\n      }, _callee2, _this2);\n    }))();\n  },\n\n\n  // TODO: update different config files\n  updateStoryline: function updateStoryline(_ref3) {\n    var _this3 = this;\n\n    var state = _ref3.state,\n        commit = _ref3.commit,\n        dispatch = _ref3.dispatch;\n    return __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_asyncToGenerator___default()( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.mark(function _callee3() {\n      var response, storyLoader;\n      return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return instance.post('/update', state.request);\n\n            case 2:\n              response = _context3.sent;\n\n              if (response.data.error === 0) {\n                if (state.storylines.length > 0) {\n                  // load story data first\n                  state.rawStorylines = response.data.data.array;\n                  state.sessionTable = response.data.data.sessionTable;\n                  state.permTable = response.data.data.perm;\n                  dispatch('anchorStorylines');\n                  // generate storylines\n                  dispatch('updateStorySize');\n                  storyLoader = new __WEBPACK_IMPORTED_MODULE_8__types_StoryLoader__[\"a\" /* StoryLoader */](state.rawStorylines, state.sessionTable, state.frameSteps, state.curveSteps, state.storyConfig);\n\n                  state.storylines = storyLoader.generateStorylines();\n                  // update frameTable, characterTable\n                  dispatch('updateFrameTable');\n                  dispatch('updateCharacterTable');\n                  // update visual objects\n                  state.storylines.forEach(function (storyline) {\n                    var id = state.storylineTable.get(storyline.name);\n                    commit(__WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"C\" /* UPDATE_STORYLINE */], { id: id, nodes: storyline.points });\n                  });\n                } else {\n                  dispatch('layoutStoryline');\n                }\n                commit(__WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"c\" /* ADD_HISTORY */]);\n              }\n\n            case 4:\n            case 'end':\n              return _context3.stop();\n          }\n        }\n      }, _callee3, _this3);\n    }))();\n  },\n  anchorStorylines: function anchorStorylines(_ref4) {\n    var state = _ref4.state;\n\n    var frameCount = state.sessionTable[0].length;\n    var characterCount = state.sessionTable.length;\n    if (frameCount > 0) {\n      var minCharacterY = 9999;\n      for (var frame = 0; frame < frameCount; frame++) {\n        // get minimized y position of character\n        for (var character = 0; character < characterCount; character++) {\n          if (state.permTable[character][frame] === 1) {\n            var tmpY = state.rawStorylines[character].points[frame].item3;\n            minCharacterY = tmpY < minCharacterY ? tmpY : minCharacterY;\n          }\n        }\n      }\n      // anchor y pos of all storylines\n      var deltaY = minCharacterY - state.storyConfig.paddingTop;\n      state.rawStorylines.forEach(function (item) {\n        var storylineNodes = item.points;\n        if (item.name !== 'RABBIT') {\n          storylineNodes.forEach(function (node) {\n            if (node.item3 > 0) {\n              node.item3 -= deltaY;\n            }\n          });\n        }\n      });\n    }\n  },\n  updateFrameCurveSteps: function updateFrameCurveSteps(_ref5) {\n    var state = _ref5.state;\n\n    var defaultFrameStep = state.storyConfig.frameStep;\n    var defaultCurveStep = state.storyConfig.curveStep;\n    var length = state.sessionTable[0].length;\n    state.frameSteps = Array.apply(null, { length: length }).map(function (v, i) {\n      return defaultFrameStep;\n    });\n    state.curveSteps = Array.apply(null, { length: length }).map(function (v, i) {\n      return defaultCurveStep;\n    });\n  },\n\n\n  // TODO: update y-scale\n  updateStorySize: function updateStorySize(_ref6) {\n    var state = _ref6.state;\n\n    var compensateScale = 0.6;\n    // generate x-scale factor\n    var storyLength = 0;\n    state.frameSteps.forEach(function (v) {\n      storyLength += v;\n    });\n    state.curveSteps.forEach(function (v) {\n      storyLength += v;\n    });\n    state.storyConfig.xScaleFactor = compensateScale * (state.storyConfig.canvasW - state.storyConfig.paddingLeft - state.storyConfig.paddingRight) / storyLength;\n  },\n  updateFrameTable: function updateFrameTable(_ref7) {\n    var state = _ref7.state;\n\n    var storylines = state.storylines;\n    var frameCount = state.sessionTable[0].length;\n    var characterCount = state.sessionTable.length;\n    var tmpFrameTable = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n    for (var frame = 0; frame < frameCount; frame++) {\n      var lBound = 1e4;\n      var rBound = 0;\n      var lIndex = 2 * frame;\n      var rIndex = lIndex + 1;\n      for (var character = 0; character < characterCount; character++) {\n        var tmpLBound = storylines[character].points[lIndex].x;\n        var tmpRBound = storylines[character].points[rIndex].x;\n        lBound = lBound < tmpLBound ? lBound : tmpLBound;\n        rBound = rBound > tmpRBound ? rBound : tmpRBound;\n      }\n      tmpFrameTable.set(frame, [lBound, rBound]);\n    }\n    // let frameTable = state.frameTable\n    for (var _frame = 0; _frame < frameCount; _frame++) {\n      var currBound = tmpFrameTable.get(_frame);\n      var _lBound = -1;\n      var _rBound = -1;\n      if (_frame === 0) {\n        var nextBound = tmpFrameTable.get(_frame + 1);\n        _lBound = currBound[0];\n        _rBound = (currBound[1] + nextBound[0]) / 2;\n      } else if (_frame === frameCount - 1) {\n        var lastBound = tmpFrameTable.get(_frame - 1);\n        _lBound = (currBound[0] + lastBound[1]) / 2;\n        _rBound = currBound[1];\n      } else {\n        var _lastBound = tmpFrameTable.get(_frame - 1);\n        var _nextBound = tmpFrameTable.get(_frame + 1);\n        _lBound = (currBound[0] + _lastBound[1]) / 2;\n        _rBound = (currBound[1] + _nextBound[0]) / 2;\n      }\n      state.frameTable.set(_frame, [_lBound, _rBound]);\n    }\n  },\n  updateCharacterTable: function updateCharacterTable(_ref8) {\n    var state = _ref8.state;\n\n    var data = state.rawStorylines;\n    var yScaleFactor = state.storyConfig.yScaleFactor;\n    var yBaseline = state.storyConfig.paddingTop;\n    for (var frame = 0, len = data[0].points.length; frame < len; frame++) {\n      state.characterTable.set(frame, new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a());\n    }\n    // according to rawStorylines\n    for (var id = 0, _len = data.length; id < _len; id++) {\n      for (var _frame2 = 0, _len2 = data[id].points.length; _frame2 < _len2; _frame2++) {\n        var tmpMap = state.characterTable.get(_frame2);\n        var tmpY = data[id].points[_frame2].item3;\n        // console.log(id, frame, tmpY)\n        if (tmpY > 0) {\n          tmpY = data[id].points[_frame2].item3 * yScaleFactor + yBaseline;\n          tmpMap.set(id, tmpY);\n        }\n      }\n    }\n  },\n  orderStoryline: function orderStoryline(_ref9, characterId) {\n    var state = _ref9.state,\n        dispatch = _ref9.dispatch;\n\n    if (characterId < state.sessionTable.length - 1) {\n      var constraints = [];\n      var characterYMap = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n      state.storylines.forEach(function (storyline) {\n        // characterYMap.set(storyline.characterId, storyline.points[0].y)\n        for (var i = 0, len = storyline.points.length; i < len; i++) {\n          var tmpY = storyline.points[i].y;\n          if (tmpY > -10000) {\n            characterYMap.set(storyline.characterId, tmpY);\n            break;\n          }\n        }\n      });\n      var focusCharacterY = characterYMap.get(characterId);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(characterYMap), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref10 = _step.value;\n\n          var _ref11 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref10, 2);\n\n          var id = _ref11[0];\n          var y = _ref11[1];\n\n          if (id === characterId || id === state.sessionTable.length - 1) {\n            continue;\n          }\n          if (y > focusCharacterY) {\n            constraints.push([characterId, id]);\n          } else if (y >= 0) {\n            constraints.push([id, characterId]);\n          } else {\n            constraints.push([characterId, id]);\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      var oldOrders = state.request.orders;\n      var newOrders = constraints;\n      state.request.orders = updateOrders(oldOrders, newOrders);\n    }\n    dispatch('updateStoryline');\n  },\n  orderSession: function orderSession(_ref12, obj) {\n    var state = _ref12.state,\n        dispatch = _ref12.dispatch;\n\n    var flag = true;\n    state.request.orderTable.forEach(function (item) {\n      if (item.item1 === obj.frame) {\n        // debugger\n        item.item2 = obj.order;\n        flag = false;\n      }\n    });\n    if (flag) {\n      state.request.orderTable.push({\n        'item1': obj.frame,\n        'item2': obj.order\n      });\n    }\n    dispatch('updateStoryline');\n  },\n\n\n  // deleteSession ({ state, dispatch }, bound) {\n  //   let x1 = bound.x1\n  //   let y1 = bound.y1\n  //   let x2 = bound.x2\n  //   let y2 = bound.y2\n  //   // debugger\n  //   let emphasizeSelector = new EmphasizeSelector(state.storylines, state.frameTable, state.characterTable, state.sessionTable)\n  //   emphasizeSelector.initRedSelector(x1, x2, y1, y2)\n  //   emphasizeSelector.initGreenSelector(x1, x2, y1, y2)\n  //   let result = emphasizeSelector.buildCharacterYConstraints()\n  //   let selectedSessionDict = {}\n  //   let selectedSessionList = []\n  //   result.forEach(item => {\n  //     let characterId = item.characterId\n  //     let frame = item.frame\n  //     let session = state.sessionTable[characterId][frame]\n  //     selectedSessionDict[session] = 1\n  //   })\n  //   for (var session in selectedSessionDict) {\n  //     selectedSessionList.push(parseInt(session))\n  //   }\n  //   state.request.selectedSessions = selectedSessionList\n  //   dispatch('updateStoryline')\n  // },\n\n  reshapeCharacters: function reshapeCharacters(_ref13, targetPath) {\n    var state = _ref13.state,\n        dispatch = _ref13.dispatch;\n\n    var characters = state.selectedCharacters;\n    var len = targetPath.length;\n    if (characters.length > 0 && len > 0) {\n      state.storylinesBak = __WEBPACK_IMPORTED_MODULE_11_lodash__[\"cloneDeep\"](state.storylines);\n      var pathReshaper = new __WEBPACK_IMPORTED_MODULE_10__types_PathReshaper__[\"a\" /* PathReshaper */](state.storylines, state.sessionTable, state.frameTable, state.storyConfig, targetPath);\n      pathReshaper.reshapeCharacters(characters);\n    }\n  },\n  cancelReshape: function cancelReshape(_ref14) {\n    var state = _ref14.state;\n\n    if (state.storylinesBak.length > 0) {\n      state.storylines.forEach(function (storyline, i) {\n        var orgPoints = storyline.points;\n        var copyPoints = state.storylinesBak[i].points;\n        orgPoints.forEach(function (point, j) {\n          point.y = copyPoints[j].y;\n          point.isOptimized = copyPoints[j].isOptimized;\n        });\n      });\n    }\n  },\n  selectFrames: function selectFrames(_ref15, select) {\n    var state = _ref15.state,\n        dispatch = _ref15.dispatch;\n\n    if (state.selectedCharacters.length > 0) {\n      state.selectedFrames = [];\n      // debugger\n      var selector = new __WEBPACK_IMPORTED_MODULE_9__types_Selector__[\"e\" /* StorySelector */](state.frameTable, state.sessionTable, state.characterTable);\n      var sPoints = select.sPoints;\n      var ePoints = select.ePoints;\n      var linesNum = select.linesNum;\n      for (var i = 0; i < linesNum; i++) {\n        var tmpSFrame = selector.matchFrame(sPoints[i].x, sPoints[i].y);\n        var tmpEFrame = selector.matchFrame(ePoints[i].x, ePoints[i].y);\n        if (tmpSFrame > -1 && tmpEFrame > -1) {\n          state.selectedFrames.push([tmpSFrame, tmpEFrame]);\n        }\n      }\n    }\n  },\n\n\n  // groupCharacters ({ state, dispatch }, select) {\n  //   let groupedCharactersDict = {}\n  //   let groupedCharactersList = []\n  //   let sPoints = select.sPoints\n  //   let ePoints = select.ePoints\n  //   let len = select.linesNum\n  //   let emphasizeSelector = new EmphasizeSelector(state.storylines, state.frameTable, state.characterTable, state.sessionTable)\n  //   for (let i = 0; i < len; i++) {\n  //     let x1 = sPoints[i].x\n  //     let y1 = sPoints[i].y\n  //     let x2 = ePoints[i].x\n  //     let y2 = ePoints[i].y\n  //     emphasizeSelector.initRedSelector(x1, x2, y1, y2)\n  //     emphasizeSelector.initGreenSelector(x1, x2, y1, y2)\n  //     let result = emphasizeSelector.buildCharacterYConstraints()\n  //     result.forEach(item => {\n  //       groupedCharactersDict[item.characterId] = item.frame\n  //     })\n  //     for (let character in groupedCharactersDict) {\n  //       groupedCharactersList.push(parseInt(character))\n  //     }\n  //   }\n  //   // debugger\n  //   state.request.groupIds = groupedCharactersList\n  //   dispatch('updateStoryline')\n  // },\n\n  straightenCharacter: function straightenCharacter(_ref16, select) {\n    var state = _ref16.state,\n        dispatch = _ref16.dispatch;\n\n    if (state.focusCharacters.length > 0) {\n      var selector = new __WEBPACK_IMPORTED_MODULE_9__types_Selector__[\"e\" /* StorySelector */](state.frameTable, state.sessionTable, state.characterTable);\n      var characters = state.focusCharacters;\n      var sPoints = select.sPoints;\n      var ePoints = select.ePoints;\n      var linesNum = select.linesNum;\n\n      var _loop = function _loop(i) {\n        var tmpSFrame = selector.matchFrame(sPoints[i].x, sPoints[i].y);\n        var tmpEFrame = selector.matchFrame(ePoints[i].x, ePoints[i].y);\n        var length = tmpEFrame - tmpSFrame + 1;\n        var tmpArr = Array.apply(null, { length: length }).map(function (v, i) {\n          return tmpSFrame++;\n        });\n        var oldArr = state.request.majorCharacters;\n        characters.forEach(function (character) {\n          updateMajorCharacters(oldArr, character, tmpArr);\n        });\n      };\n\n      for (var i = 0; i < linesNum; i++) {\n        _loop(i);\n      }\n      dispatch('updateStoryline');\n      state.focusCharacters = [];\n    } else {\n      dispatch('breakSession', select);\n    }\n  },\n  breakSession: function breakSession(_ref17, select) {\n    var state = _ref17.state,\n        dispatch = _ref17.dispatch;\n\n    var selector = new __WEBPACK_IMPORTED_MODULE_9__types_Selector__[\"e\" /* StorySelector */](state.frameTable, state.sessionTable, state.characterTable);\n    var sPoints = select.sPoints;\n    var ePoints = select.ePoints;\n    var linesNum = select.linesNum;\n    var sessionTable = state.sessionTable;\n    var sessionBreaks = [];\n    var newOuterGaps = [];\n    for (var i = 0; i < linesNum; i++) {\n      var frame = selector.matchFrame(sPoints[i].x, sPoints[i].y);\n      if (frame > -1) {\n        var character = selector.matchCharacterR(frame, sPoints[i].y);\n        if (character > -1) {\n          var session = sessionTable[character][frame];\n          var lastSession = session;\n          var frameBak = frame;\n          while (frame > -1 && lastSession === session) {\n            lastSession = sessionTable[character][--frame];\n          }\n          lastSession = frame === -1 ? session : lastSession;\n          frame = frame === -1 ? frameBak - 1 : frame;\n          var upperSession = findUpperSession(frame + 1, session, state.rawStorylines, sessionTable);\n          if (frame > -1 && upperSession > -1) {\n            sessionBreaks.push({\n              'session1': lastSession,\n              'session2': session,\n              'frame': frame\n            });\n            var deltaY = ePoints[i].y > sPoints[i].y ? (ePoints[i].y - sPoints[i].y) * 1.2 : 20;\n            // let deltaY = ePoints[i].y > sPoints[i].y ? 220 : 20\n            newOuterGaps.push({\n              'item1': {\n                'item1': session,\n                'item2': upperSession\n              },\n              'item2': {\n                'item1': deltaY,\n                'item2': -1\n              }\n            });\n          }\n        }\n      }\n    }\n    var oldSessionBreaks = state.request.sessionBreaks;\n    state.request.sessionBreaks = updateSessionBreaks(oldSessionBreaks, sessionBreaks);\n    // let oldOuterGaps = state.request.sessionOuterGaps\n    // state.request.sessionOuterGaps = updateOuterGaps(oldOuterGaps, newOuterGaps)\n    if (sessionBreaks.length > 0) {\n      dispatch('updateStoryline');\n    }\n  },\n  brushingCharacter: function brushingCharacter(_ref18, select) {\n    var state = _ref18.state,\n        dispatch = _ref18.dispatch;\n\n    state.dashRangeMap = [];\n    if (state.selectedCharacters.length > 0) {\n      var sPoints = select.sPoints;\n      var ePoints = select.ePoints;\n      var linesNum = select.linesNum;\n      for (var i = 0; i < linesNum; i++) {\n        state.dashRangeMap.push([sPoints[i].x, ePoints[i].x]);\n      }\n    }\n  },\n  twineCharacters: function twineCharacters(_ref19, select) {\n    var state = _ref19.state,\n        commit = _ref19.commit,\n        dispatch = _ref19.dispatch;\n\n    console.log('twine');\n    var twineRange = [500, 10000];\n    var twineCharacters = [2, 3];\n    var storylines = [state.storylines[twineCharacters[0]], state.storylines[twineCharacters[1]]];\n\n    var copy0 = storylines[0].points.slice();\n    var copy1 = storylines[1].points.slice();\n    copy0.forEach(function (p, i, a) {\n      if (twineRange[0] < p.x && p.x < twineRange[1] && (i % 4 === 0 || i % 4 === 1)) {\n        var t = copy1[i];\n        copy1[i] = p;\n        a[i] = t;\n      }\n    });\n    storylines[0].points = copy0;\n    storylines[1].points = copy1;\n    storylines.forEach(function (storyline) {\n      var id = state.storylineTable.get(storyline.name);\n      commit(__WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"C\" /* UPDATE_STORYLINE */], { id: id, nodes: storyline.points });\n    });\n  },\n  scaleSession: function scaleSession(_ref20, select) {\n    var state = _ref20.state,\n        dispatch = _ref20.dispatch;\n\n    var sPoint = select.sPoints[0];\n    var ePoint = select.ePoints[0];\n    var deltaX = Math.abs(sPoint.x - ePoint.x);\n    var deltaY = Math.abs(sPoint.y - ePoint.y);\n    if (deltaX < deltaY) {\n      dispatch('scaleSessionVertical', select);\n    } else {\n      dispatch('scaleSessionHorizontal', select);\n    }\n  },\n  scaleSessionVertical: function scaleSessionVertical(_ref21, select) {\n    var state = _ref21.state,\n        dispatch = _ref21.dispatch;\n\n    var sPoints = select.sPoints;\n    var ePoints = select.ePoints;\n    var linesNum = select.linesNum;\n    // debugger\n    if (linesNum === 2) {\n      var emphasizeSelector = new __WEBPACK_IMPORTED_MODULE_9__types_Selector__[\"a\" /* EmphasizeSelector */](state.rawStorylines, state.frameTable, state.sessionTable, state.characterTable, state.request, state.storyConfig);\n      var result = emphasizeSelector.buildSessionConstraints(sPoints, ePoints);\n      if (sPoints[0].y > ePoints[0].y) {\n        var oldInnerGaps = state.request.sessionInnerGaps;\n        var newInnerGaps = result.sessionInnerGaps;\n        state.request.sessionInnerGaps = updateInnerGaps(oldInnerGaps, newInnerGaps);\n        console.log('vertical scale innergap');\n        dispatch('updateStoryline');\n      } else if (sPoints[0].y < ePoints[0].y) {\n        var oldOuterGaps = state.request.sessionOuterGaps;\n        var newOuterGaps = result.sessionOuterGaps;\n        state.request.sessionOuterGaps = updateOuterGaps(oldOuterGaps, newOuterGaps);\n        console.log('vertical scale outergap');\n        dispatch('updateStoryline');\n      }\n    }\n  },\n  scaleSessionHorizontal: function scaleSessionHorizontal(_ref22, select) {\n    var state = _ref22.state,\n        dispatch = _ref22.dispatch,\n        commit = _ref22.commit;\n\n    var frameScaler = new __WEBPACK_IMPORTED_MODULE_9__types_Selector__[\"b\" /* FrameScaler */](state.frameTable, state.sessionTable, state.characterTable, state.frameSteps, state.curveSteps);\n    var sPoints = select.sPoints;\n    var ePoints = select.ePoints;\n    frameScaler.scale(sPoints, ePoints);\n    dispatch('updateStorySize');\n    var storyLoader = new __WEBPACK_IMPORTED_MODULE_8__types_StoryLoader__[\"a\" /* StoryLoader */](state.rawStorylines, state.sessionTable, state.frameSteps, state.curveSteps, state.storyConfig);\n    state.storylines = storyLoader.generateStorylines();\n    dispatch('updateFrameTable');\n    // update visual objects\n    state.storylines.forEach(function (storyline) {\n      var id = state.storylineTable.get(storyline.name);\n      commit(__WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"C\" /* UPDATE_STORYLINE */], { id: id, nodes: storyline.points });\n    });\n  }\n}, __WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"A\" /* UNDO */], function (_ref23) {\n  var state = _ref23.state,\n      dispatch = _ref23.dispatch,\n      commit = _ref23.commit;\n\n  if (state.history.length > 0) {\n    var last = state.history[state.history.length - 1];\n    state.storylines = last.storylines;\n    state.storylines.forEach(function (storyline) {\n      var id = state.storylineTable.get(storyline.name);\n      commit(__WEBPACK_IMPORTED_MODULE_6__MutationTypes__[\"C\" /* UPDATE_STORYLINE */], { id: id, nodes: storyline.points });\n    });\n    state.request = last.request;\n    state.history.splice(-1, 1);\n  }\n});\n\nfunction updateMajorCharacters(oldArr, character, arr) {\n  var flag = true;\n  oldArr.forEach(function (item) {\n    if (item.item1 === character) {\n      item.item2 = arr;\n      flag = false;\n    }\n  });\n  if (flag) {\n    oldArr.push({\n      item1: character,\n      item2: arr\n    });\n  }\n}\n\nfunction findUpperSession(frame, session, rawStorylines, sessionTable) {\n  var charactersY = [];\n  for (var id = 0, len = rawStorylines.length; id < len; id++) {\n    var yPos = rawStorylines[id].points[frame].item3;\n    if (yPos > 0) {\n      charactersY.push({\n        id: id,\n        yPos: yPos\n      });\n    }\n  }\n  // sort characters from bottom to top\n  charactersY.sort(function (a, b) {\n    return b.yPos - a.yPos;\n  });\n  var upperSession = -1;\n  for (var i = 0, _len3 = charactersY.length; i < _len3; i++) {\n    var characterId = charactersY[i].id;\n    var tmpSession = sessionTable[characterId][frame];\n    if (tmpSession === session && i < _len3 - 1) {\n      upperSession = sessionTable[charactersY[i + 1].id][frame];\n    }\n  }\n  return upperSession === session ? 9999 : upperSession;\n}\n\nfunction updateInnerGaps(oldArr, newArr) {\n  var sessionMap = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n  var sessionArr = [];\n  oldArr.forEach(function (session) {\n    sessionMap.set(session.item1, session.item2);\n  });\n  newArr.forEach(function (session) {\n    sessionMap.set(session.item1, session.item2);\n  });\n  var _iteratorNormalCompletion2 = true;\n  var _didIteratorError2 = false;\n  var _iteratorError2 = undefined;\n\n  try {\n    for (var _iterator2 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(sessionMap), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n      var _ref24 = _step2.value;\n\n      var _ref25 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref24, 2);\n\n      var sessionId = _ref25[0];\n      var gap = _ref25[1];\n\n      sessionArr.push({\n        item1: sessionId,\n        item2: gap\n      });\n    }\n  } catch (err) {\n    _didIteratorError2 = true;\n    _iteratorError2 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion2 && _iterator2.return) {\n        _iterator2.return();\n      }\n    } finally {\n      if (_didIteratorError2) {\n        throw _iteratorError2;\n      }\n    }\n  }\n\n  return sessionArr;\n}\n\nfunction updateOuterGaps(oldArr, newArr) {\n  var sessionMap = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n  var sessionArr = [];\n  // let sessionOuterGap = 54\n  oldArr.forEach(function (pair) {\n    var sItem = pair.item1.item1 < pair.item1.item2 ? pair.item1.item1 : pair.item1.item2;\n    var eItem = pair.item1.item1 > pair.item1.item2 ? pair.item1.item1 : pair.item1.item2;\n    if (eItem > sItem) {\n      if (!sessionMap.has(sItem)) {\n        sessionMap.set(sItem, new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a());\n      }\n      var subMap = sessionMap.get(sItem);\n      subMap.set(eItem, pair.item2);\n    }\n  });\n  newArr.forEach(function (pair) {\n    var sItem = pair.item1.item1 < pair.item1.item2 ? pair.item1.item1 : pair.item1.item2;\n    var eItem = pair.item1.item1 > pair.item1.item2 ? pair.item1.item1 : pair.item1.item2;\n    if (eItem > sItem) {\n      if (!sessionMap.has(sItem)) {\n        sessionMap.set(sItem, new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a());\n      }\n      var subMap = sessionMap.get(sItem);\n      if (subMap.has(eItem)) {\n        // let scaleFactor = oldArr.length > 0 ? pair.item2.item1 / sessionOuterGap : 1\n        // let oldPair = subMap.get(eItem)\n        subMap.set(eItem, {\n          // 'item1': oldPair.item1 * scaleFactor,\n          // 'item2': oldPair.item1 * scaleFactor + 30\n          'item1': pair.item2.item1,\n          'item2': -1\n        });\n      } else {\n        subMap.set(eItem, pair.item2);\n      }\n    }\n  });\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(sessionMap), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var _ref26 = _step3.value;\n\n      var _ref27 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref26, 2);\n\n      var session1 = _ref27[0];\n      var subMap = _ref27[1];\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(subMap), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var _ref28 = _step4.value;\n\n          var _ref29 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref28, 2);\n\n          var session2 = _ref29[0];\n          var gap = _ref29[1];\n\n          sessionArr.push({\n            item1: {\n              item1: session1,\n              item2: session2\n            },\n            item2: gap\n          });\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return sessionArr;\n}\n\nfunction updateOrders(oldArr, newArr) {\n  var ordersMap = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n  var ordersArr = [];\n  oldArr.forEach(function (order) {\n    if (!ordersMap.has(order[0])) {\n      ordersMap.set(order[0], new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a());\n    }\n    var subMap = ordersMap.get(order[0]);\n    subMap.set(order[1], 1);\n  });\n  newArr.forEach(function (order) {\n    // remove conflict order\n    if (ordersMap.has(order[1])) {\n      var _subMap = ordersMap.get(order[1]);\n      if (_subMap.has(order[0])) {\n        _subMap.set(order[0], 0);\n      }\n    }\n    if (!ordersMap.has(order[0])) {\n      ordersMap.set(order[0], new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a());\n    }\n    var subMap = ordersMap.get(order[0]);\n    subMap.set(order[1], 1);\n  });\n  var _iteratorNormalCompletion5 = true;\n  var _didIteratorError5 = false;\n  var _iteratorError5 = undefined;\n\n  try {\n    for (var _iterator5 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(ordersMap), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n      var _ref30 = _step5.value;\n\n      var _ref31 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref30, 2);\n\n      var sId = _ref31[0];\n      var subMap = _ref31[1];\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(subMap), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var _ref32 = _step6.value;\n\n          var _ref33 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref32, 2);\n\n          var eId = _ref33[0];\n          var flag = _ref33[1];\n\n          if (flag === 1 && sId !== eId) {\n            ordersArr.push([sId, eId]);\n          }\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError5 = true;\n    _iteratorError5 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion5 && _iterator5.return) {\n        _iterator5.return();\n      }\n    } finally {\n      if (_didIteratorError5) {\n        throw _iteratorError5;\n      }\n    }\n  }\n\n  return ordersArr;\n}\n\nfunction updateSessionBreaks(oldArr, newArr) {\n  var updatedArr = [];\n  var existingBreakMap = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n  oldArr.forEach(function (item) {\n    var frame = item.frame;\n    var session1 = item.session1;\n    var session2 = item.session2;\n    if (existingBreakMap.has(frame)) {\n      var tmpMap = existingBreakMap.get(frame);\n      tmpMap.set(session1, session2);\n    } else {\n      var _tmpMap = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n      _tmpMap.set(session1, session2);\n      existingBreakMap.set(frame, _tmpMap);\n    }\n  });\n  newArr.forEach(function (item) {\n    var frame = item.frame;\n    var session1 = item.session1;\n    var session2 = item.session2;\n    if (existingBreakMap.has(frame)) {\n      var tmpMap = existingBreakMap.get(frame);\n      tmpMap.set(session1, session2);\n    } else {\n      var _tmpMap2 = new __WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_map___default.a();\n      _tmpMap2.set(session1, session2);\n      existingBreakMap.set(frame, _tmpMap2);\n    }\n  });\n  var _iteratorNormalCompletion7 = true;\n  var _didIteratorError7 = false;\n  var _iteratorError7 = undefined;\n\n  try {\n    for (var _iterator7 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(existingBreakMap), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n      var _ref34 = _step7.value;\n\n      var _ref35 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref34, 2);\n\n      var frame = _ref35[0];\n      var item = _ref35[1];\n      var _iteratorNormalCompletion8 = true;\n      var _didIteratorError8 = false;\n      var _iteratorError8 = undefined;\n\n      try {\n        for (var _iterator8 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(item), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n          var _ref36 = _step8.value;\n\n          var _ref37 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_ref36, 2);\n\n          var session1 = _ref37[0];\n          var session2 = _ref37[1];\n\n          updatedArr.push({\n            'frame': frame,\n            'session1': session1,\n            'session2': session2\n          });\n        }\n      } catch (err) {\n        _didIteratorError8 = true;\n        _iteratorError8 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion8 && _iterator8.return) {\n            _iterator8.return();\n          }\n        } finally {\n          if (_didIteratorError8) {\n            throw _iteratorError8;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError7 = true;\n    _iteratorError7 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion7 && _iterator7.return) {\n        _iterator7.return();\n      }\n    } finally {\n      if (_didIteratorError7) {\n        throw _iteratorError7;\n      }\n    }\n  }\n\n  return updatedArr;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__ = __webpack_require__(\"xJD8\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_a1ac8c8c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"GBS+\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Naw1\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_App_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_a1ac8c8c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"MIrv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TreePanel_vue__ = __webpack_require__(\"B4Sq\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_65897df7_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TreePanel_vue__ = __webpack_require__(\"Gc5s\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"tS/o\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TreePanel_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_65897df7_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TreePanel_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"Mcgq\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ContextMenu',\n\n  props: ['recordX', 'recordY', 'scrollX', 'scrollY'],\n\n  data: function data() {\n    return {\n      states: ['Hide', 'Scale', 'Reshape', 'Copy',\n      // 'Cut',\n      'Paste', 'Group', 'Ungroup', 'Cancel']\n    };\n  },\n\n\n  computed: {\n    position: function position() {\n      return {\n        top: this.recordY + 'px',\n        left: this.recordX + 'px'\n      };\n    }\n  },\n\n  methods: {\n    handleClick: function handleClick(state) {\n      switch (state) {\n        case 'Reshape':\n          this.$store.dispatch('reshapeFocusObject');\n          break;\n        case 'Scale':\n          this.$store.dispatch('scaleFocusObject');\n          break;\n        case 'Hide':\n          this.$store.dispatch('hideFocusObject');\n          break;\n        case 'Cancel':\n          this.$store.dispatch('cancelFocusObject');\n          break;\n        case 'Copy':\n          this.$store.dispatch('copyFocusObject');\n          break;\n        case 'Paste':\n          this.$store.dispatch('pasteFocusObject', {\n            x: this.recordX + this.scrollX,\n            y: this.recordY + this.scrollY\n          });\n          break;\n        case 'Cut':\n          this.$store.dispatch('cutFocusObject');\n          break;\n        case 'Group':\n          this.$store.dispatch('groupObjects');\n          break;\n        default:\n          break;\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store__ = __webpack_require__(\"IcnI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_vue_awesome_icons_arrows__ = __webpack_require__(\"W7Cb\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vue_awesome_icons_pencil__ = __webpack_require__(\"Xd4/\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_vue_awesome_icons_send__ = __webpack_require__(\"3Uos\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_vue_awesome_icons_square_o__ = __webpack_require__(\"j4GK\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_vue_awesome_icons_text_width__ = __webpack_require__(\"6Wiw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_vue_awesome_icons_rotate_right__ = __webpack_require__(\"S0TK\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_vue_awesome_icons_rotate_left__ = __webpack_require__(\"vASM\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_vue_awesome_icons_file_text__ = __webpack_require__(\"0My8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_vue_awesome_icons_file_image_o__ = __webpack_require__(\"g0T0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_vue_awesome_icons_square__ = __webpack_require__(\"2PPF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_vue_awesome_icons_sliders__ = __webpack_require__(\"t+cJ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_vue_awesome_icons_bold__ = __webpack_require__(\"LjeE\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15_vue_awesome_icons_italic__ = __webpack_require__(\"B8Lx\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_vue_awesome_icons_font__ = __webpack_require__(\"nhyU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17_vue_awesome_icons_text_height__ = __webpack_require__(\"aH8d\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18_vue_awesome_icons_map__ = __webpack_require__(\"3fLA\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19_vue_awesome_icons_navicon__ = __webpack_require__(\"r8MY\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20_vue_awesome_icons_plus__ = __webpack_require__(\"rcsw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21_vue_awesome_icons_save__ = __webpack_require__(\"g+VN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22_vue_awesome_components_Icon__ = __webpack_require__(\"D4uH\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__components_panelbar_panels_TreePanel_TreeNode__ = __webpack_require__(\"EnH0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__components_utils_ToolSlider__ = __webpack_require__(\"E7qz\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__fortawesome_vue_fontawesome__ = __webpack_require__(\"U0v6\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__fortawesome_vue_fontawesome___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_25__fortawesome_vue_fontawesome__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26_v_tooltip__ = __webpack_require__(\"VN6J\");\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n// Icon List\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].directive('tooltip', __WEBPACK_IMPORTED_MODULE_26_v_tooltip__[\"c\" /* VTooltip */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].directive('close-popover', __WEBPACK_IMPORTED_MODULE_26_v_tooltip__[\"a\" /* VClosePopover */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('v-popover', __WEBPACK_IMPORTED_MODULE_26_v_tooltip__[\"b\" /* VPopover */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('icon', __WEBPACK_IMPORTED_MODULE_22_vue_awesome_components_Icon__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('tree-node', __WEBPACK_IMPORTED_MODULE_23__components_panelbar_panels_TreePanel_TreeNode__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('tool-slider', __WEBPACK_IMPORTED_MODULE_24__components_utils_ToolSlider__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('font-awesome-icon', __WEBPACK_IMPORTED_MODULE_25__fortawesome_vue_fontawesome___default.a);\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  store: __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */], Icon: __WEBPACK_IMPORTED_MODULE_22_vue_awesome_components_Icon__[\"a\" /* default */] }\n});\n\n/***/ }),\n\n/***/ \"NZGm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SidePanelBar_vue__ = __webpack_require__(\"9iOO\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1bd8595a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SidePanelBar_vue__ = __webpack_require__(\"24zk\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"kcJT\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SidePanelBar_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1bd8595a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SidePanelBar_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"Naw1\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"O0jz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{class:_vm.klass,style:(_vm.style),attrs:{\"version\":\"1.1\",\"role\":_vm.label ? 'img' : 'presentation',\"aria-label\":_vm.label,\"x\":_vm.x,\"y\":_vm.y,\"width\":_vm.width,\"height\":_vm.height,\"viewBox\":_vm.box}},[_vm._t(\"default\",[(_vm.icon && _vm.icon.paths)?_vm._l((_vm.icon.paths),function(path,i){return _c('path',_vm._b({key:(\"path-\" + i)},'path',path,false))}):_vm._e(),_vm._v(\" \"),(_vm.icon && _vm.icon.polygons)?_vm._l((_vm.icon.polygons),function(polygon,i){return _c('polygon',_vm._b({key:(\"polygon-\" + i)},'polygon',polygon,false))}):_vm._e(),_vm._v(\" \"),(_vm.icon && _vm.icon.raw)?[_c('g',{domProps:{\"innerHTML\":_vm._s(_vm.raw)}})]:_vm._e()])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"O1zv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Pentagon_vue__ = __webpack_require__(\"flRY\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5dd72131_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Pentagon_vue__ = __webpack_require__(\"Ap5A\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Pentagon_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5dd72131_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Pentagon_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"O6Ek\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SplineTwister; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__ = __webpack_require__(\"BO1k\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__ = __webpack_require__(\"d7EF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__);\n\n\n\n\nvar UP = -1;\nvar DOWN = 1;\nvar SAME = 0;\n\nvar SplineTwister = function () {\n  function SplineTwister(data, sessionTable, storyConfig) {\n    __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this, SplineTwister);\n\n    this.data = data;\n    this.sessionTable = sessionTable;\n    this.storyConfig = storyConfig;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(SplineTwister, [{\n    key: \"twist\",\n    value: function twist(unit) {\n      var _this = this;\n\n      if (!this.validateData()) {\n        console.error(\"invalid input data\");\n      }\n\n      var maxOffset = 0;\n      var data = this.data;\n\n      var sessionTable = this.sessionTable;\n\n      var timeframeCount = this.data[0].points.length / 2;\n      var characterCount = this.data.length;\n\n      var characterByOrders = [];\n      for (var timeframe = 0; timeframe < timeframeCount; timeframe++) {\n        var right = timeframe * 2 + 1;\n        var characterByOrder = [];\n\n        for (var character = 0; character < characterCount; character++) {\n          characterByOrder.push({\n            character: character,\n            y: data[character].points[right].y\n          });\n        }\n\n        characterByOrder.sort(function (a, b) {\n          return a.y - b.y;\n        });\n        characterByOrders.push(characterByOrder);\n      }\n\n      var acc = 0;\n\n      var _loop = function _loop(_timeframe) {\n        var left = _timeframe * 2; // value on left side may be negative\n        var right = _timeframe * 2 + 1;\n        var nextTimefram = _timeframe + 1;\n        var nextLeft = left + 2;\n        var nextRight = right + 2;\n\n        var characterList = characterByOrders[_timeframe];\n        var nextCharacterList = characterByOrders[_timeframe + 1];\n\n        var upSet = [];\n        var downSet = [];\n        var up = [];\n        var down = [];\n        var previousDirection = SAME;\n        var lastDiff = -1;\n        var lastY = -1;\n        var composation = [];\n        characterList.forEach(function (_ref, i) {\n          var character = _ref.character,\n              y = _ref.y;\n\n          var nextY = data[character].points[nextRight].y;\n\n          var diff = 0;\n          if (y > -1 && nextY > -1) {\n            diff = Math.round(nextY - y);\n          }\n          if (Math.abs(diff) < 0.0001) {\n            // same\n            return;\n          }\n\n          var currentDirection = diff > 0 ? DOWN : UP;\n          if (currentDirection === DOWN) {\n            // down\n            if (previousDirection === UP && up.length > 0) {\n              upSet.push(up);\n              up = [];\n            }\n            if (lastDiff === -1 || lastY === -1) {\n              down.push(character);\n              lastDiff = diff;\n            } else if (Math.abs(lastDiff - diff) < 100 && Math.abs(y - lastY) < 100) {\n              down.push(character);\n            } else {\n              downSet.push(down);\n              down = [character];\n              lastDiff = diff;\n            }\n            previousDirection = DOWN;\n          } else {\n            // up\n            if (previousDirection === DOWN && down.length > 0) {\n              downSet.push(down);\n              down = [];\n            }\n            if (lastDiff === -1 || lastY === -1) {\n              up.push(character);\n              lastDiff = diff;\n            } else if (Math.abs(lastDiff - diff) < 100 && Math.abs(y - lastY) < 100) {\n              up.push(character);\n            } else {\n              upSet.push(up);\n              up = [character];\n              lastDiff = diff;\n            }\n            up.push(character);\n            previousDirection = UP;\n          }\n          lastY = y;\n        });\n        // if direction never change\n        if (up.length > 0) {\n          upSet.push(up);\n          up = [];\n        }\n        if (down.length > 0) {\n          downSet.push(down);\n          down = [];\n        }\n\n        var _cleanUpDownSet = _this.cleanUpDownSet(upSet, downSet);\n\n        var _cleanUpDownSet2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default()(_cleanUpDownSet, 2);\n\n        upSet = _cleanUpDownSet2[0];\n        downSet = _cleanUpDownSet2[1];\n\n\n        var maxXDiff = 0;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(upSet), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var charactersArray = _step.value;\n\n            maxXDiff = Math.max(SplineTwister.internalTwist(charactersArray, unit, UP, data, right), maxXDiff);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(downSet), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var _charactersArray = _step2.value;\n\n            maxXDiff = Math.max(SplineTwister.internalTwist(_charactersArray, unit, DOWN, data, right), maxXDiff);\n          }\n\n          // for (let charArray of upSet) {\n          //   if (charArray.length === 1) {\n          //     continue\n          //   }\n          //   for (let i = 0; i < charArray.length; i++) {\n          //     data[charArray[i]].points[nextLeft].x -= maxXDiff\n          //   }\n          // }\n\n          // for (let charArray of downSet) {\n          //   if (charArray.length === 1) {\n          //     continue\n          //   }\n          //   for (let i = charArray.lenth - 1; i >= 0; i--) {\n          //     data[charArray[i]].points[nextLeft].x -= maxXDiff\n          //   }\n          // }\n\n          // TOOD: O(n^2) -> O(n)\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(data), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var info = _step3.value;\n\n            for (var i = nextRight; i < info.points.length; i++) {\n              info.points[i].x += maxXDiff;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      };\n\n      for (var _timeframe = 0; _timeframe < timeframeCount - 1; _timeframe++) {\n        _loop(_timeframe);\n      }\n      this.fixWrongPosition(data);\n      this.scalePosition(data);\n    }\n  }, {\n    key: \"fixWrongPosition\",\n    value: function fixWrongPosition(data) {\n      var delta = 20;\n      var rowLen = data.length;\n      var colLen = data[0].points.length;\n      for (var i = 0; i < colLen - 1; i++) {\n        var minDelta = 1000;\n        for (var c = 0; c < rowLen; c++) {\n          var tmpY = data[c].points[i].y;\n          var tmpNextY = data[c].points[i + 1].y;\n          if (tmpY > -1 && tmpNextY > -1) {\n            var tmpDelta = data[c].points[i + 1].x - data[c].points[i].x;\n            minDelta = Math.min(minDelta, tmpDelta);\n          }\n        }\n        if (minDelta < 0) {\n          var moveDistance = -minDelta + delta;\n          // console.log(moveDistance)\n          for (var j = i + 1; j < colLen; j++) {\n            for (var _c = 0; _c < rowLen; _c++) {\n              data[_c].points[j].x += moveDistance;\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"scalePosition\",\n    value: function scalePosition(data) {\n      var n = data[0].points.length - 1;\n      var xMin = data[0].points[0].x;\n      var xMax = 0;\n      for (var k = 0, len = data.length; k < len; k++) {\n        var tmpXMax = data[k].points[n].x;\n        xMax = xMax > tmpXMax ? xMax : tmpXMax;\n      }\n      // debugger\n      var leftBound = this.storyConfig.paddingLeft;\n      var xScaleFactor = (this.storyConfig.canvasW - leftBound - this.storyConfig.paddingRight) / (xMax - xMin);\n      if (xScaleFactor < 1) {\n        // console.log(xScaleFactor)\n        // do scale here\n        data.forEach(function (item) {\n          var storyline = item.points;\n          storyline.forEach(function (point) {\n            point.x *= xScaleFactor;\n          });\n        });\n      }\n    }\n  }, {\n    key: \"cleanUpDownSet\",\n    value: function cleanUpDownSet(upSet, downSet) {\n      var _upSet = [];\n      var _downSet = [];\n      upSet.forEach(function (up) {\n        var tmpUp = [];\n        up.forEach(function (c) {\n          if (tmpUp.indexOf(c) === -1) {\n            tmpUp.push(c);\n          }\n        });\n        _upSet.push(tmpUp);\n      });\n      downSet.forEach(function (down) {\n        var tmpDown = [];\n        down.forEach(function (c) {\n          if (tmpDown.indexOf(c) === -1) {\n            tmpDown.push(c);\n          }\n        });\n        _downSet.push(tmpDown);\n      });\n      return [_upSet, _downSet];\n    }\n  }, {\n    key: \"validateData\",\n    value: function validateData() {\n      var data = this.data;\n      if (!data) {\n        return false;\n      }\n\n      var size = -1;\n\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_get_iterator___default()(data), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var v = _step4.value;\n\n          var currentLength = v.points.length;\n          if (currentLength % 2 !== 0) {\n            return false;\n          }\n          if (size === -1) {\n            size = currentLength;\n          } else {\n            if (currentLength !== size) {\n              return false;\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return true;\n    }\n  }], [{\n    key: \"calculateMoveDistance\",\n    value: function calculateMoveDistance(distance, arc) {\n      return distance * Math.tan(arc / 2);\n    }\n  }, {\n    key: \"internalTwist\",\n    value: function internalTwist(charactersArray, factor, direction, data, right) {\n      var maxXDiff = 0;\n      var nextLeft = right + 1;\n      var nextRight = right + 2;\n      if (direction !== SAME && charactersArray.length > 1) {\n        // up\n        // move latter ones to right\n        var _up = direction === UP;\n        var anchor = _up ? charactersArray[0] : charactersArray[charactersArray.length - 1];\n        var xDiff = data[anchor].points[nextLeft].x - data[anchor].points[right].x;\n\n        // move this right and next left\n        if (_up) {\n          for (var i = 1; i < charactersArray.length; i++) {\n            var c = charactersArray[i];\n            var pc = charactersArray[i - 1];\n            var diff = data[c].points[nextRight].y - data[c].points[right].y;\n            var yDiff = data[c].points[right].y - data[pc].points[right].y;\n            var unitMoveDistance = Math.abs(SplineTwister.calculateMoveDistance(yDiff, Math.atan2(diff, xDiff)));\n            var moveDistance = unitMoveDistance * factor;\n            data[c].points[right].x = data[pc].points[right].x + moveDistance;\n            data[c].points[nextLeft].x = data[pc].points[nextLeft].x + moveDistance;\n            maxXDiff = Math.max(moveDistance, maxXDiff);\n          }\n        } else {\n          for (var _i = charactersArray.length - 2; _i >= 0; _i--) {\n            var _c2 = charactersArray[_i];\n            var _yDiff = data[anchor].points[right].y - data[_c2].points[right].y;\n            var _diff = data[_c2].points[nextRight].y - data[_c2].points[right].y;\n            var _unitMoveDistance = Math.abs(SplineTwister.calculateMoveDistance(_yDiff, Math.atan2(_diff, xDiff)));\n            var _moveDistance = _unitMoveDistance * factor;\n            data[_c2].points[right].x += _moveDistance;\n            data[_c2].points[nextLeft].x += _moveDistance;\n            maxXDiff = Math.max(_moveDistance, maxXDiff);\n          }\n        }\n        // composation for adding x\n      }\n      return maxXDiff;\n    }\n  }]);\n\n  return SplineTwister;\n}();\n\n/***/ }),\n\n/***/ \"O9ke\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__types_CardObject__ = __webpack_require__(\"Wt/O\");\n\n\nvar state = {\n  paintingCardList: [],\n  paintingCardCount: 0\n};\n\nvar getters = {\n  paintingCardCount: function paintingCardCount(state) {\n    return state.paintingCardCount;\n  },\n  paintingCardList: function paintingCardList(state) {\n    return state.paintingCardList;\n  }\n};\n\nvar mutations = {};\n\nvar actions = {\n  addPaintingCard: function addPaintingCard(_ref) {\n    var state = _ref.state;\n\n    var id = state.paintingCardCount++;\n    var card = new __WEBPACK_IMPORTED_MODULE_0__types_CardObject__[\"a\" /* CardObject */](id);\n    state.paintingCardList.push(card);\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n});\n\n/***/ }),\n\n/***/ \"Oky+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Twining'),expression:\"'Twining'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon,\"transform\":\"shrink1.5\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"PCxI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-panel\"},[_c('div',{staticClass:\"font-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.fontSize),expression:\"focusText.fontSize\"}],attrs:{\"type\":\"text\",\"name\":\"fontSize\",\"placeholder\":\"font size\"},domProps:{\"value\":(_vm.focusText.fontSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"fontSize\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"font-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.fontFamily),expression:\"focusText.fontFamily\"}],attrs:{\"type\":\"text\",\"name\":\"fontFamily\",\"placeholder\":\"font family\"},domProps:{\"value\":(_vm.focusText.fontFamily)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"fontFamily\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"font-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.color),expression:\"focusText.color\"}],attrs:{\"type\":\"text\",\"name\":\"textColor\",\"placeholder\":\"text color\"},domProps:{\"value\":(_vm.focusText.color)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"color\", $event.target.value)}}})]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.content),expression:\"focusText.content\"}],attrs:{\"name\":\"textContent\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"insert text content\"},domProps:{\"value\":(_vm.focusText.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"content\", $event.target.value)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"QZzn\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"QsEu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faHandPaper__ = __webpack_require__(\"Y2jX\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faHandPaper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faHandPaper__);\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'BendTool',\n\n  computed: {\n    icon: function icon() {\n      return __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faHandPaper___default.a;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"R/my\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleSelect_vue__ = __webpack_require__(\"3eZz\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_63cb121b_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleSelect_vue__ = __webpack_require__(\"rNQu\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ScaleSelect_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_63cb121b_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ScaleSelect_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"SQ8e\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSpinner__ = __webpack_require__(\"mZf6\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSpinner___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSpinner__);\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'LinkTool',\n\n  computed: {\n    icon: function icon() {\n      return __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faSpinner___default.a;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"Skty\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('rect',{attrs:{\"x\":_vm.node.x-_vm.squareSize/2,\"y\":_vm.node.y-_vm.squareSize/2,\"width\":_vm.squareSize,\"height\":_vm.squareSize,\"fill\":\"white\",\"stroke\":\"black\",\"stroke-width\":\"1\"},on:{\"mousedown\":function($event){return _vm.handleMousedown($event)},\"click\":_vm.handleClick,\"contextmenu\":_vm.handleContextmenu}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"TdY+\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"U02f\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ScaleFrame__ = __webpack_require__(\"9Dxg\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'RotateFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data: function data() {\n    return {\n      sin: 0,\n      cos: 0\n    };\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    }\n  },\n\n  methods: {\n    rotate: function rotate(_ref) {\n      var sin = _ref.sin,\n          cos = _ref.cos;\n\n      this.sin = sin;\n      this.cos = cos;\n      this.object.rotate(sin, cos);\n    }\n  },\n\n  components: {\n    scaleframe: __WEBPACK_IMPORTED_MODULE_0__ScaleFrame__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"Ui19\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"UiOb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Save'),expression:\"'Save'\"}],staticClass:\"save-tool\",on:{\"click\":_vm.handleClick}},[_c('icon',{attrs:{\"name\":\"save\",\"scale\":\"1.5\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Vn2c\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Undo'),expression:\"'Undo'\"}],staticClass:\"undo-tool\",on:{\"click\":_vm.handleClick}},[_c('icon',{attrs:{\"name\":\"rotate-left\",\"scale\":\"1.5\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"W1Js\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Scaling'),expression:\"'Scaling'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"WZ6U\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"workspace\"},on:{\"click\":function($event){return _vm.handleClick($event)},\"contextmenu\":function($event){return _vm.handleContextmenu($event)},\"mousemove\":function($event){return _vm.handleMousemove($event)},\"mousedown\":function($event){return _vm.handleMousedown($event)},\"mouseup\":function($event){return _vm.handleMouseup($event)}}},[_c('div',{staticClass:\"painting\",on:{\"scroll\":_vm.handleScroll}},_vm._l((_vm.paintingCardList),function(card){return _c('svg-card',{key:card.id,attrs:{\"cardObject\":card,\"scrollX\":_vm.paintingScrollX,\"scrollY\":_vm.paintingScrollY,\"mouse\":_vm.mouse}})}),1),_vm._v(\" \"),_c('context-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowContextMenu),expression:\"isShowContextMenu\"}],attrs:{\"scrollX\":_vm.paintingScrollX,\"scrollY\":_vm.paintingScrollY,\"recordX\":_vm.contextMenuPositionX,\"recordY\":_vm.contextMenuPositionY}}),_vm._v(\" \"),_c('color-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingFillColor),expression:\"isUsingFillColor\"}],staticClass:\"fillpicker\",model:{value:(_vm.objectStyle.fill),callback:function ($$v) {_vm.$set(_vm.objectStyle, \"fill\", $$v)},expression:\"objectStyle.fill\"}}),_vm._v(\" \"),_c('color-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingStrokeColor),expression:\"isUsingStrokeColor\"}],staticClass:\"strokepicker\",model:{value:(_vm.objectStyle.stroke),callback:function ($$v) {_vm.$set(_vm.objectStyle, \"stroke\", $$v)},expression:\"objectStyle.stroke\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"Wt/O\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CardObject; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n\n\nvar CardObject = function () {\n  function CardObject(id) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, CardObject);\n\n    this.id = id;\n    this.zIndex = 0;\n    this.geometry = {\n      positionX: 0,\n      positionY: 0,\n      width: 100,\n      height: 100\n    };\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(CardObject, [{\n    key: \"updateID\",\n    value: function updateID(id) {\n      this.id = id;\n    }\n  }, {\n    key: \"updateGeometry\",\n    value: function updateGeometry(x, y, w, h) {\n      this.geometry.positionX = x;\n      this.geometry.positionY = y;\n      this.geometry.width = w;\n      this.geometry.height = h;\n    }\n  }, {\n    key: \"updateZIndex\",\n    value: function updateZIndex(zIndex) {\n      this.zIndex = zIndex;\n    }\n  }, {\n    key: \"ID\",\n    get: function get() {\n      return this.id;\n    }\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this.geometry.width;\n    }\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this.geometry.height;\n    }\n  }, {\n    key: \"positionX\",\n    get: function get() {\n      return this.geometry.positionX;\n    }\n  }, {\n    key: \"positionY\",\n    get: function get() {\n      return this.geometry.positionY;\n    }\n  }, {\n    key: \"depth\",\n    get: function get() {\n      return this.zIndex;\n    }\n  }]);\n\n  return CardObject;\n}();\n\n/***/ }),\n\n/***/ \"X1HP\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"X9oV\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TextObject_vue__ = __webpack_require__(\"3LUW\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f8ed344_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TextObject_vue__ = __webpack_require__(\"pP5b\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Ui19\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TextObject_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0f8ed344_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TextObject_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"XW8H\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.object.type === 'customshape')?_c('customshape',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'storyline')?_c('storyline',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity},on:{\"storylineSelect\":_vm.handleStorylineStyle}}):(_vm.object.type === 'triangle')?_c('triangleg',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'rectangle')?_c('rectangleg',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'pentagon')?_c('pentagong',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'hexagon')?_c('hexagong',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'line')?_c('lineg',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":3,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'echelon')?_c('echelong',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"YRYm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolBox_vue__ = __webpack_require__(\"vqau\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3960e457_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolBox_vue__ = __webpack_require__(\"d5AP\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"01qU\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolBox_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_3960e457_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolBox_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"YfC9\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_OrderTool_vue__ = __webpack_require__(\"5e6B\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_798aca9f_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_OrderTool_vue__ = __webpack_require__(\"GMF1\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_OrderTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_798aca9f_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_OrderTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"Yq7S\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SaveTool_vue__ = __webpack_require__(\"pq9Y\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e1f692d8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SaveTool_vue__ = __webpack_require__(\"UiOb\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"Z3Nt\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_SaveTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e1f692d8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_SaveTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"YrUE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__types_VisualObject__ = __webpack_require__(\"rWw5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__workspace_objects_VisualObject__ = __webpack_require__(\"upPS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ShapePanel',\n\n  data: function data() {\n    return {\n      shapeType: ''\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    fillColor: function fillColor() {\n      return {\n        'background': this.objectStyle.fill.hex\n      };\n    },\n    strokeColor: function strokeColor() {\n      return {\n        'background': this.objectStyle.stroke.hex\n      };\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingFillColor', 'isUsingStrokeColor', 'isUsingPenTool', 'objectStyle', 'focusText'])),\n\n  methods: {\n    handleRectangle: function handleRectangle() {\n      this.insertShape('rectangle');\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n    },\n    handleHexagon: function handleHexagon() {\n      this.insertShape('hexagon');\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n    },\n    handlePentagon: function handlePentagon() {\n      this.insertShape('pentagon');\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n    },\n    handleTriangle: function handleTriangle() {\n      this.insertShape('triangle');\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n    },\n    handleEchelon: function handleEchelon() {\n      this.insertShape('echelon');\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n    },\n    handleLine: function handleLine() {\n      // this.insertShape('line')\n      if (this.isUsingPenTool) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"l\" /* CLOSE_TOOL */], 'PenTool');\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"u\" /* OPEN_TOOL */], 'PenTool');\n      }\n    },\n    insertShape: function insertShape(type) {\n      if (type) {\n        var insertShape = new __WEBPACK_IMPORTED_MODULE_2__types_VisualObject__[\"b\" /* RegularShape */](type);\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"m\" /* INSERT_VISUAL_OBJECT */], insertShape);\n      }\n    },\n    updateOpacity: function updateOpacity(event) {\n      this.objectStyle.opacity = event;\n    },\n    updateStrokeWidth: function updateStrokeWidth(event) {\n      this.objectStyle.strokeWidth = event;\n    },\n    handleFillColor: function handleFillColor() {\n      if (this.isUsingFillColor) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"h\" /* CLOSE_FILL_COLOR */]);\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"q\" /* OPEN_FILL_COLOR */]);\n      }\n    },\n    handleStrokeColor: function handleStrokeColor() {\n      if (this.isUsingStrokeColor) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"j\" /* CLOSE_STROKE_COLOR */]);\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"s\" /* OPEN_STROKE_COLOR */]);\n      }\n    }\n  },\n\n  watch: {\n    isUsingPenTool: function isUsingPenTool(newVal) {\n      if (newVal) {\n        var customShape = new __WEBPACK_IMPORTED_MODULE_2__types_VisualObject__[\"a\" /* CustomShape */]('customshape');\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_4__store_MutationTypes__[\"m\" /* INSERT_VISUAL_OBJECT */], customShape);\n      }\n    }\n  },\n\n  components: {\n    'visual-object': __WEBPACK_IMPORTED_MODULE_3__workspace_objects_VisualObject__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"Z3Nt\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"ZSvP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot__ = __webpack_require__(\"KmDb\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'BezierTool',\n\n  props: ['node', 'mouseX', 'mouseY', 'mousedownCount', 'mouseupCount'],\n\n  data: function data() {\n    return {\n      isBezierNodeDragged: false,\n      isSymmetryBezierNodeDragged: false,\n      xInNodeCoordinate: 0,\n      yInNodeCoordinate: 0,\n      fixedLength: 0,\n      fixedSymmetryLength: 0,\n      deltaX: 0,\n      deltaY: 0\n    };\n  },\n\n\n  methods: {\n    handleMousedownForBezierNode: function handleMousedownForBezierNode() {\n      this.isBezierNodeDragged = true;\n      this.xInNodeCoordinate = this.mouseX - this.node.x2;\n      this.yInNodeCoordinate = this.mouseY - this.node.y2;\n      this.deltaX = this.node.x2 - this.node.x;\n      this.deltaY = this.node.y2 - this.node.y;\n      this.fixedLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(this.deltaX, this.deltaY);\n      var _deltaX = this.node.x3 - this.node.x;\n      var _deltaY = this.node.y3 - this.node.y;\n      this.fixedSymmetryLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(_deltaX, _deltaY);\n    },\n    handleMousedownForSymmetryBezierNode: function handleMousedownForSymmetryBezierNode() {\n      this.isSymmetryBezierNodeDragged = true;\n      this.xInNodeCoordinate = this.mouseX - this.node.x3;\n      this.yInNodeCoordinate = this.mouseY - this.node.y3;\n      this.deltaX = this.node.x3 - this.node.x;\n      this.deltaY = this.node.y3 - this.node.y;\n      this.fixedSymmetryLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(this.deltaX, this.deltaY);\n      var _deltaX = this.node.x2 - this.node.x;\n      var _deltaY = this.node.y2 - this.node.y;\n      this.fixedLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(_deltaX, _deltaY);\n    },\n    moveBezierNodeX: function moveBezierNodeX(mouseX) {\n      this.node.x2 = mouseX;\n      this.deltaX = this.node.x2 - this.node.x;\n      var newLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(this.deltaX, this.deltaY);\n      var k = this.fixedSymmetryLength / newLength;\n      this.node.x3 = k * (this.node.x - mouseX) + this.node.x;\n    },\n    moveBezierNodeY: function moveBezierNodeY(mouseY) {\n      this.node.y2 = mouseY;\n      this.deltaY = this.node.y2 - this.node.y;\n      var newLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(this.deltaX, this.deltaY);\n      var k = this.fixedSymmetryLength / newLength;\n      this.node.y3 = k * (this.node.y - mouseY) + this.node.y;\n    },\n    moveSymmetryBezierNodeX: function moveSymmetryBezierNodeX(mouseX) {\n      this.node.x3 = mouseX;\n      this.deltaX = this.node.x3 - this.node.x;\n      var newLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(this.deltaX, this.deltaY);\n      var k = this.fixedLength / newLength;\n      this.node.x2 = k * (this.node.x - mouseX) + this.node.x;\n    },\n    moveSymmetryBezierNodeY: function moveSymmetryBezierNodeY(mouseY) {\n      this.node.y3 = mouseY;\n      this.deltaY = this.node.y3 - this.node.y;\n      var newLength = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_math_hypot___default()(this.deltaX, this.deltaY);\n      var k = this.fixedLength / newLength;\n      this.node.y2 = k * (this.node.y - mouseY) + this.node.y;\n    }\n  },\n\n  watch: {\n    mouseupCount: function mouseupCount() {\n      this.isBezierNodeDragged = false;\n      this.isSymmetryBezierNodeDragged = false;\n    },\n    mouseX: function mouseX(newVal) {\n      if (this.isBezierNodeDragged) {\n        this.moveBezierNodeX(newVal);\n      }\n      if (this.isSymmetryBezierNodeDragged) {\n        this.moveSymmetryBezierNodeX(newVal);\n      }\n    },\n    mouseY: function mouseY(newVal) {\n      if (this.isBezierNodeDragged) {\n        this.moveBezierNodeY(newVal);\n      }\n      if (this.isSymmetryBezierNodeDragged) {\n        this.moveSymmetryBezierNodeY(newVal);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"aYsG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Line',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  mounted: function mounted() {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(50, 50, 50, 50);\n      this.object.addBezierNode(150, 150, 150, 150);\n      this.object.init();\n    }\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    pathD: function pathD() {\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          pathD += ' L ' + node.x + ' ' + node.y;\n        }\n      });\n      if (this.nodes.length >= 2) {\n        pathD += ' L ' + this.nodes[0].x + ' ' + this.nodes[0].y;\n      }\n      return pathD;\n    }\n  },\n\n  components: {\n    controlnode: __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"ayw7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ControlNode',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'node'],\n\n  data: function data() {\n    return {\n      dragged: false,\n      squareSize: 6,\n      xInNodeCoordinate: 0,\n      yInNodeCoordinate: 0\n    };\n  },\n\n\n  methods: {\n    handleMousedown: function handleMousedown() {\n      if (event.button === 0) {\n        this.dragged = true;\n      }\n      this.xInNodeCoordinate = this.mouseX - this.node.x;\n      this.yInNodeCoordinate = this.mouseY - this.node.y;\n    },\n    handleClick: function handleClick() {\n      // this.node.isActiveBezierTool = !this.node.isActiveBezierTool\n      return this.node.isActiveBezierTool ? this.node.closeBezierTool() : this.node.activateBezierTool();\n    },\n    handleContextmenu: function handleContextmenu() {\n      this.$emit('deleteNode');\n      return false;\n    }\n  },\n\n  watch: {\n    mouseX: function mouseX(newVal) {\n      if (this.dragged) {\n        this.node.x = newVal - this.xInNodeCoordinate;\n        if (this.node.x2) {\n          this.node.x2 = this.node.x;\n        }\n        if (this.node.x3) {\n          this.node.x3 = this.node.x;\n        }\n      }\n    },\n    mouseY: function mouseY(newVal) {\n      if (this.dragged) {\n        this.node.y = newVal - this.yInNodeCoordinate;\n        if (this.node.y2) {\n          this.node.y2 = this.node.y;\n        }\n        if (this.node.y3) {\n          this.node.y3 = this.node.y;\n        }\n      }\n    },\n    mouseupCount: function mouseupCount() {\n      this.dragged = false;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"cPX6\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"crmn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{on:{\"mouseup\":function($event){return _vm.handleMouseup($event)},\"mousedown\":function($event){return _vm.handleMousedown($event)}}},[_c('styleframe',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount}}),_vm._v(\" \"),(_vm.isScaleShow)?_c('rectframe',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"frameX\":_vm.frameX,\"frameY\":_vm.frameY,\"frameW\":_vm.frameW,\"frameH\":_vm.frameH},on:{\"updateX\":function($event){return _vm.scaleByX($event)},\"updateY\":function($event){return _vm.scaleByY($event)},\"updateW\":function($event){return _vm.scaleByW($event)},\"updateH\":function($event){return _vm.scaleByH($event)},\"updateFrame\":function($event){return _vm.updateFrame($event)},\"rotate\":function($event){return _vm.rotate($event)}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"cxcd\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_BezierTool_vue__ = __webpack_require__(\"ZSvP\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5bfb6b88_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_BezierTool_vue__ = __webpack_require__(\"5G65\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_BezierTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5bfb6b88_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_BezierTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"d5AP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tool-box\"}},[_c('upload-tool'),_vm._v(\" \"),_c('save-tool'),_vm._v(\" \"),_vm._l((_vm.toolItems),function(toolName,index){return _c('tool-item',{key:index,attrs:{\"toolName\":toolName,\"usingToolName\":_vm.usingToolName},on:{\"enterTool\":function($event){return _vm.enterTool($event)},\"calcelTool\":function($event){return _vm.cancelTool($event)}}})}),_vm._v(\" \"),_c('undo-tool')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"dXrS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar icons = {};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'fa-icon',\n  props: {\n    name: {\n      type: String,\n      validator: function validator(val) {\n        if (val && !(val in icons)) {\n          console.warn('Invalid prop: prop \"name\" is referring to an unregistered icon \"' + val + '\".' + '\\nPlease make sure you have imported this icon before using it.');\n          return false;\n        }\n        return true;\n      }\n    },\n    scale: [Number, String],\n    spin: Boolean,\n    inverse: Boolean,\n    pulse: Boolean,\n    flip: {\n      validator: function validator(val) {\n        return val === 'horizontal' || val === 'vertical';\n      }\n    },\n    label: String\n  },\n  data: function data() {\n    return {\n      x: false,\n      y: false,\n      childrenWidth: 0,\n      childrenHeight: 0,\n      outerScale: 1\n    };\n  },\n\n  computed: {\n    normalizedScale: function normalizedScale() {\n      var scale = this.scale;\n      scale = typeof scale === 'undefined' ? 1 : Number(scale);\n      if (isNaN(scale) || scale <= 0) {\n        console.warn('Invalid prop: prop \"scale\" should be a number over 0.', this);\n        return this.outerScale;\n      }\n      return scale * this.outerScale;\n    },\n    klass: function klass() {\n      return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()({\n        'fa-icon': true,\n        'fa-spin': this.spin,\n        'fa-flip-horizontal': this.flip === 'horizontal',\n        'fa-flip-vertical': this.flip === 'vertical',\n        'fa-inverse': this.inverse,\n        'fa-pulse': this.pulse\n      }, this.$options.name, true);\n    },\n    icon: function icon() {\n      if (this.name) {\n        return icons[this.name];\n      }\n      return null;\n    },\n    box: function box() {\n      if (this.icon) {\n        return '0 0 ' + this.icon.width + ' ' + this.icon.height;\n      }\n      return '0 0 ' + this.width + ' ' + this.height;\n    },\n    ratio: function ratio() {\n      if (!this.icon) {\n        return 1;\n      }\n      var _icon = this.icon,\n          width = _icon.width,\n          height = _icon.height;\n\n      return Math.max(width, height) / 16;\n    },\n    width: function width() {\n      return this.childrenWidth || this.icon && this.icon.width / this.ratio * this.normalizedScale || 0;\n    },\n    height: function height() {\n      return this.childrenHeight || this.icon && this.icon.height / this.ratio * this.normalizedScale || 0;\n    },\n    style: function style() {\n      if (this.normalizedScale === 1) {\n        return false;\n      }\n      return {\n        fontSize: this.normalizedScale + 'em'\n      };\n    },\n    raw: function raw() {\n      // generate unique id for each icon's SVG element with ID\n      if (!this.icon || !this.icon.raw) {\n        return null;\n      }\n      var raw = this.icon.raw;\n      var ids = {};\n      raw = raw.replace(/\\s(?:xml:)?id=([\"']?)([^\"')\\s]+)\\1/g, function (match, quote, id) {\n        var uniqueId = getId();\n        ids[id] = uniqueId;\n        return ' id=\"' + uniqueId + '\"';\n      });\n      raw = raw.replace(/#(?:([^'\")\\s]+)|xpointer\\(id\\((['\"]?)([^')]+)\\2\\)\\))/g, function (match, rawId, _, pointerId) {\n        var id = rawId || pointerId;\n        if (!id || !ids[id]) {\n          return match;\n        }\n\n        return '#' + ids[id];\n      });\n\n      return raw;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    if (!this.name && this.$children.length === 0) {\n      console.warn('Invalid prop: prop \"name\" is required.');\n      return;\n    }\n\n    if (this.icon) {\n      return;\n    }\n\n    var width = 0;\n    var height = 0;\n    this.$children.forEach(function (child) {\n      child.outerScale = _this.normalizedScale;\n\n      width = Math.max(width, child.width);\n      height = Math.max(height, child.height);\n    });\n    this.childrenWidth = width;\n    this.childrenHeight = height;\n    this.$children.forEach(function (child) {\n      child.x = (width - child.width) / 2;\n      child.y = (height - child.height) / 2;\n    });\n  },\n  register: function register(data) {\n    for (var name in data) {\n      var icon = data[name];\n\n      if (!icon.paths) {\n        icon.paths = [];\n      }\n      if (icon.d) {\n        icon.paths.push({ d: icon.d });\n      }\n\n      if (!icon.polygons) {\n        icon.polygons = [];\n      }\n      if (icon.points) {\n        icon.polygons.push({ points: icon.points });\n      }\n\n      icons[name] = icon;\n    }\n  },\n\n  icons: icons\n});\n\nvar cursor = 0xd4937;\nfunction getId() {\n  return 'fa-' + (cursor++).toString(16);\n}\n\n/***/ }),\n\n/***/ \"dZkg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RotateFrame_vue__ = __webpack_require__(\"U02f\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4fbbcee8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RotateFrame_vue__ = __webpack_require__(\"J4kB\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RotateFrame_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_4fbbcee8_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RotateFrame_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"eVrT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"story-panel\"}},[_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    width\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.canvasW,\"min\":1000,\"max\":5000,\"step\":10},on:{\"updateSliderVal\":function($event){return _vm.updateCanvasW($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    height\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.canvasH,\"min\":500,\"max\":2000,\"step\":10},on:{\"updateSliderVal\":function($event){return _vm.updateCanvasH($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    xScale\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.xScaleFactor,\"min\":0,\"max\":1,\"step\":0.01},on:{\"updateSliderVal\":function($event){return _vm.updateXScalingFactor($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    yScale\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.yScaleFactor,\"min\":0.5,\"max\":1,\"step\":0.02},on:{\"updateSliderVal\":function($event){return _vm.updateYScalingFactor($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Relax\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.relaxingFactor,\"min\":0,\"max\":100,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateRelaxingFactor($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Frame\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.frameStep,\"min\":50,\"max\":500,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateFrameStep($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Curve\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.curveStep,\"min\":50,\"max\":500,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateCurveStep($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Smooth\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.sampleStep,\"min\":2,\"max\":20,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateSampleStep($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Sketch\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.jitterWave,\"min\":1,\"max\":5,\"step\":0.2},on:{\"updateSliderVal\":function($event){return _vm.updateJitterWave($event)}}})],1),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.storyConfig.content),expression:\"storyConfig.content\"}],attrs:{\"name\":\"storyConfig\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"story configuration here...\"},domProps:{\"value\":(_vm.storyConfig.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.storyConfig, \"content\", $event.target.value)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"ebHo\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__types_Selector__ = __webpack_require__(\"puZo\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__types_CubicSpline__ = __webpack_require__(\"DLEB\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__types_PathReshaper__ = __webpack_require__(\"iJRs\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__types_UniformSampler__ = __webpack_require__(\"L8V5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_gsap__ = __webpack_require__(\"lPMi\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_mousetrap__ = __webpack_require__(\"knr3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_mousetrap___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_mousetrap__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Storyline',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  data: function data() {\n    return {\n      sampleNodes: [],\n      targetPath: [],\n      dragMoving: false,\n      dashlineRange: [],\n      needAnimation: true,\n      storyReorder: null,\n      sessionMover: null,\n      recordY: 0\n    };\n  },\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    cleanNodes: function cleanNodes() {\n      return this.nodes.filter(function (node) {\n        return node.y > 0;\n      });\n    },\n    samples: function samples() {\n      return this.sampleNodes;\n    },\n    visible: function visible() {\n      return this.object.isShow && this.object.name !== 'RABBIT';\n    },\n    character: function character() {\n      return this.object.name;\n    },\n    starwarColor: function starwarColor() {\n      switch (this.character) {\n        case 'VADER':\n          return 'black';\n        case 'R2-D2':\n          return 'blue';\n        case 'C-3PO':\n          return 'orange';\n        case 'CHEWIE':\n          return 'brown';\n        case 'JABBA':\n          return 'green';\n        case 'GREEDO':\n          return 'green';\n        case 'YODA':\n          return 'green';\n        case 'BOBA FETT':\n          return 'green';\n        case 'EMPEROR':\n          return 'black';\n        case 'T-REX':\n        case 'RAPTOR1':\n        case 'RAPTOR2':\n        case 'RAPTOR3':\n        case 'DILOPHOSAURUS':\n          return 'red';\n        case 'SMITH':\n          return 'black';\n        case 'TRINITY':\n          return 'red';\n        case 'NEO':\n          return 'blue';\n        case 'MORPHEUS':\n          return 'purple';\n        case 'TANK':\n          return 'green';\n        default:\n          return 'gray';\n      }\n    },\n    labelX: function labelX() {\n      return this.sampleNodes.length > 0 && this.nodes.length > 0 ? this.sampleNodes[0].x - 5 : -10000;\n    },\n    labelY: function labelY() {\n      return this.sampleNodes.length > 0 && this.nodes.length > 0 ? this.sampleNodes[0].y + 5 : -10000;\n    },\n    labelXEnd: function labelXEnd() {\n      var n = this.sampleNodes.length - 1;\n      return n > -1 && this.nodes.length > 0 ? this.sampleNodes[n].x + 5 : -10000;\n    },\n    labelYEnd: function labelYEnd() {\n      var n = this.sampleNodes.length - 1;\n      return n > -1 && this.nodes.length > 0 ? this.sampleNodes[n].y + 5 : -10000;\n    },\n    bone: function bone() {\n      var cleanNodes = this.removeInvalidNodes(this.object.nodes);\n      this.sampleNodes = cleanNodes;\n      var d = '';\n      cleanNodes.forEach(function (node, i) {\n        var x = node.x;\n        var y = node.y;\n        if (i === 0) {\n          d += 'M ' + x + ' ' + y;\n        } else {\n          d += ' L ' + x + ' ' + y;\n        }\n      });\n      return d;\n    },\n    pathD: function pathD() {\n      var cleanNodes = this.cleanNodes;\n      // this.dashlineRange = this.addDashlineRange()\n      // get control points\n      if (cleanNodes.length > 0) {\n        // get sample points\n        var cubicSpline = new __WEBPACK_IMPORTED_MODULE_4__types_CubicSpline__[\"a\" /* CubicSplineSimple */](cleanNodes);\n        var fittingNodes = cubicSpline.fit();\n        var step = this.sampleStep;\n        var sampleNodes = __WEBPACK_IMPORTED_MODULE_6__types_UniformSampler__[\"a\" /* UniformSampler */].sample(fittingNodes, step);\n        var wave = this.jitterWave;\n        __WEBPACK_IMPORTED_MODULE_6__types_UniformSampler__[\"a\" /* UniformSampler */].jitter(sampleNodes, wave);\n        this.sampleNodes = sampleNodes;\n        var dashlineStep = this.sampleStep;\n        // console.log(JSON.stringify({ name: this.character, points: sampleNodes.map(v => { return { x: v.x, y: v.y } }) }))\n        return this.calculatePathD(dashlineStep, sampleNodes);\n      } else {\n        return '';\n      }\n    },\n    sampleStep: function sampleStep() {\n      return this.storyConfig.sampleStep;\n    },\n    jitterWave: function jitterWave() {\n      return this.storyConfig.jitterWave;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingOrderTool', 'isUsingBendTool', 'isUsingCurveTool', 'isUsingLinkTool', 'dashRangeMap', 'storyConfig', 'storyFrameMap', 'storySessionMap', 'storyCharacterMap', 'storylines', 'selectedCharacters'])),\n\n  methods: {\n    handleMousedown: function handleMousedown() {\n      // reorder\n      if (this.isUsingOrderTool) {\n        this.storyReorder = new __WEBPACK_IMPORTED_MODULE_3__types_Selector__[\"d\" /* StoryReorder */](this.storylines, this.storyConfig, this.storyFrameMap, this.storySessionMap, this.storyCharacterMap);\n        this.storyReorder.locate(this.mouseX, this.mouseY);\n        this.recordY = this.mouseY;\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0) {\n        this.sessionMover = new __WEBPACK_IMPORTED_MODULE_3__types_Selector__[\"c\" /* SessionMover */](this.storylines, this.storyFrameMap, this.storySessionMap, this.storyCharacterMap);\n        this.sessionMover.locate(this.mouseX, this.mouseY);\n        this.recordY = this.mouseY;\n      }\n    },\n    handleMouseup: function handleMouseup() {\n      // reorder\n      if (this.isUsingOrderTool && this.storyReorder) {\n        var result = this.storyReorder.reorder();\n        if (result.frame > -1) {\n          this.$store.dispatch('orderSession', result);\n        }\n        this.storyReorder = null;\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0) {\n        this.sessionMover = null;\n      }\n    },\n    handleSelecting: function handleSelecting() {\n      if (this.isUsingCurveTool || this.isUsingLinkTool) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__[\"d\" /* ADD_SELECTING_CHARACTER */], this.object.characterId);\n      }\n      if (this.isUsingBendTool) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__[\"b\" /* ADD_FOCUSING_CHARACTER */], this.object.characterId);\n      }\n      this.$emit('storylineSelect');\n    },\n    beginDragMoving: function beginDragMoving() {\n      this.dragMoving = true;\n      this.recordY = this.mouseY;\n    },\n    endDragMoving: function endDragMoving() {\n      this.dragMoving = false;\n      this.recordY = 0;\n      if (this.isUsingOrderTool) {\n        this.$store.dispatch('orderStoryline', this.object.characterId);\n      }\n    },\n    removeInvalidNodes: function removeInvalidNodes(nodes) {\n      var _nodes = [];\n      for (var i = 0, len = nodes.length; i < len; i++) {\n        if (i === 0) {\n          if (nodes[i].y > -10000) {\n            _nodes.push(nodes[i]);\n          }\n        } else if (i === len - 1) {\n          if (nodes[i].y > -10000) {\n            _nodes.push(nodes[i]);\n          }\n        } else {\n          if (nodes[i].y > -10000) {\n            if (Math.abs(nodes[i].y - nodes[i - 1].y) > 1 || Math.abs(nodes[i].y - nodes[i + 1].y) > 1) {\n              _nodes.push(nodes[i]);\n            }\n          }\n        }\n      }\n      return _nodes;\n    },\n    appendDashline: function appendDashline(node, i, step) {\n      var pathD = '';\n      var sampleNodes = this.sampleNodes;\n\n      if (i === 0) {\n        pathD += 'M ' + node.x + ' ' + node.y;\n      } else {\n        var intensity = step / 2;\n        var endY = node.y;\n        var startY = sampleNodes[i - 1].y;\n        var endX = node.x;\n        var startX = sampleNodes[i - 1].x;\n        var arc = Math.atan2(endY - startY, endX - startX);\n        var yStep = Math.sin(arc) * intensity;\n        var xStep = Math.cos(arc) * intensity;\n        var currentX = startX;\n        var solid = false;\n\n        while (xStep > 0 && currentX + xStep < endX || xStep < 0 && currentX + xStep > endX) {\n          if (solid) {\n            pathD += ' l';\n          } else {\n            pathD += ' m';\n          }\n          pathD += ' ' + xStep + ' ' + yStep;\n          solid = !solid;\n          currentX += xStep;\n        }\n        pathD += ' L ' + endX + ' ' + endY;\n      }\n      return pathD;\n    },\n    appendCurve: function appendCurve(i, wasDashline) {\n      var sampleNodes = this.sampleNodes;\n      var pathD = '';\n      if (i < 2) {\n        for (var j = 1; j < 2; j++) {\n          pathD += ' L ' + sampleNodes[i].x + ' ' + sampleNodes[i].y;\n        }\n      } else if (wasDashline) {\n        if (this.jitterWave > 0) {\n          pathD += ' C ' + sampleNodes[i - 2].x + ',' + sampleNodes[i - 2].y + ' ' + sampleNodes[i - 1].x + ',' + sampleNodes[i - 1].y + ' ' + sampleNodes[i].x + ',' + sampleNodes[i].y;\n        } else {\n          pathD += ' L ' + sampleNodes[i].x + ' ' + sampleNodes[i].y;\n        }\n      } else {\n        if (this.jitterWave > 0) {\n          pathD += ' S ' + sampleNodes[i - 1].x + ',' + sampleNodes[i - 1].y + ' ' + sampleNodes[i].x + ',' + sampleNodes[i].y;\n        } else {\n          pathD += ' L ' + sampleNodes[i].x + ' ' + sampleNodes[i].y;\n        }\n      }\n      return pathD;\n    },\n    calculatePathD: function calculatePathD(step, sampleNodes) {\n      // let sampleNodes = this.sampleNodes\n      var pathD = '';\n      // line with respect to dashlineRange\n      var i = 0;\n      var wasDashline = false;\n      for (; i < sampleNodes.length - 3;) {\n        var node = sampleNodes[i];\n        var inDashline = false;\n        for (var j = 0; j < this.dashlineRange.length; j++) {\n          if (this.dashlineRange[j][0] < node.x && node.x < this.dashlineRange[j][1]) {\n            inDashline = true;\n            break;\n          }\n        }\n        if (i === 0) {\n          pathD += ' M ' + sampleNodes[i].x + ' ' + sampleNodes[i].y;\n          i++;\n        } else if (inDashline) {\n          pathD += this.appendDashline(node, i, step);\n          wasDashline = true;\n          i++;\n        } else {\n          if (wasDashline) {\n            i += 3;\n          }\n          pathD += this.appendCurve(i, wasDashline);\n          // lead to a bug when dashline begin\n          i += 2;\n          wasDashline = false;\n        }\n      }\n      i -= 3;\n      if (i < 0) {\n        i = 0;\n      }\n      for (; i < sampleNodes.length; i++) {\n        if (sampleNodes[i]) {\n          pathD += ' L ' + sampleNodes[i].x + ' ' + sampleNodes[i].y;\n        } else {\n          // debugger\n        }\n      }\n      return pathD;\n    },\n    addDashlineRange: function addDashlineRange() {\n      switch (this.character) {\n        case '':\n          return [[100, 10000]];\n        case '':\n          return [[380, 10000]];\n        case '':\n          return [[0, 300], [350, 400]];\n        case '':\n          return [[700, 1800]];\n        case 'IMELDA':\n          return [[250, 10000]];\n        case 'HECTOR':\n          return [[230, 10000]];\n        case 'CRUZ':\n          return [[250, 10000]];\n        case 'COCO':\n          return [[1000, 10000]];\n        case 'MIGUEL':\n          return [[400, 830]];\n        default:\n          return [];\n      }\n    }\n  },\n\n  mounted: function mounted() {\n    var _this = this;\n\n    this.object.init();\n    var mousetrap = new __WEBPACK_IMPORTED_MODULE_8_mousetrap__();\n    mousetrap.bind('esc', function () {\n      if (_this.isUsingCurveTool && _this.selectedCharacters.indexOf(_this.object.characterId) > -1) {\n        var pathReshaper = new __WEBPACK_IMPORTED_MODULE_5__types_PathReshaper__[\"b\" /* PathReshaperSingle */](_this.targetPath);\n        pathReshaper.moveFocusCharacter(_this.object.nodes);\n        _this.targetPath = [];\n      }\n    });\n  },\n\n\n  watch: {\n    mouseY: function mouseY(newY) {\n      if (this.dragMoving && this.isUsingOrderTool) {\n        if (newY > 0) {\n          var distY = newY - this.recordY;\n          this.object.updateY(distY);\n        }\n      }\n      // reorder\n      if (this.isUsingOrderTool && this.storyReorder) {\n        var moveY = this.mouseY - this.recordY;\n        this.storyReorder.move(moveY);\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0 && this.sessionMover) {\n        var _moveY = this.mouseY - this.recordY;\n        this.sessionMover.move(_moveY);\n        // let twister = new SplineTwister(this.storylines, this.storySessionMap, this.storyConfig)\n        // twister.twist(1)\n      }\n    },\n    mousedownCount: function mousedownCount(newVal) {\n      // reshape\n      if (this.isUsingCurveTool && this.selectedCharacters.indexOf(this.object.characterId) > -1) {\n        this.targetPath.push({\n          x: this.mouseX,\n          y: this.mouseY\n        });\n      }\n    },\n    mouseupCount: function mouseupCount(newVal) {\n      if (this.dragMoving && this.isUsingOrderTool) {\n        this.endDragMoving();\n      }\n      // reorder\n      if (this.isUsingOrderTool && this.storyReorder) {\n        var result = this.storyReorder.reorder();\n        if (result.frame > -1) {\n          this.$store.dispatch('orderSession', result);\n        }\n        this.storyReorder = null;\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0) {\n        this.sessionMover = null;\n      }\n    },\n    dashRangeMap: function dashRangeMap(newRange) {\n      if (this.selectedCharacters.indexOf(this.object.characterId) > -1) {\n        this.dashlineRange = newRange;\n      }\n    },\n    nodes: function nodes(newNodes, oldNodes) {\n      var _this2 = this;\n\n      // console.log('animate')\n      if (this.needAnimation && oldNodes) {\n        if (newNodes.length !== oldNodes.length) {\n          console.error('mismatch');\n        }\n        oldNodes.forEach(function (node, i) {\n          if ((node.x !== newNodes[i].x || node.y !== newNodes[i].y) && node.y > 0) {\n            __WEBPACK_IMPORTED_MODULE_7_gsap__[\"a\" /* TweenMax */].fromTo(_this2.nodes[i], 1, { x: oldNodes[i].x, y: oldNodes[i].y }, { x: newNodes[i].x, y: newNodes[i].y });\n          }\n        });\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"ecCa\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__panels_TreePanel_TreePanel__ = __webpack_require__(\"MIrv\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__panels_ShapePanel__ = __webpack_require__(\"gfC4\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__panels_StoryPanel__ = __webpack_require__(\"58s9\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__panels_TextPanel__ = __webpack_require__(\"nNzv\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'SidePanel',\n\n  data: function data() {\n    return {\n      styleObject: {\n        left: '-260px'\n      }\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['panelActivated', 'panelName'])),\n\n  watch: {\n    panelActivated: function panelActivated(newVal) {\n      if (newVal) {\n        this.styleObject.left = '80px';\n      } else {\n        this.styleObject.left = '-260px';\n      }\n    }\n  },\n\n  components: {\n    'tree-panel': __WEBPACK_IMPORTED_MODULE_2__panels_TreePanel_TreePanel__[\"a\" /* default */],\n    'shape-panel': __WEBPACK_IMPORTED_MODULE_3__panels_ShapePanel__[\"a\" /* default */],\n    'story-panel': __WEBPACK_IMPORTED_MODULE_4__panels_StoryPanel__[\"a\" /* default */],\n    'text-panel': __WEBPACK_IMPORTED_MODULE_5__panels_TextPanel__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"ewtb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PathSelect_vue__ = __webpack_require__(\"syNJ\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6a45afae_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PathSelect_vue__ = __webpack_require__(\"zr+e\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_PathSelect_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6a45afae_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_PathSelect_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"fOqo\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"custom-shape\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('g',{key:index},[_c('beziertool',{directives:[{name:\"show\",rawName:\"v-show\",value:(node.isActiveBezierTool),expression:\"node.isActiveBezierTool\"}],attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}}),_vm._v(\" \"),_c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.created || _vm.reshape),expression:\"!created || reshape\"}],attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"index\":index,\"node\":node},on:{\"deleteNode\":function($event){return _vm.deleteNode(index)}}})],1)})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"fb9g\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Storyline_vue__ = __webpack_require__(\"ebHo\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_25510291_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Storyline_vue__ = __webpack_require__(\"yq3R\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"ncPy\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Storyline_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_25510291_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Storyline_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"flRY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Pentagon',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  mounted: function mounted() {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(90, 10, 90, 10);\n      this.object.addBezierNode(170, 70, 170, 70);\n      this.object.addBezierNode(140, 165, 140, 165);\n      this.object.addBezierNode(40, 165, 40, 165);\n      this.object.addBezierNode(10, 70, 10, 70);\n      this.object.init();\n    }\n  },\n\n\n  computed: {\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    pathD: function pathD() {\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          pathD += ' L ' + node.x + ' ' + node.y;\n        }\n      });\n      if (this.nodes.length > 2) {\n        pathD += ' L ' + this.nodes[0].x + ' ' + this.nodes[0].y;\n      }\n      return pathD;\n    }\n  },\n\n  components: {\n    controlnode: __WEBPACK_IMPORTED_MODULE_0__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"g7oG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'TextPanel',\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['focusText']))\n});\n\n/***/ }),\n\n/***/ \"gHnp\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shape-panel\"},[_c('div',{staticClass:\"style-card\"},[_c('div',{staticClass:\"color-wrapper\",on:{\"click\":_vm.handleFillColor}},[_vm._v(\"\\n      Fill\\n      \"),_c('input',{style:(_vm.fillColor),attrs:{\"type\":\"text\",\"name\":\"fillColor\",\"readonly\":\"readonly\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"color-wrapper\",on:{\"click\":_vm.handleStrokeColor}},[_vm._v(\"\\n      Stroke\\n      \"),_c('input',{style:(_vm.strokeColor),attrs:{\"type\":\"text\",\"name\":\"strokeColor\",\"readonly\":\"readonly\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n      Width\\n      \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.objectStyle.strokeWidth,\"min\":0,\"max\":10,\"step\":0.1},on:{\"updateSliderVal\":function($event){return _vm.updateStrokeWidth($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n      Opacity\\n      \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.objectStyle.opacity,\"min\":0,\"max\":1,\"step\":0.01},on:{\"updateSliderVal\":function($event){return _vm.updateOpacity($event)}}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"shape-row\"},[_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleRectangle}},[_vm._v(\"\\n      Rectangle\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleTriangle}},[_vm._v(\"\\n      Triangle\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handlePentagon}},[_vm._v(\"\\n      Pentagon\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"shape-row\"},[_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleHexagon}},[_vm._v(\"\\n      Hexagon\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleEchelon}},[_vm._v(\"\\n      Echelon\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleLine}},[_vm._v(\"\\n      Custom\\n    \")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"gW7Q\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"rect-frame\"},[_c('rect',{attrs:{\"fill\":\"none\",\"x\":_vm.updateX,\"y\":_vm.updateY,\"width\":_vm.updateW,\"height\":_vm.updateH,\"stroke\":\"blue\"}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,key){return _c('rect',{key:key,style:(node.cursor),attrs:{\"x\":node.x - 3,\"y\":node.y - 3,\"width\":6,\"height\":6,\"fill\":\"white\",\"stroke\":\"blue\",\"stroke-width\":\"1\"},on:{\"mousedown\":function($event){return _vm.handleMousedown(key)},\"mouseup\":_vm.handleMouseup}})}),_vm._v(\" \"),_c('line',{attrs:{\"x1\":_vm.positionX,\"y1\":_vm.positionY,\"x2\":_vm.rotateNode.x,\"y2\":_vm.rotateNode.y,\"stroke\":\"blue\",\"stroke-width\":\"1\"}}),_vm._v(\" \"),_c('circle',{attrs:{\"fill\":\"blue\",\"cx\":_vm.rotateNode.x,\"cy\":_vm.rotateNode.y,\"r\":3,\"stroke\":\"black\",\"stroke-width\":\"1\"},on:{\"mousedown\":_vm.handleRotateMousedown,\"mouseup\":_vm.handleRotateMouseup}}),_vm._v(\" \"),_c('circle',{attrs:{\"fill\":\"blue\",\"cx\":_vm.positionX,\"cy\":_vm.positionY,\"r\":3,\"stroke\":\"black\",\"stroke-width\":\"1\"},on:{\"mousedown\":_vm.handleRotateMousedown,\"mouseup\":_vm.handleRotateMouseup}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"gfC4\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShapePanel_vue__ = __webpack_require__(\"YrUE\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7dab7d6e_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ShapePanel_vue__ = __webpack_require__(\"gHnp\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"2htf\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ShapePanel_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7dab7d6e_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ShapePanel_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"grRP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-card\",style:(_vm.position)},_vm._l((_vm.states),function(state,index){return _c('div',{key:index,staticClass:\"state\",on:{\"click\":function($event){return _vm.handleClick(state)}}},[_vm._v(\"\\n    \"+_vm._s(state)+\"\\n  \")])}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"gsLH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolItem_vue__ = __webpack_require__(\"AeaF\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c1164880_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolItem_vue__ = __webpack_require__(\"EVPn\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ToolItem_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_c1164880_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ToolItem_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"gxps\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__shapes_CustomShape__ = __webpack_require__(\"ieIR\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shapes_Storyline__ = __webpack_require__(\"fb9g\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__shapes_Triangle__ = __webpack_require__(\"0d6M\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__shapes_Rectangle__ = __webpack_require__(\"q+vf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__shapes_Pentagon__ = __webpack_require__(\"O1zv\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__shapes_Hexagon__ = __webpack_require__(\"4IQm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__shapes_Line__ = __webpack_require__(\"sfWC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__shapes_Echelon__ = __webpack_require__(\"meyI\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'StyleFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data: function data() {\n    return {\n      isStorylineSelected: false,\n      style: {\n        fill: {\n          rgba: {\n            r: 255,\n            g: 255,\n            b: 255,\n            a: 1\n          }\n        },\n        stroke: {\n          rgba: {\n            r: 0,\n            g: 0,\n            b: 0,\n            a: 1\n          }\n        },\n        strokeWidth: 3,\n        opacity: 1\n      }\n    };\n  },\n\n\n  methods: {\n    handleStorylineStyle: function handleStorylineStyle() {\n      this.isStorylineSelected = !this.isStorylineSelected;\n      if (this.isStorylineSelected) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"o\" /* LOCATE_FOCUSOBJECT_STYLE */], this.style);\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"y\" /* RESTORE_FOCUSOBJECT_STYLE */]);\n      }\n    }\n  },\n\n  computed: {\n    fillColor: function fillColor() {\n      var r = this.style.fill.rgba.r;\n      var g = this.style.fill.rgba.g;\n      var b = this.style.fill.rgba.b;\n      var a = this.style.fill.rgba.a;\n      return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n    },\n    selected: function selected() {\n      return this.object.isSelected;\n    },\n    strokeColor: function strokeColor() {\n      if (this.selected) {\n        return 'rgba(' + 0 + ',' + 0 + ',' + 255 + ',' + 1 + ')';\n      }\n      var r = this.style.stroke.rgba.r;\n      var g = this.style.stroke.rgba.g;\n      var b = this.style.stroke.rgba.b;\n      var a = this.style.stroke.rgba.a;\n      return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n    },\n    strokeWidth: function strokeWidth() {\n      if (this.selected) {\n        return 1;\n      } else {\n        return this.style.strokeWidth;\n      }\n    },\n    isScale: function isScale() {\n      return this.object.isScale;\n    }\n  },\n\n  watch: {\n    isScale: function isScale(newVal) {\n      if (newVal) {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"o\" /* LOCATE_FOCUSOBJECT_STYLE */], this.style);\n      } else {\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"y\" /* RESTORE_FOCUSOBJECT_STYLE */]);\n      }\n    }\n  },\n\n  components: {\n    customshape: __WEBPACK_IMPORTED_MODULE_1__shapes_CustomShape__[\"a\" /* default */],\n    storyline: __WEBPACK_IMPORTED_MODULE_2__shapes_Storyline__[\"a\" /* default */],\n    triangleg: __WEBPACK_IMPORTED_MODULE_3__shapes_Triangle__[\"a\" /* default */],\n    rectangleg: __WEBPACK_IMPORTED_MODULE_4__shapes_Rectangle__[\"a\" /* default */],\n    pentagong: __WEBPACK_IMPORTED_MODULE_5__shapes_Pentagon__[\"a\" /* default */],\n    hexagong: __WEBPACK_IMPORTED_MODULE_6__shapes_Hexagon__[\"a\" /* default */],\n    lineg: __WEBPACK_IMPORTED_MODULE_7__shapes_Line__[\"a\" /* default */],\n    echelong: __WEBPACK_IMPORTED_MODULE_8__shapes_Echelon__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"hSCs\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MutationTypes__ = __webpack_require__(\"vjNh\");\n\n\nvar _mutations;\n\n\n\nvar state = {\n  focusText: {},\n  textObjects: []\n};\n\nvar getters = {\n  focusText: function focusText(state) {\n    return state.focusText;\n  },\n  textObjects: function textObjects(state) {\n    return state.textObjects;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"p\" /* LOCATE_TEXT_OBJECT */], function (state, obj) {\n  state.focusText = obj;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"z\" /* RESTORE_TEXT_OBJECT */], function (state) {\n  state.focusText = {};\n}), _mutations);\n\nvar actions = {\n  insertTextObject: function insertTextObject(_ref, obj) {\n    var state = _ref.state;\n\n    state.textObjects.push(obj);\n  }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n});\n\n/***/ }),\n\n/***/ \"hnEm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CurveTool_vue__ = __webpack_require__(\"sl5J\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_56e4ee1f_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CurveTool_vue__ = __webpack_require__(\"5H7z\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CurveTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_56e4ee1f_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CurveTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"hxIt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ContextMenu_vue__ = __webpack_require__(\"Mcgq\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5e689c14_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ContextMenu_vue__ = __webpack_require__(\"grRP\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"X1HP\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_ContextMenu_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5e689c14_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_ContextMenu_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"i0bz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('move-frame',{style:(_vm.cursorStyle),attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"iJRs\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export PathReshaperFrame */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return PathReshaper; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return PathReshaperSingle; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__ = __webpack_require__(\"yEsh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_map__ = __webpack_require__(\"ifoU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_map__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray__ = __webpack_require__(\"d7EF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__BezierNode__ = __webpack_require__(\"z4iF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_cardinal_spline_js__ = __webpack_require__(\"gkiq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_cardinal_spline_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_cardinal_spline_js__);\n\n\n\n\n\n\n\n\n\n\n\nvar ALPHA = 0;\nvar ALIGN = 4.0;\n\nvar PathReshaperFrame = function () {\n  function PathReshaperFrame(storylines, minFrame, maxFrame, config, targetPath, sessionTable) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, PathReshaperFrame);\n\n    this.storylines = storylines;\n    this.minFrame = minFrame;\n    this.maxFrame = maxFrame;\n    this.config = config;\n    this.sessionTable = sessionTable;\n    this.targetPath = targetPath;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(PathReshaperFrame, [{\n    key: 'moveFocusCharacter',\n    value: function moveFocusCharacter(focusCharacter) {\n      this.resetOptimization();\n      var storyline = this.storylines[focusCharacter].points;\n      // let fitter = new LinearFitCurve(this.targetPath)\n      var fitter = new CubicFitCurve(this.targetPath);\n\n      var _fitter$match = fitter.match(storyline, this.minFrame, this.maxFrame, this.config),\n          _fitter$match2 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_fitter$match, 2),\n          start = _fitter$match2[0],\n          end = _fitter$match2[1];\n\n      var contextMap = this.setOptimizingCharacters(focusCharacter, start, end);\n      for (var i = start, len = end + 1; i < len; i++) {\n        var contextCharacters = contextMap.get(i);\n        var newY = fitter.fitCurve(storyline[i]);\n        if (newY > -10000) {\n          // alignment case\n          newY = this.alignContextPoint(i, newY, storyline);\n          var moveY = newY - storyline[i].y;\n          this.moveContextCharacters(i, contextCharacters, focusCharacter, moveY);\n          storyline[i].y = newY;\n        }\n      }\n    }\n  }, {\n    key: 'resetOptimization',\n    value: function resetOptimization() {\n      this.storylines.forEach(function (storyline) {\n        storyline.points.forEach(function (point) {\n          point.isOptimizedTmp = false;\n        });\n      });\n    }\n  }, {\n    key: 'setOptimizingCharacters',\n    value: function setOptimizingCharacters(focusCharacter, start, end) {\n      var contextCharactersMap = new __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_map___default.a();\n      for (var i = start, len = end + 1; i < len; i++) {\n        var tmpContextCharacters = this.scanInSessionCharacters(i, focusCharacter);\n        contextCharactersMap.set(i, tmpContextCharacters);\n      }\n      return contextCharactersMap;\n    }\n  }, {\n    key: 'scanInSessionCharacters',\n    value: function scanInSessionCharacters(i, character) {\n      var sortingCharacters = [];\n      var frame = this.generateFrame(i);\n      var session = this.sessionTable[character][frame];\n      if (session > -1) {\n        for (var id = 0, len = this.sessionTable.length; id < len; id++) {\n          if (this.sessionTable[id][frame] === session) {\n            sortingCharacters.push({\n              id: id,\n              y: this.storylines[id].points[i].y\n            });\n            this.storylines[id].points[i].isOptimized = true;\n            this.storylines[id].points[i].isOptimizedTmp = true;\n          }\n        }\n        sortingCharacters.sort(function (a, b) {\n          return a.y - b.y;\n        });\n      }\n      return sortingCharacters.map(function (d) {\n        return d.id;\n      });\n    }\n  }, {\n    key: 'generateFrame',\n    value: function generateFrame(i) {\n      return parseInt(i / 2);\n    }\n  }, {\n    key: 'moveContextCharacters',\n    value: function moveContextCharacters(i, characters, focusCharacter, focusMoveY) {\n      var _this = this;\n\n      var upper = [];\n      var lower = [];\n      var isUpper = true;\n      // divide into upper and lower case\n      characters.forEach(function (character) {\n        if (character === focusCharacter) {\n          isUpper = false;\n        }\n        if (isUpper) {\n          upper.push(character);\n        } else {\n          lower.push(character);\n        }\n      });\n      upper.push(focusCharacter);\n      upper = upper.reverse();\n      // upper case\n      var lastCharacterMoveY = focusMoveY;\n      upper.forEach(function (character) {\n        if (character !== focusCharacter) {\n          var storyline = _this.storylines[character].points;\n          var oldY = storyline[i].y;\n          if (oldY > -10000) {\n            var newY = oldY + lastCharacterMoveY;\n            storyline[i].y = _this.alignContextPoint(i, newY, storyline);\n            storyline[i].isOptimized = true;\n            lastCharacterMoveY = storyline[i].y - oldY;\n          }\n        }\n      });\n      // lower case\n      lastCharacterMoveY = focusMoveY;\n      lower.forEach(function (character) {\n        if (character !== focusCharacter) {\n          var storyline = _this.storylines[character].points;\n          var oldY = storyline[i].y;\n          if (oldY > -10000) {\n            var newY = oldY + lastCharacterMoveY;\n            storyline[i].y = _this.alignContextPoint(i, newY, storyline);\n            storyline[i].isOptimized = true;\n            lastCharacterMoveY = storyline[i].y - oldY;\n          }\n        }\n      });\n    }\n  }, {\n    key: 'alignContextPoint',\n    value: function alignContextPoint(i, newY, storyline) {\n      var len = storyline.length;\n      var isLeftAlign = false;\n      var isRightAlign = false;\n      var leftAnchorY = 0;\n      var rightAnchorY = 0;\n      var baseY = storyline[i].y;\n      var thres = 5;\n      if (i > 1) {\n        var leftPoint = storyline[i - 1];\n        if (!leftPoint.isOptimizedTmp) {\n          leftAnchorY = leftPoint.y;\n          if (leftAnchorY > -10000 && Math.abs(baseY - leftAnchorY) < thres) {\n            // return (newY + ALIGN * leftAnchorY) / (1 + ALIGN)\n            isLeftAlign = true;\n          }\n        }\n      }\n      if (i < len - 1) {\n        var rightPoint = storyline[i + 1];\n        if (!rightPoint.isOptimizedTmp) {\n          rightAnchorY = rightPoint.y;\n          if (rightAnchorY > -10000 && Math.abs(baseY - rightAnchorY) < thres) {\n            isRightAlign = true;\n          }\n        }\n      }\n      var upper = newY;\n      var lower = 1;\n      if (isLeftAlign) {\n        upper += ALIGN * leftAnchorY;\n        lower += ALIGN;\n      }\n      if (isRightAlign) {\n        upper += ALIGN * rightAnchorY;\n        lower += ALIGN;\n      }\n      return upper / lower;\n    }\n  }]);\n\n  return PathReshaperFrame;\n}();\n\nvar PathReshaper = function () {\n  function PathReshaper(storylines, sessionTable, frameTable, storyConfig, targetPath) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, PathReshaper);\n\n    this.storylines = storylines;\n    this.sessionTable = sessionTable;\n    this.frameTable = frameTable;\n    this.config = storyConfig;\n    this.targetPath = targetPath;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(PathReshaper, [{\n    key: 'moveFocusCharacter',\n    value: function moveFocusCharacter(focusCharacter) {\n      var storyline = this.storylines[focusCharacter].points;\n      var fitter = new CubicFitCurve(this.targetPath);\n\n      var _fitter$matchStorylin = fitter.matchStoryline(storyline, this.config),\n          _fitter$matchStorylin2 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_fitter$matchStorylin, 2),\n          start = _fitter$matchStorylin2[0],\n          end = _fitter$matchStorylin2[1];\n      // TODO: Consider context characters\n      // console.log(fitter.fittedCurve)\n\n\n      if (start > -1 && end > -1) {\n        for (var i = start, len = end + 1; i < len; i++) {\n          var newY = fitter.fitCurve(storyline[i]);\n          if (newY > -10000) {\n            // console.log(focusCharacter, i, newY, storyline[i].y)\n            storyline[i].y = newY;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'reshapeCharacters',\n    value: function reshapeCharacters(characters) {\n      var _this2 = this;\n\n      characters.forEach(function (character) {\n        _this2.moveFocusCharacter(character);\n      });\n    }\n  }]);\n\n  return PathReshaper;\n}();\n\nvar PathReshaperSingle = function () {\n  function PathReshaperSingle(targetPath) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, PathReshaperSingle);\n\n    this.targetPaths = [targetPath];\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(PathReshaperSingle, [{\n    key: 'moveFocusCharacter',\n    value: function moveFocusCharacter(storyline) {\n      var _this3 = this;\n\n      this.targetPaths.forEach(function (targetPath) {\n        if (targetPath.length > 0) {\n          var fitter = new CubicFitCurve(targetPath);\n\n          var _fitter$matchStorylin3 = fitter.matchStoryline(storyline, _this3.config),\n              _fitter$matchStorylin4 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_fitter$matchStorylin3, 2),\n              start = _fitter$matchStorylin4[0],\n              end = _fitter$matchStorylin4[1];\n\n          if (start > -1 && end > -1) {\n            for (var i = start, len = end + 1; i < len; i++) {\n              var newY = fitter.fitCurve(storyline[i]);\n              if (newY > -10000) {\n                var oldY = storyline[i].y;\n                storyline[i].y = newY;\n              }\n            }\n          }\n        }\n      });\n    }\n  }]);\n\n  return PathReshaperSingle;\n}();\n\nvar FitCurve = function () {\n  function FitCurve(targetPath) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, FitCurve);\n\n    // original path\n    this.targetPath = targetPath;\n    // fitted path\n    this.fittedCurve = [];\n  }\n\n  // relocate at the storyline coordinates\n\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(FitCurve, [{\n    key: 'syncrize',\n    value: function syncrize(config) {\n      var _this4 = this;\n\n      this.fittedCurve = [];\n      // let xScale = config.xScaleFactor\n      // let yScale = config.yScaleFactor\n      var xScale = 1;\n      var yScale = 1;\n      var xBase = 0;\n      var yBase = 0;\n      this.targetPath.forEach(function (point) {\n        var x = (point.x - xBase) / xScale;\n        var y = (point.y - yBase) / yScale;\n        var fittedNode = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"c\" /* StyleNode */](x, y);\n        _this4.fittedCurve.push(fittedNode);\n      });\n      this.fittedCurve.sort(function (a, b) {\n        return a.x - b.x;\n      });\n    }\n  }, {\n    key: 'matchStoryline',\n    value: function matchStoryline(storyline, config) {\n      this.syncrize(config);\n\n      var _locate = this.locate(storyline),\n          _locate2 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_locate, 2),\n          leftIndex = _locate2[0],\n          rightIndex = _locate2[1];\n\n      if (leftIndex > -1 && rightIndex > -1) {\n        var leftPoint = storyline[leftIndex];\n        var rightPoint = storyline[rightIndex];\n        var n = this.targetPath.length - 1;\n        var firstPoint = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"c\" /* StyleNode */](this.fittedCurve[0].x, this.fittedCurve[0].y);\n        var lastPoint = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"c\" /* StyleNode */](this.fittedCurve[n].x, this.fittedCurve[n].y);\n        // special case: ending point can be flexible adjusted\n        // TODO: consider point start not from the beginning\n        if (rightIndex === storyline.length - 1) {\n          this.fittedCurve.forEach(function (point) {\n            point.x = leftPoint.x + (point.x - firstPoint.x);\n            point.y = leftPoint.y + (point.y - firstPoint.y);\n          });\n        } else {\n          var xScale = Math.abs((rightPoint.x - leftPoint.x) / (lastPoint.x - firstPoint.x));\n          var yScale = Math.abs((rightPoint.y - leftPoint.y) / (lastPoint.y - firstPoint.y));\n          this.fittedCurve.forEach(function (point) {\n            point.x = leftPoint.x + xScale * (point.x - firstPoint.x);\n            point.y = leftPoint.y + yScale * (point.y - firstPoint.y);\n          });\n        }\n      }\n      return [leftIndex, rightIndex];\n    }\n  }, {\n    key: 'locate',\n    value: function locate(storyline) {\n      var n = this.targetPath.length - 1;\n      var firstTargetPoint = this.fittedCurve[0];\n      var lastTargetPoint = this.fittedCurve[n];\n      var isFirstPointAnchored = false;\n      var isLastPointAnchored = false;\n      var leftBoundIndex = -1;\n      var rightBoundIndex = storyline.length - 1;\n      for (var i = 1, len = storyline.length - 1; i < len; i++) {\n        // TODO: select the nearest point\n        if (storyline[i].y > -10000) {\n          if (!isFirstPointAnchored && storyline[i].x > firstTargetPoint.x) {\n            leftBoundIndex = storyline[i - 1].y > -10000 ? i - 1 : i;\n            // while (!this.isFlatPoint(storyline, leftBoundIndex++)) {}\n            isFirstPointAnchored = true;\n          }\n          if (!isLastPointAnchored && storyline[i].x > lastTargetPoint.x) {\n            rightBoundIndex = i;\n            isLastPointAnchored = true;\n          }\n        }\n      }\n      return [leftBoundIndex, rightBoundIndex];\n    }\n  }, {\n    key: 'isFlatPoint',\n    value: function isFlatPoint(storyline, i) {\n      if (storyline[i].y === -10000) {\n        return false;\n      }\n      if (i === 0) {\n        return true;\n      }\n      var leftI = i - 1;\n      while (leftI > 0 && storyline[leftI--].y === -10000) {}\n      var rightI = i + 1;\n      while (rightI > 0 && storyline[rightI++].y === -10000) {}\n      if (storyline[leftI + 1].y === storyline[i].y || storyline[rightI - 1].y === storyline[i].y) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'match',\n    value: function match(storyline, minFrame, maxFrame, config) {\n      this.syncrize(config);\n      var leftIndex = this.getLeftPointIndex(storyline, minFrame);\n      var leftPoint = storyline[leftIndex];\n      var rightIndex = this.getRightPointIndex(storyline, maxFrame);\n      var rightPoint = storyline[rightIndex];\n      var firstPoint = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"b\" /* Node */](this.fittedCurve[0].x, this.fittedCurve[0].y);\n      var n = this.fittedCurve.length - 1;\n      var lastPoint = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"b\" /* Node */](this.fittedCurve[n].x, this.fittedCurve[n].y);\n      // special case: ending point can be flexible adjusted\n      // if (rightIndex === storyline.length - 1) {\n      //   this.fittedCurve.forEach(point => {\n      //     point.x = leftPoint.x + (point.x - firstPoint.x)\n      //     point.y = leftPoint.y + (point.y - firstPoint.y)\n      //   })\n      // } else {\n      //   let xScale = Math.abs((rightPoint.x - leftPoint.x) / (lastPoint.x - firstPoint.x))\n      //   let yScale = Math.abs((rightPoint.y - leftPoint.y) / (lastPoint.y - firstPoint.y))\n      //   this.fittedCurve.forEach(point => {\n      //     point.x = leftPoint.x + xScale * (point.x - firstPoint.x)\n      //     point.y = leftPoint.y + yScale * (point.y - firstPoint.y)\n      //   })\n      // }\n      this.fittedCurve.forEach(function (point) {\n        point.x = leftPoint.x + (point.x - firstPoint.x);\n        point.y = leftPoint.y + (point.y - firstPoint.y);\n      });\n      return [leftIndex, rightIndex];\n    }\n  }, {\n    key: 'getLeftPointIndex',\n    value: function getLeftPointIndex(storyline, minFrame) {\n      var index = 2 * minFrame;\n      // filter un-qualified nodes\n      while (storyline[index++].y === -10000) {}\n      return index - 1;\n    }\n  }, {\n    key: 'getRightPointIndex',\n    value: function getRightPointIndex(storyline, maxFrame) {\n      var index = 2 * maxFrame + 1;\n      // filter un-qualified nodes\n      while (storyline[index--].y === -10000) {}\n      return index + 1;\n    }\n  }]);\n\n  return FitCurve;\n}();\n\n// For Testing\n\n\nvar LinearFitCurve = function (_FitCurve) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(LinearFitCurve, _FitCurve);\n\n  function LinearFitCurve(targetPath) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, LinearFitCurve);\n\n    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (LinearFitCurve.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(LinearFitCurve)).call(this, targetPath));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(LinearFitCurve, [{\n    key: 'fitCurve',\n    value: function fitCurve(point) {\n      for (var i = 0, len = this.fittedCurve.length - 1; i < len; i++) {\n        // locate at a range\n        if ((point.x - this.fittedCurve[i].x) * (point.x - this.fittedCurve[i + 1].x) <= 0) {\n          var tempK = (this.fittedCurve[i + 1].y - this.fittedCurve[i].y) / (this.fittedCurve[i + 1].x - this.fittedCurve[i].x);\n          var targetY = this.fittedCurve[i].y + tempK * (point.x - this.fittedCurve[i].x);\n          return point.y === -10000 ? -10000 : (targetY + ALPHA * point.y) / (1 + ALPHA);\n        }\n      }\n      return point.y;\n    }\n  }]);\n\n  return LinearFitCurve;\n}(FitCurve);\n\nvar CubicFitCurve = function (_FitCurve2) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(CubicFitCurve, _FitCurve2);\n\n  function CubicFitCurve(targetPath) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, CubicFitCurve);\n\n    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CubicFitCurve.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(CubicFitCurve)).call(this, targetPath));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(CubicFitCurve, [{\n    key: 'match',\n    value: function match(storyline, minFrame, maxFrame, config) {\n      // scale target path\n      var range = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default()(CubicFitCurve.prototype.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(CubicFitCurve.prototype), 'match', this).call(this, storyline, minFrame, maxFrame, config);\n      // cubic fit target path\n      var tmpArr = this.fittedCurve;\n      var inPoints = [];\n      this.fittedCurve.forEach(function (point) {\n        inPoints.push(point.x);\n        inPoints.push(point.y);\n      });\n      var samplesNum = 2;\n      var outPoints = Object(__WEBPACK_IMPORTED_MODULE_9_cardinal_spline_js__[\"getCurvePoints\"])(inPoints, 0.5, samplesNum);\n      this.fittedCurve = [];\n      for (var i = 0, len = outPoints.length / 2; i < len; i++) {\n        var tmpX = outPoints[2 * i];\n        var tmpY = outPoints[2 * i + 1];\n        var tmpNode = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"b\" /* Node */](tmpX, tmpY);\n        this.fittedCurve.push(tmpNode);\n      }\n      return range;\n    }\n  }, {\n    key: 'matchStoryline',\n    value: function matchStoryline(storyline, config) {\n      var range = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_get___default()(CubicFitCurve.prototype.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(CubicFitCurve.prototype), 'matchStoryline', this).call(this, storyline, config);\n      // cubic fit target path\n      var tmpArr = this.fittedCurve;\n      var inPoints = [];\n      this.fittedCurve.forEach(function (point) {\n        inPoints.push(point.x);\n        inPoints.push(point.y);\n      });\n      var samplesNum = 2;\n      var outPoints = Object(__WEBPACK_IMPORTED_MODULE_9_cardinal_spline_js__[\"getCurvePoints\"])(inPoints, 0.5, samplesNum);\n      this.fittedCurve = [];\n      for (var i = 0, len = outPoints.length / 2; i < len; i++) {\n        var tmpX = outPoints[2 * i];\n        var tmpY = outPoints[2 * i + 1];\n        var tmpNode = new __WEBPACK_IMPORTED_MODULE_8__BezierNode__[\"c\" /* StyleNode */](tmpX, tmpY);\n        this.fittedCurve.push(tmpNode);\n      }\n      return range;\n    }\n  }, {\n    key: 'fitCurve',\n    value: function fitCurve(point) {\n      for (var i = 0, len = this.fittedCurve.length - 1; i < len; i++) {\n        // locate at a range\n        if ((point.x - this.fittedCurve[i].x) * (point.x - this.fittedCurve[i + 1].x) <= 0) {\n          var tempK = (this.fittedCurve[i + 1].y - this.fittedCurve[i].y) / (this.fittedCurve[i + 1].x - this.fittedCurve[i].x);\n          var targetY = this.fittedCurve[i].y + tempK * (point.x - this.fittedCurve[i].x);\n          if (point.y === -10000) {\n            return -10000;\n          } else if (point.y === -5000) {\n            // console.log(targetY)\n            return targetY;\n          } else if (point.y > 0) {\n            return (targetY + ALPHA * point.y) / (1 + ALPHA);\n          }\n        }\n      }\n      return point.y;\n    }\n  }]);\n\n  return CubicFitCurve;\n}(FitCurve);\n\n/***/ }),\n\n/***/ \"ieIR\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CustomShape_vue__ = __webpack_require__(\"vDLA\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e9f6a0ce_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CustomShape_vue__ = __webpack_require__(\"fOqo\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_CustomShape_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_e9f6a0ce_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_CustomShape_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"ihPm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"svg-card\",style:(_vm.styleObject),on:{\"mousedown\":_vm.handleMousedown}},[_c('svg',{staticClass:\"svg-content\"},[_vm._l((_vm.objects),function(object,index){return (object.type !== 'text')?_c('visual-object',{key:index,attrs:{\"object\":object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount}}):_vm._e()}),_vm._v(\" \"),_c('frame-select',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount}}),_vm._v(\" \"),_c('scale-select',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount}}),_vm._v(\" \"),_c('path-select',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount}})],2),_vm._v(\" \"),_vm._l((_vm.textObjects),function(object,index){return _c('text-object',{key:index,attrs:{\"mouse\":_vm.mouse,\"object\":object,\"scrollX\":_vm.scrollX,\"scrollY\":_vm.scrollY}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"ikkP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_MoveFrame_vue__ = __webpack_require__(\"wEMg\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_33c04bfc_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_MoveFrame_vue__ = __webpack_require__(\"Ef3N\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_MoveFrame_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_33c04bfc_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_MoveFrame_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"ip5d\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'UndoTool',\n\n  methods: {\n    // only withdraw one step\n    handleClick: function handleClick() {\n      console.log('undo-tool');\n      this.$store.dispatch(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"A\" /* UNDO */]);\n      this.$store.dispatch('cancelReshape');\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"j73T\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mousetrap__ = __webpack_require__(\"knr3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mousetrap___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_mousetrap__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'GroupSelect',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number,\n    mouseupCount: Number\n  },\n\n  data: function data() {\n    return {\n      sPoints: [],\n      ePoints: [],\n      linesNum: 0,\n      mousedownNum: 0\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    isUsingFrameSelect: function isUsingFrameSelect() {\n      return this.isUsingBendTool || this.isUsingLinkTool;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingBendTool', 'isUsingLinkTool'])),\n\n  methods: {\n    restore: function restore() {\n      this.sPoints = [];\n      this.ePoints = [];\n      this.linesNum = 0;\n      this.mousedownNum = 0;\n    }\n  },\n\n  watch: {\n    mousedownCount: function mousedownCount(newVal) {\n      this.mousedownNum++;\n      if (this.mousedownNum % 2 === 1) {\n        this.sPoints.push({\n          x: this.mouseX,\n          y: this.mouseY\n        });\n      }\n      if (this.mousedownNum % 2 === 0) {\n        this.linesNum++;\n        this.ePoints.push({\n          x: this.mouseX,\n          y: this.mouseY\n        });\n      }\n    },\n    isUsingBendTool: function isUsingBendTool(newVal) {\n      if (newVal) {\n        this.restore();\n      } else {\n        this.$store.dispatch('straightenCharacter', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        });\n      }\n    },\n    isUsingSessionBreak: function isUsingSessionBreak(newVal) {\n      if (newVal) {\n        this.restore();\n      } else {\n        this.$store.dispatch('breakSession', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        });\n      }\n    },\n    isUsingLinkTool: function isUsingLinkTool(newVal) {\n      if (newVal) {\n        this.restore();\n      } else {\n        this.$store.dispatch('brushingCharacter', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        });\n      }\n    }\n  },\n\n  // IMPORTANT\n  mounted: function mounted() {\n    var _this = this;\n\n    var mousetrap = new __WEBPACK_IMPORTED_MODULE_2_mousetrap__();\n    mousetrap.bind('esc', function () {\n      if (_this.isUsingBendTool) {\n        _this.$store.dispatch('straightenCharacter', {\n          sPoints: _this.sPoints,\n          ePoints: _this.ePoints,\n          linesNum: _this.linesNum\n        });\n      }\n      // if (this.isUsingSessionBreak) {\n      //   this.$store.dispatch('breakSession', {\n      //     sPoints: this.sPoints,\n      //     ePoints: this.ePoints,\n      //     linesNum: this.linesNum\n      //   })\n      // }\n      if (_this.isUsingLinkTool) {\n        _this.$store.dispatch('brushingCharacter', {\n          sPoints: _this.sPoints,\n          ePoints: _this.ePoints,\n          linesNum: _this.linesNum\n        });\n      }\n      // if (this.isUsingTwine) {\n      //   this.$store.dispatch('twineCharacters', {\n      //     sPoints: this.sPoints,\n      //     ePoints: this.ePoints,\n      //     linesNum: this.linesNum\n      //   })\n      // }\n      _this.restore();\n    });\n  }\n});\n\n/***/ }),\n\n/***/ \"kcJT\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"l1bS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"rectangle\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"meyI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Echelon_vue__ = __webpack_require__(\"Kj9C\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0920a5a6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Echelon_vue__ = __webpack_require__(\"3jbm\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Echelon_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_0920a5a6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Echelon_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"nNI8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"side-panel\",style:(_vm.styleObject)},[_c('div',{staticClass:\"side-panel-header\"},[_vm._v(_vm._s(_vm.panelName === 'ShapePanel' ? 'ShapePanel' : _vm.panelName))]),_vm._v(\" \"),(_vm.panelName === 'ElementPanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('tree-panel')],1):_vm._e(),_vm._v(\" \"),(_vm.panelName === 'ShapePanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('shape-panel')],1):_vm._e(),_vm._v(\" \"),(_vm.panelName === 'StoryPanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('story-panel')],1):_vm._e(),_vm._v(\" \"),(_vm.panelName === 'TextPanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('text-panel')],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"nNzv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TextPanel_vue__ = __webpack_require__(\"g7oG\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_732e8251_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TextPanel_vue__ = __webpack_require__(\"PCxI\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"cPX6\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_TextPanel_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_732e8251_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_TextPanel_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"nbaU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"triangle\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"ncPy\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"pP5b\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"text-card\",style:(_vm.styleObject),on:{\"contextmenu\":_vm.handleContextMenu,\"click\":function($event){$event.stopPropagation();return _vm.handleClick($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMousedown($event)},\"mouseup\":_vm.handleMouseup}},[_vm._v(\"\\n  \"+_vm._s(_vm.content)+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"peX0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_StyleFrame_vue__ = __webpack_require__(\"gxps\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_04094dac_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_StyleFrame_vue__ = __webpack_require__(\"XW8H\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_StyleFrame_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_04094dac_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_StyleFrame_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"pq9Y\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(\"mvHQ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(\"NYxO\");\n\n\n//\n//\n//\n//\n//\n//\n\n\n// import { RoughDrawer } from '../../../types/RoughDrawer'\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'UploadTool',\n\n  computed: __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"c\" /* mapGetters */])(['request', 'history', 'storylines'])),\n\n  methods: {\n    handleClick: function handleClick(event) {\n      this.handleSaveSvg(event);\n      // this.handleSaveConfig()\n      // this.handleSaveHistory()\n      // RoughDrawer.draw(this.storylines, {\n      //   roughness: 1,\n      //   stroke: 'grey',\n      //   strokeWidth: 3,\n      //   simplification: 0.4\n      // })\n    },\n    handleSaveSvg: function handleSaveSvg(event) {\n      var svgEl = document.getElementsByClassName('svg-content')[0];\n      svgEl.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n      var svgData = svgEl.outerHTML;\n      var preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n';\n      var svgBlob = new Blob([preface, svgData], { type: 'image/svg+xml;charset=utf-8' });\n      var svgUrl = URL.createObjectURL(svgBlob);\n      var downloadLink = document.createElement('a');\n      downloadLink.href = svgUrl;\n      downloadLink.download = 'storyline.svg';\n      document.body.appendChild(downloadLink);\n      downloadLink.click();\n      document.body.removeChild(downloadLink);\n    },\n    handleSaveConfig: function handleSaveConfig() {\n      var configContent = this.request;\n      var str = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(configContent);\n      var dataUrl = 'data:application/json;charset=utf-8,' + encodeURIComponent(str);\n      var downloadLink = document.createElement('a');\n      downloadLink.href = dataUrl;\n      downloadLink.download = 'config.json';\n      document.body.appendChild(downloadLink);\n      downloadLink.click();\n      document.body.removeChild(downloadLink);\n    },\n    handleSaveHistory: function handleSaveHistory() {\n      var configContent = { storylines: this.storylines };\n      var str = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(configContent);\n      var dataUrl = 'data:application/json;charset=utf-8,' + encodeURIComponent(str);\n      var downloadLink = document.createElement('a');\n      downloadLink.href = dataUrl;\n      downloadLink.download = 'history.json';\n      document.body.appendChild(downloadLink);\n      downloadLink.click();\n      document.body.removeChild(downloadLink);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"puZo\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return StorySelector; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EmphasizeSelector; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return StoryReorder; });\n/* unused harmony export Merger */\n/* unused harmony export Spliter */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return FrameScaler; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return SessionMover; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map__ = __webpack_require__(\"ifoU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator__ = __webpack_require__(\"BO1k\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray__ = __webpack_require__(\"d7EF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__EquivalentIndexFinder__ = __webpack_require__(\"y8Pj\");\n\n\n\n\n\n\n\n\n\n\nvar StorySelector = function () {\n  function StorySelector(frameMap, sessionMap, characterMap) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, StorySelector);\n\n    this.frameMap = frameMap;\n    this.sessionMap = sessionMap;\n    this.characterMap = characterMap;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(StorySelector, [{\n    key: 'matchFrame',\n    value: function matchFrame(x, y) {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(this.frameMap), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _ref = _step.value;\n\n          var _ref2 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref, 2);\n\n          var frame = _ref2[0];\n          var range = _ref2[1];\n\n          if ((x - range[0]) * (x - range[1]) <= 0) {\n            return frame;\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return -1;\n    }\n  }, {\n    key: 'matchFrameUnBound',\n    value: function matchFrameUnBound(x, y) {\n      var minBound = 1e4;\n      var maxFrame = 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(this.frameMap), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _ref3 = _step2.value;\n\n          var _ref4 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref3, 2);\n\n          var frame = _ref4[0];\n          var range = _ref4[1];\n\n          minBound = range[0] < minBound ? range[0] : minBound;\n          maxFrame = frame;\n          if ((x - range[0]) * (x - range[1]) <= 0) {\n            return frame;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return x < minBound ? 0 : maxFrame;\n    }\n  }, {\n    key: 'matchCharacter',\n    value: function matchCharacter(x, y) {\n      var frame = this.matchFrame(x, y);\n      if (frame > -1) {\n        var characterYMap = this.characterMap.get(frame);\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterYMap), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _ref5 = _step3.value;\n\n            var _ref6 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref5, 2);\n\n            var characterId = _ref6[0];\n            var characterY = _ref6[1];\n\n            if (Math.abs(y - characterY) < 2) {\n              return characterId;\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }\n      return -1;\n    }\n  }, {\n    key: 'matchCharacterR',\n    value: function matchCharacterR(frame, y) {\n      if (frame > -1) {\n        var characterYMap = this.characterMap.get(frame);\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterYMap), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var _ref7 = _step4.value;\n\n            var _ref8 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref7, 2);\n\n            var characterId = _ref8[0];\n            var characterY = _ref8[1];\n\n            if (Math.abs(y - characterY) < 10) {\n              return characterId;\n            }\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n      }\n      return -1;\n    }\n  }, {\n    key: 'matchSession',\n    value: function matchSession(x, y) {\n      var frame = this.matchFrame(x, y);\n      if (frame > -1) {\n        var characterYMap = this.characterMap.get(frame);\n        var _iteratorNormalCompletion5 = true;\n        var _didIteratorError5 = false;\n        var _iteratorError5 = undefined;\n\n        try {\n          for (var _iterator5 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterYMap), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n            var _ref9 = _step5.value;\n\n            var _ref10 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref9, 2);\n\n            var characterId = _ref10[0];\n            var characterY = _ref10[1];\n\n            if (Math.abs(y - characterY) < 2) {\n              return this.sessionMap[characterId][frame];\n            }\n          }\n        } catch (err) {\n          _didIteratorError5 = true;\n          _iteratorError5 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion5 && _iterator5.return) {\n              _iterator5.return();\n            }\n          } finally {\n            if (_didIteratorError5) {\n              throw _iteratorError5;\n            }\n          }\n        }\n      } else {\n        return -1;\n      }\n    }\n  }]);\n\n  return StorySelector;\n}();\n\nvar EmphasizeSelector = function (_StorySelector) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(EmphasizeSelector, _StorySelector);\n\n  function EmphasizeSelector(rawStorylines, frameTable, sessionTable, characterTable, request, storyConfig) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, EmphasizeSelector);\n\n    var _this = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (EmphasizeSelector.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(EmphasizeSelector)).call(this, frameTable, sessionTable, characterTable));\n\n    _this.rawStorylines = rawStorylines;\n    _this.defaultInnerGap = request.sessionInnerGap;\n    _this.defaultOuterGap = request.sessionOuterGap;\n    _this.yScaleFactor = storyConfig.yScaleFactor;\n    _this.yBaseline = storyConfig.paddingTop;\n    return _this;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(EmphasizeSelector, [{\n    key: 'getSelectSessionList',\n    value: function getSelectSessionList(sArr, eArr) {\n      var startX = sArr[0].x < eArr[0].x ? sArr[0].x : eArr[0].x;\n      var endX = sArr[0].x < eArr[0].x ? sArr[0].x : eArr[0].x;\n      var sFrame = this.matchFrameUnBound(startX, 0);\n      var eFrame = this.matchFrameUnBound(endX, 0);\n      var topY = sArr[0].y < eArr[0].y ? sArr[0].y : eArr[0].y;\n      var bottomY = sArr[0].y > eArr[0].y ? sArr[0].y : eArr[0].y;\n      var sessionList = [];\n      for (var frame = sFrame; frame < eFrame + 1; frame++) {\n        for (var id = 0, len = this.rawStorylines.length; id < len; id++) {\n          var characterId = this.rawStorylines[id].character_id;\n          var positionY = this.rawStorylines[id].points[frame].item3 * this.yScaleFactor + this.yBaseline;\n          if (positionY >= topY && positionY <= bottomY) {\n            var sessionId = this.sessionMap[characterId][frame];\n            if (sessionId > -1 && sessionList.indexOf(sessionId) === -1) {\n              sessionList.push(sessionId);\n            }\n          }\n        }\n      }\n      return sessionList;\n    }\n  }, {\n    key: 'getScaleFactor',\n    value: function getScaleFactor(sArr, eArr) {\n      return Math.abs((eArr[1].y - sArr[1].y) / (eArr[0].y - sArr[0].y));\n    }\n  }, {\n    key: 'buildSessionConstraints',\n    value: function buildSessionConstraints(sArr, eArr) {\n      var sessionList = this.getSelectSessionList(sArr, eArr);\n      var scaleFactor = this.getScaleFactor(sArr, eArr);\n      var scaleInnerGap = this.defaultInnerGap * scaleFactor;\n      // let scaleOuterGap = this.defaultOuterGap * scaleFactor\n      var scaleOuterGap = Math.abs(eArr[1].y - sArr[1].y);\n      // debugger\n      var sessionInnerGaps = [];\n      sessionList.forEach(function (sessionId) {\n        sessionInnerGaps.push({\n          'item1': sessionId,\n          'item2': scaleInnerGap\n        });\n      });\n      var sessionOuterGaps = [];\n      // TODO: change current outergap\n      for (var i = 0, len = sessionList.length; i < len; i++) {\n        for (var j = i + 1; j < len; j++) {\n          sessionOuterGaps.push({\n            'item1': {\n              'item1': sessionList[i],\n              'item2': sessionList[j]\n            },\n            'item2': {\n              'item1': scaleOuterGap,\n              // 'item2': scaleOuterGap + 30\n              'item2': -1\n            }\n          });\n        }\n      }\n      return {\n        'sessionInnerGaps': sessionInnerGaps,\n        'sessionOuterGaps': sessionOuterGaps\n      };\n    }\n  }]);\n\n  return EmphasizeSelector;\n}(StorySelector);\n\nvar StoryReorder = function (_StorySelector2) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(StoryReorder, _StorySelector2);\n\n  function StoryReorder(storylines, storyConfig, frameMap, sessionMap, characterMap) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, StoryReorder);\n\n    var _this2 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (StoryReorder.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(StoryReorder)).call(this, frameMap, sessionMap, characterMap));\n\n    _this2.storylines = storylines;\n    _this2.storyConfig = storyConfig;\n    _this2.frame = -1;\n    _this2.character = -1;\n    _this2.session = -1;\n    // record initial y position of storyline\n    _this2.yBak1 = 0;\n    _this2.yBak2 = 0;\n    _this2.newY = 0;\n    return _this2;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(StoryReorder, [{\n    key: 'locate',\n    value: function locate(x, y) {\n      this.frame = this.matchFrame(x, y);\n      if (this.frame > -1) {\n        this.character = this.matchCharacterR(this.frame, y);\n        if (this.character > -1) {\n          // let characterYMap = this.characterMap.get(this.frame)\n          var storyline = this.storylines[this.character].points;\n          this.yBak1 = this.getPositionY(storyline, 0);\n          this.yBak2 = this.getPositionY(storyline, 1);\n        }\n      }\n    }\n  }, {\n    key: 'getPositionY',\n    value: function getPositionY(storyline, pos) {\n      var frame = this.frame;\n      if (frame > -1) {\n        var lIndex = 0;\n        var rIndex = 1;\n        if (frame > 0) {\n          // lIndex = 3 + 4 * (frame - 1) + 1\n          // rIndex = 3 + 4 * (frame - 1) + 2\n          lIndex = 2 * frame;\n          rIndex = lIndex + 1;\n        }\n        switch (pos) {\n          case 0:\n            return storyline[lIndex].y > -10000 ? storyline[lIndex].y : storyline[rIndex].y;\n          case 1:\n            return storyline[rIndex].y;\n        }\n      }\n      return -10000;\n    }\n  }, {\n    key: 'move',\n    value: function move(moveY) {\n      var yScaleFactor = this.storyConfig.yScaleFactor;\n      var yBaseline = this.storyConfig.paddingTop;\n      var scaleMoveY = moveY / yScaleFactor;\n      if (this.character > -1 && this.frame > -1) {\n        var storyline = this.storylines[this.character].points;\n        this.moveStoryline(storyline, scaleMoveY);\n        this.newY = ((this.yBak1 + this.yBak2) / 2 + scaleMoveY) * yScaleFactor + yBaseline;\n      }\n    }\n  }, {\n    key: 'moveStoryline',\n    value: function moveStoryline(storyline, moveY) {\n      var frame = this.frame;\n      if (frame > -1) {\n        var lIndex = 0;\n        var rIndex = 1;\n        if (frame > 0) {\n          // lIndex = 3 + 4 * (frame - 1) + 1\n          // rIndex = 3 + 4 * (frame - 1) + 2\n          lIndex = 2 * frame;\n          rIndex = lIndex + 1;\n        }\n        storyline[lIndex].y = storyline[lIndex].y > -10000 ? this.yBak1 + moveY : storyline[lIndex].y;\n        storyline[rIndex].y = this.yBak2 + moveY;\n      }\n    }\n  }, {\n    key: 'reorder',\n    value: function reorder() {\n      if (this.frame > -1) {\n        var cOrder = this.reorderCharacter();\n        var cSession = this.generateSessionOrder(cOrder.order);\n        var sOrder = this.reorderSession();\n        var sSession = this.generateSessionOrder(sOrder.order);\n        return this.isArrayEqual(cSession, sSession) ? cOrder : sOrder;\n      }\n    }\n  }, {\n    key: 'isArrayEqual',\n    value: function isArrayEqual(arr1, arr2) {\n      if (arr1.length === arr2.length) {\n        for (var i = 0, len = arr1.length; i < len; i++) {\n          if (arr1[i] !== arr2[i]) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'generateSessionOrder',\n    value: function generateSessionOrder(arr) {\n      var _this3 = this;\n\n      var cMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n      arr.forEach(function (pos, c) {\n        if (pos > -1) {\n          var sessionId = _this3.sessionMap[c][_this3.frame];\n          if (sessionId > -1) {\n            if (cMap.has(sessionId)) {\n              if (cMap.get(sessionId) > pos) {\n                cMap.set(sessionId, pos);\n              }\n            } else {\n              cMap.set(sessionId, pos);\n            }\n          }\n        }\n      });\n      var cArr = [];\n      var _iteratorNormalCompletion6 = true;\n      var _didIteratorError6 = false;\n      var _iteratorError6 = undefined;\n\n      try {\n        for (var _iterator6 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(cMap), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n          var _ref11 = _step6.value;\n\n          var _ref12 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref11, 2);\n\n          var session = _ref12[0];\n          var pos = _ref12[1];\n\n          cArr.push({\n            session: session,\n            pos: pos\n          });\n        }\n      } catch (err) {\n        _didIteratorError6 = true;\n        _iteratorError6 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion6 && _iterator6.return) {\n            _iterator6.return();\n          }\n        } finally {\n          if (_didIteratorError6) {\n            throw _iteratorError6;\n          }\n        }\n      }\n\n      cArr.sort(function (a, b) {\n        return a.pos - b.pos;\n      });\n      return cArr.map(function (v) {\n        return v.session;\n      });\n    }\n  }, {\n    key: 'reorderCharacter',\n    value: function reorderCharacter() {\n      var _this4 = this;\n\n      var finalList = [];\n      if (this.character > -1) {\n        (function () {\n          // init session nodes\n          var len = _this4.sessionMap.length;\n          var characterInSessionMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n          for (var character = 0; character < len; character++) {\n            var tmpSession = _this4.sessionMap[character][_this4.frame];\n            if (_this4.character === character) {\n              _this4.session = tmpSession;\n            }\n            if (tmpSession > -1) {\n              if (characterInSessionMap.has(tmpSession)) {\n                var tmpList = characterInSessionMap.get(tmpSession);\n                tmpList.push(character);\n              } else {\n                characterInSessionMap.set(tmpSession, [character]);\n              }\n            }\n          }\n          // sort characters of session node\n          var characterYMap = _this4.characterMap.get(_this4.frame);\n          var sessionYMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n\n          var _loop = function _loop(session, characters) {\n            var sortedCharacters = [];\n            var sessionY = 0;\n            characters.forEach(function (character) {\n              var yPos = _this4.character === character ? _this4.newY : characterYMap.get(character);\n              var flag = false;\n              for (var i = 0; i < sortedCharacters.length; i++) {\n                var tmpCharacter = sortedCharacters[i];\n                var tmpYPos = _this4.character === tmpCharacter ? _this4.newY : characterYMap.get(tmpCharacter);\n                if (yPos < tmpYPos) {\n                  sortedCharacters.splice(i, 0, character);\n                  flag = true;\n                  break;\n                }\n              }\n              if (!flag) {\n                sortedCharacters.push(character);\n              }\n              sessionY += characterYMap.get(character);\n            });\n            sessionY = sessionY / characters.length;\n            sessionYMap.set(session, sessionY);\n            characterInSessionMap.set(session, sortedCharacters);\n          };\n\n          var _iteratorNormalCompletion7 = true;\n          var _didIteratorError7 = false;\n          var _iteratorError7 = undefined;\n\n          try {\n            for (var _iterator7 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterInSessionMap), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n              var _ref13 = _step7.value;\n\n              var _ref14 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref13, 2);\n\n              var session = _ref14[0];\n              var characters = _ref14[1];\n\n              _loop(session, characters);\n            }\n            // sort session nodes\n          } catch (err) {\n            _didIteratorError7 = true;\n            _iteratorError7 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion7 && _iterator7.return) {\n                _iterator7.return();\n              }\n            } finally {\n              if (_didIteratorError7) {\n                throw _iteratorError7;\n              }\n            }\n          }\n\n          var sortedSessions = [];\n          var sortedList = [];\n          var _iteratorNormalCompletion8 = true;\n          var _didIteratorError8 = false;\n          var _iteratorError8 = undefined;\n\n          try {\n            for (var _iterator8 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterInSessionMap), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n              var _ref15 = _step8.value;\n\n              var _ref16 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref15, 2);\n\n              var session = _ref16[0];\n              var characters = _ref16[1];\n\n              var flag = false;\n              for (var i = 0; i < sortedSessions.length; i++) {\n                var _tmpSession = sortedSessions[i];\n                if (sessionYMap.get(session) < sessionYMap.get(_tmpSession)) {\n                  sortedSessions.splice(i, 0, session);\n                  sortedList.splice(i, 0, characters);\n                  flag = true;\n                  break;\n                }\n              }\n              if (!flag) {\n                sortedSessions.push(session);\n                sortedList.push(characters);\n              }\n            }\n            // sort characters\n          } catch (err) {\n            _didIteratorError8 = true;\n            _iteratorError8 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion8 && _iterator8.return) {\n                _iterator8.return();\n              }\n            } finally {\n              if (_didIteratorError8) {\n                throw _iteratorError8;\n              }\n            }\n          }\n\n          var unionList = [];\n          sortedList.forEach(function (tmpList) {\n            unionList = unionList.concat(tmpList);\n          });\n          // except rabbit case\n          var rabbitId = _this4.sessionMap.length - 1;\n          var _unionList = [];\n          unionList.forEach(function (id) {\n            if (id !== rabbitId) {\n              _unionList.push(id);\n            }\n          });\n          _unionList.splice(0, 0, rabbitId);\n          unionList = _unionList;\n          // console.log(unionList)\n          // format finalList\n          var finalMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n          unionList.forEach(function (character, pos) {\n            finalMap.set(character, pos);\n          });\n          for (var k = 0; k < len; k++) {\n            if (finalMap.has(k)) {\n              finalList.push(finalMap.get(k));\n            } else {\n              finalList.push(-1);\n            }\n          }\n        })();\n      }\n      return {\n        frame: this.frame,\n        order: finalList\n      };\n    }\n  }, {\n    key: 'reorderSession',\n    value: function reorderSession() {\n      var _this5 = this;\n\n      var finalList = [];\n      if (this.character > -1) {\n        (function () {\n          // init session nodes\n          var len = _this5.sessionMap.length;\n          var characterInSessionMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n          for (var character = 0; character < len; character++) {\n            var tmpSession = _this5.sessionMap[character][_this5.frame];\n            if (_this5.character === character) {\n              _this5.session = tmpSession;\n            }\n            if (tmpSession > -1) {\n              if (characterInSessionMap.has(tmpSession)) {\n                var tmpList = characterInSessionMap.get(tmpSession);\n                tmpList.push(character);\n              } else {\n                characterInSessionMap.set(tmpSession, [character]);\n              }\n            }\n          }\n          // sort characters of session node\n          var characterYMap = _this5.characterMap.get(_this5.frame);\n          var sessionYMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n\n          var _loop2 = function _loop2(session, characters) {\n            var sortedCharacters = [];\n            var sessionY = 0;\n            characters.forEach(function (character) {\n              var yPos = characterYMap.get(character);\n              var flag = false;\n              for (var i = 0; i < sortedCharacters.length; i++) {\n                var tmpCharacter = sortedCharacters[i];\n                var tmpYPos = characterYMap.get(tmpCharacter);\n                if (yPos < tmpYPos) {\n                  sortedCharacters.splice(i, 0, character);\n                  flag = true;\n                  break;\n                }\n              }\n              if (!flag) {\n                sortedCharacters.push(character);\n              }\n              sessionY += yPos;\n            });\n            sessionY = _this5.session === session ? _this5.newY : sessionY / characters.length;\n            sessionYMap.set(session, sessionY);\n            characterInSessionMap.set(session, sortedCharacters);\n          };\n\n          var _iteratorNormalCompletion9 = true;\n          var _didIteratorError9 = false;\n          var _iteratorError9 = undefined;\n\n          try {\n            for (var _iterator9 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterInSessionMap), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n              var _ref17 = _step9.value;\n\n              var _ref18 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref17, 2);\n\n              var session = _ref18[0];\n              var characters = _ref18[1];\n\n              _loop2(session, characters);\n            }\n            // sort session nodes\n          } catch (err) {\n            _didIteratorError9 = true;\n            _iteratorError9 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion9 && _iterator9.return) {\n                _iterator9.return();\n              }\n            } finally {\n              if (_didIteratorError9) {\n                throw _iteratorError9;\n              }\n            }\n          }\n\n          var sortedSessions = [];\n          var sortedList = [];\n          var _iteratorNormalCompletion10 = true;\n          var _didIteratorError10 = false;\n          var _iteratorError10 = undefined;\n\n          try {\n            for (var _iterator10 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(characterInSessionMap), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n              var _ref19 = _step10.value;\n\n              var _ref20 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref19, 2);\n\n              var session = _ref20[0];\n              var characters = _ref20[1];\n\n              var flag = false;\n              for (var i = 0; i < sortedSessions.length; i++) {\n                var _tmpSession2 = sortedSessions[i];\n                if (sessionYMap.get(session) < sessionYMap.get(_tmpSession2)) {\n                  sortedSessions.splice(i, 0, session);\n                  sortedList.splice(i, 0, characters);\n                  flag = true;\n                  break;\n                }\n              }\n              if (!flag) {\n                sortedSessions.push(session);\n                sortedList.push(characters);\n              }\n            }\n            // sort characters\n          } catch (err) {\n            _didIteratorError10 = true;\n            _iteratorError10 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion10 && _iterator10.return) {\n                _iterator10.return();\n              }\n            } finally {\n              if (_didIteratorError10) {\n                throw _iteratorError10;\n              }\n            }\n          }\n\n          var unionList = [];\n          sortedList.forEach(function (tmpList) {\n            unionList = unionList.concat(tmpList);\n          });\n          // except rabbit case\n          var rabbitId = _this5.sessionMap.length - 1;\n          var _unionList = [];\n          unionList.forEach(function (id) {\n            if (id !== rabbitId) {\n              _unionList.push(id);\n            }\n          });\n          _unionList.splice(0, 0, rabbitId);\n          unionList = _unionList;\n          // console.log(unionList)\n          // format finalList\n          var finalMap = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n          unionList.forEach(function (character, pos) {\n            finalMap.set(character, pos);\n          });\n          for (var k = 0; k < len; k++) {\n            if (finalMap.has(k)) {\n              finalList.push(finalMap.get(k));\n            } else {\n              finalList.push(-1);\n            }\n          }\n        })();\n      }\n      return {\n        frame: this.frame,\n        order: finalList\n      };\n    }\n  }]);\n\n  return StoryReorder;\n}(StorySelector);\n\nvar Merger = function (_StorySelector3) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(Merger, _StorySelector3);\n\n  function Merger(frameMap, sessionMap, characterMap) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, Merger);\n\n    return __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Merger.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(Merger)).call(this, frameMap, sessionMap, characterMap));\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(Merger, [{\n    key: 'merge',\n    value: function merge(x, y) {\n      var session = matchSession(x, y);\n      var result = void 0;\n      if (session !== -1) {\n        result = {\n          \"item1\": session,\n          \"item2\": 0\n        };\n      }\n\n      return result;\n    }\n  }]);\n\n  return Merger;\n}(StorySelector);\n\nvar Spliter = function (_StorySelector4) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(Spliter, _StorySelector4);\n\n  function Spliter(frameMap, sessionMap, characterMap, defaultInnerGap) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, Spliter);\n\n    var _this7 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Spliter.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(Spliter)).call(this, frameMap, sessionMap, characterMap));\n\n    _this7.defaultInnerGap = defaultInnerGap;\n    return _this7;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(Spliter, [{\n    key: 'split',\n    value: function split(x, y) {\n      var session = matchSession(x, y);\n      var result = void 0;\n      if (session !== -1) {\n        result = {\n          \"item1\": session,\n          \"item2\": this.defaultInnerGap\n        };\n      }\n\n      return result;\n    }\n  }]);\n\n  return Spliter;\n}(StorySelector);\n\nvar FrameScaler = function (_StorySelector5) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(FrameScaler, _StorySelector5);\n\n  function FrameScaler(frameMap, sessionMap, characterMap, frameSteps, curveSteps) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, FrameScaler);\n\n    var _this8 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (FrameScaler.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(FrameScaler)).call(this, frameMap, sessionMap, characterMap));\n\n    _this8.frameSteps = frameSteps;\n    _this8.curveSteps = curveSteps;\n    return _this8;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(FrameScaler, [{\n    key: 'scale',\n    value: function scale(sPoints, ePoints) {\n      var x1 = sPoints[0].x;\n      var x2 = ePoints[0].x;\n      var x3 = sPoints[1].x;\n      var x4 = ePoints[1].x;\n      var startFrame = this.matchFrameUnBound(x1, 0);\n      var endFrame = this.matchFrameUnBound(x2, 0);\n      var scaleFactor = Math.abs(x4 - x3) / Math.abs(x2 - x1);\n      if (x2 > x1) {\n        console.log('horizontal scale curve step');\n        this.scaleCurveStep(startFrame, endFrame, scaleFactor);\n      } else if (x2 < x1) {\n        console.log('horizontal scale frame step');\n        this.scaleFrameStep(startFrame, endFrame, scaleFactor);\n      }\n    }\n  }, {\n    key: 'scaleCurveStep',\n    value: function scaleCurveStep(startFrame, endFrame, scaleFactor) {\n      if (endFrame - 1 >= startFrame + 1) {\n        for (var frame = 0; frame < this.frameMap.size; frame++) {\n          // reduce selection sensitivity\n          if (startFrame + 1 <= frame && frame <= endFrame - 1) {\n            this.curveSteps[frame] *= scaleFactor;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'scaleFrameStep',\n    value: function scaleFrameStep(startFrame, endFrame, scaleFactor) {\n      if (startFrame - 1 >= endFrame + 1) {\n        for (var frame = 0; frame < this.frameMap.size; frame++) {\n          if (endFrame + 1 <= frame && frame <= startFrame - 1) {\n            this.frameSteps[frame] *= scaleFactor;\n          }\n        }\n      }\n    }\n  }]);\n\n  return FrameScaler;\n}(StorySelector);\n\nvar SessionMover = function (_StorySelector6) {\n  __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_inherits___default()(SessionMover, _StorySelector6);\n\n  function SessionMover(storylines, frameTable, sessionTable, characterTable) {\n    __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this, SessionMover);\n\n    var _this9 = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_possibleConstructorReturn___default()(this, (SessionMover.__proto__ || __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(SessionMover)).call(this, frameTable, sessionTable, characterTable));\n\n    _this9.storylines = storylines;\n    _this9.moveTable = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n    _this9.yBak1 = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n    _this9.yBak2 = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n    return _this9;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(SessionMover, [{\n    key: 'locate',\n    value: function locate(x, y) {\n      this.frame = this.matchFrame(x, y);\n      if (this.frame > -1) {\n        this.character = this.matchCharacterR(this.frame, y);\n        if (this.character > -1) {\n          var equivalentIndexFinder = new __WEBPACK_IMPORTED_MODULE_8__EquivalentIndexFinder__[\"a\" /* EquivalentIndexFinder */](this.sessionMap);\n          this.moveTable = equivalentIndexFinder.find(this.character, this.frame);\n          var _iteratorNormalCompletion11 = true;\n          var _didIteratorError11 = false;\n          var _iteratorError11 = undefined;\n\n          try {\n            for (var _iterator11 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(this.moveTable), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n              var _ref21 = _step11.value;\n\n              var _ref22 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref21, 2);\n\n              var character = _ref22[0];\n              var frameRange = _ref22[1];\n\n              var storyline = this.storylines[character].points;\n              var tmpFrame = frameRange[0];\n              var tmpLeftY = this.getPositionY(storyline, tmpFrame, 0);\n              var tmpRightY = this.getPositionY(storyline, tmpFrame, 1);\n              this.yBak1.set(character, tmpLeftY);\n              this.yBak2.set(character, tmpRightY);\n            }\n          } catch (err) {\n            _didIteratorError11 = true;\n            _iteratorError11 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion11 && _iterator11.return) {\n                _iterator11.return();\n              }\n            } finally {\n              if (_didIteratorError11) {\n                throw _iteratorError11;\n              }\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'getPositionY',\n    value: function getPositionY(storyline, frame, pos) {\n      if (frame > -1) {\n        var lIndex = 0;\n        var rIndex = 1;\n        if (frame > 0) {\n          lIndex = 2 * frame;\n          rIndex = lIndex + 1;\n        }\n        switch (pos) {\n          case 0:\n            return storyline[lIndex].y > -10000 ? storyline[lIndex].y : storyline[rIndex].y;\n          case 1:\n            return storyline[rIndex].y;\n        }\n      }\n      return -10000;\n    }\n  }, {\n    key: 'move',\n    value: function move(moveY) {\n      var frame = this.frame;\n      var character = this.character;\n      var moveTable = this.moveTable;\n      if (frame > -1 && character > -1) {\n        var _iteratorNormalCompletion12 = true;\n        var _didIteratorError12 = false;\n        var _iteratorError12 = undefined;\n\n        try {\n          for (var _iterator12 = __WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_get_iterator___default()(moveTable), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {\n            var _ref23 = _step12.value;\n\n            var _ref24 = __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_slicedToArray___default()(_ref23, 2);\n\n            var _character = _ref24[0];\n            var frameRange = _ref24[1];\n\n            this.moveStoryline(moveY, _character, frameRange);\n          }\n        } catch (err) {\n          _didIteratorError12 = true;\n          _iteratorError12 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion12 && _iterator12.return) {\n              _iterator12.return();\n            }\n          } finally {\n            if (_didIteratorError12) {\n              throw _iteratorError12;\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: 'moveStoryline',\n    value: function moveStoryline(moveY, character, frameRange) {\n      var _this10 = this;\n\n      var storyline = this.storylines[character].points;\n      frameRange.forEach(function (frame) {\n        var lIndex = 2 * frame;\n        var rIndex = lIndex + 1;\n        var tmpYBak1 = _this10.yBak1.get(character);\n        var tmpYBak2 = _this10.yBak2.get(character);\n        storyline[lIndex].y = storyline[lIndex].y > -10000 ? tmpYBak1 + moveY : storyline[lIndex].y;\n        storyline[rIndex].y = tmpYBak2 + moveY;\n        // update character map\n        var tmpY = (storyline[lIndex].y + storyline[rIndex].y) / 2;\n        var tmpMap = _this10.characterMap.get(frame);\n        tmpMap.set(character, tmpY);\n      });\n    }\n  }]);\n\n  return SessionMover;\n}(StorySelector);\n\n/***/ }),\n\n/***/ \"q+vf\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Rectangle_vue__ = __webpack_require__(\"IJeS\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_18251bbe_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Rectangle_vue__ = __webpack_require__(\"l1bS\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Rectangle_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_18251bbe_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Rectangle_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"qOY/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_c('div',{staticClass:\"tree-node-content\",class:{bold: _vm.isFolder},on:{\"dblclick\":_vm.changeVisible}},[(_vm.visible)?_c('p',[_vm._v(_vm._s(_vm.model.name)+\"\\n      \"),(_vm.isFolder)?_c('span',{on:{\"click\":_vm.toggle}},[_vm._v(\"[\"+_vm._s(_vm.open ? '-' : '+')+\"]\")]):_vm._e()]):_c('s',[_vm._v(_vm._s(_vm.model.name)+\"\\n      \"),(_vm.isFolder)?_c('span',{on:{\"click\":_vm.toggle}},[_vm._v(\"[\"+_vm._s(_vm.open ? '-' : '+')+\"]\")]):_vm._e()])]),_vm._v(\" \"),(_vm.isFolder)?_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.open),expression:\"open\"}]},_vm._l((_vm.model.children),function(model,index){return _c('tree-node',{key:index,staticClass:\"tree-node\",attrs:{\"model\":model}})}),1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"qTQm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_WorkSpace_vue__ = __webpack_require__(\"+ICT\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_eefc79a0_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_WorkSpace_vue__ = __webpack_require__(\"WZ6U\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"veAT\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_WorkSpace_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_eefc79a0_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_WorkSpace_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"rFRI\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"rNQu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingScaleTool),expression:\"isUsingScaleTool\"}],staticClass:\"red-select\"},_vm._l((_vm.linesNum),function(n){return _c('line',{key:n,attrs:{\"x1\":_vm.sPoints[n-1].x,\"y1\":_vm.sPoints[n-1].y,\"x2\":_vm.ePoints[n-1].x,\"y2\":_vm.ePoints[n-1].y,\"stroke\":\"red\",\"stroke-width\":\"3\"}})}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"rWw5\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return RegularShape; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CustomShape; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return Storyline; });\n/* unused harmony export ToolShape */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return Text; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__ = __webpack_require__(\"Zx67\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn__ = __webpack_require__(\"zwoO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits__ = __webpack_require__(\"Pf15\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__BezierNode__ = __webpack_require__(\"z4iF\");\n\n\n\n\n\n\n\nvar State = function () {\n  function State() {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, State);\n\n    this._visible = true;\n    this._scale = false;\n    this._reshape = false;\n    this._move = true;\n    this._select = false;\n    this._rotate = false;\n    this._create = false;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(State, [{\n    key: 'activateShow',\n    value: function activateShow() {\n      this._visible = true;\n    }\n  }, {\n    key: 'closeShow',\n    value: function closeShow() {\n      this._visible = false;\n    }\n  }, {\n    key: 'activateScale',\n    value: function activateScale() {\n      this._scale = true;\n    }\n  }, {\n    key: 'closeScale',\n    value: function closeScale() {\n      this._scale = false;\n    }\n  }, {\n    key: 'activateReshape',\n    value: function activateReshape() {\n      this._reshape = true;\n    }\n  }, {\n    key: 'closeReshape',\n    value: function closeReshape() {\n      this._reshape = false;\n    }\n  }, {\n    key: 'activateMove',\n    value: function activateMove() {\n      this._move = true;\n    }\n  }, {\n    key: 'closeMove',\n    value: function closeMove() {\n      this._move = false;\n    }\n  }, {\n    key: 'activateSelect',\n    value: function activateSelect() {\n      this._select = true;\n    }\n  }, {\n    key: 'closeSelect',\n    value: function closeSelect() {\n      this._select = false;\n    }\n  }, {\n    key: 'activateRotate',\n    value: function activateRotate() {\n      this._rotate = true;\n    }\n  }, {\n    key: 'closeRotate',\n    value: function closeRotate() {\n      this._rotate = false;\n    }\n  }, {\n    key: 'initState',\n    value: function initState() {\n      this._create = true;\n      this._move = true;\n      // this._visible = true\n    }\n  }, {\n    key: 'isShow',\n    get: function get() {\n      return this._visible;\n    }\n  }, {\n    key: 'isScale',\n    get: function get() {\n      return this._scale;\n    }\n  }, {\n    key: 'isReshape',\n    get: function get() {\n      return this._reshape;\n    }\n  }, {\n    key: 'isMove',\n    get: function get() {\n      return this._move;\n    }\n  }, {\n    key: 'isSelect',\n    get: function get() {\n      return this._select;\n    }\n  }, {\n    key: 'isRotate',\n    get: function get() {\n      return this._rotate;\n    }\n  }, {\n    key: 'isCreate',\n    get: function get() {\n      return this._create;\n    }\n  }]);\n\n  return State;\n}();\n\n// base object for shape and text\n\n\nvar VisualObject = function (_State) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(VisualObject, _State);\n\n  function VisualObject(type) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, VisualObject);\n\n    var _this = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (VisualObject.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(VisualObject)).call(this));\n\n    _this._id = -1;\n    _this._type = type;\n    _this._name = '';\n    _this._cardID = 0;\n    return _this;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(VisualObject, [{\n    key: 'name',\n    get: function get() {\n      return this._name;\n    },\n    set: function set(str) {\n      this._name = str;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this._type;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this._id;\n    },\n    set: function set(value) {\n      this._id = value;\n    }\n  }]);\n\n  return VisualObject;\n}(State);\n\n// base object for customshape, toolshape, and storyline\n\n\nvar Shape = function (_VisualObject) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(Shape, _VisualObject);\n\n  function Shape(type) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, Shape);\n\n    var _this2 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Shape.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Shape)).call(this, type));\n\n    _this2._frameX = 0;\n    _this2._frameY = 0;\n    _this2._frameW = 0;\n    _this2._frameH = 0;\n    _this2._positionX = 0;\n    _this2._positionY = 0;\n    _this2._offsetX = 0;\n    _this2._offsetY = 0;\n    _this2.geometry = {\n      nodes: []\n    };\n    return _this2;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(Shape, [{\n    key: 'move',\n    value: function move(moveX, moveY) {\n      // move position\n      this._positionX += moveX;\n      this._positionY += moveY;\n      // move frame\n      this._frameX += moveX;\n      this._frameY += moveY;\n      // move nodes\n      this.geometry.nodes.forEach(function (node) {\n        node.move(moveX, moveY);\n      });\n    }\n  }, {\n    key: 'rotate',\n    value: function rotate(sin, cos) {\n      var _this3 = this;\n\n      // rotate nodes\n      // debugger\n      this.geometry.nodes.forEach(function (node) {\n        node.rotate(sin, cos, _this3._positionX, _this3._positionY);\n      });\n      // update frame\n      this.updateFrame();\n      // this.updatePosition()\n    }\n  }, {\n    key: 'update',\n    value: function update(distX, distY) {\n      // update nodes\n      this.geometry.nodes.forEach(function (node) {\n        node.update(distX, distY);\n      });\n      // update frame and position\n      this.updateFrame();\n      this.updatePosition();\n    }\n  }, {\n    key: 'updateX',\n    value: function updateX(distX) {\n      this.geometry.nodes.forEach(function (node) {\n        if (node.y > -10000) {\n          node.updateX(distX);\n        }\n      });\n      this.updateFrame();\n      this.updatePosition();\n    }\n  }, {\n    key: 'updateY',\n    value: function updateY(distY) {\n      this.geometry.nodes.forEach(function (node) {\n        if (node.y > -10000) {\n          node.updateY(distY);\n        }\n      });\n      this.updateFrame();\n      this.updatePosition();\n    }\n  }, {\n    key: 'updateFrame',\n    value: function updateFrame() {\n      var xNodes = this.geometry.nodes.map(function (node) {\n        return node.x;\n      });\n      var yNodes = this.geometry.nodes.map(function (node) {\n        return node.y;\n      });\n      this._frameX = Math.min.apply(null, xNodes);\n      this._frameW = Math.max.apply(null, xNodes) - this._frameX;\n      this._frameY = Math.min.apply(null, yNodes);\n      this._frameH = Math.max.apply(null, yNodes) - this._frameY;\n    }\n  }, {\n    key: 'updatePosition',\n    value: function updatePosition() {\n      this._positionX = this._frameX + this._frameW / 2;\n      this._positionY = this._frameY + this._frameH / 2;\n    }\n\n    // TODO\n\n  }, {\n    key: 'scale',\n    value: function scale(_scale) {}\n  }, {\n    key: 'initTransform',\n    value: function initTransform() {\n      this.geometry.nodes.forEach(function (node) {\n        node.backup();\n      });\n    }\n  }, {\n    key: 'addBezierNode',\n    value: function addBezierNode(x, y, x2, y2) {\n      var bezierNode = new __WEBPACK_IMPORTED_MODULE_5__BezierNode__[\"a\" /* BezierNode */](x, y, x2, y2);\n      this.geometry.nodes.push(bezierNode);\n      return this.geometry.nodes.length - 1;\n    }\n  }, {\n    key: 'updateBezierNode',\n    value: function updateBezierNode(i, x, y, x2, y2) {\n      var bezierNode = new __WEBPACK_IMPORTED_MODULE_5__BezierNode__[\"a\" /* BezierNode */](x, y, x2, y2);\n      if (this.geometry.nodes.length < i) {\n        this.geometry.nodes.push(bezierNode);\n      } else {\n        this.geometry.nodes[i] = bezierNode;\n      }\n    }\n  }, {\n    key: 'deleteBezierNode',\n    value: function deleteBezierNode(i) {\n      this.geometry.nodes.splice(i, 1);\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      this.updateFrame();\n      this.updatePosition();\n      this.initState();\n    }\n  }, {\n    key: 'frameX',\n    get: function get() {\n      return this._frameX;\n    },\n    set: function set(value) {\n      this._frameX = value;\n    }\n  }, {\n    key: 'frameY',\n    get: function get() {\n      return this._frameY;\n    },\n    set: function set(value) {\n      this._frameY = value;\n    }\n  }, {\n    key: 'frameH',\n    get: function get() {\n      return this._frameH;\n    },\n    set: function set(value) {\n      this._frameH = value;\n    }\n  }, {\n    key: 'frameW',\n    get: function get() {\n      return this._frameW;\n    },\n    set: function set(value) {\n      this._frameW = value;\n    }\n  }, {\n    key: 'positionX',\n    get: function get() {\n      return this._positionX;\n    }\n  }, {\n    key: 'positionY',\n    get: function get() {\n      return this._positionY;\n    }\n  }, {\n    key: 'nodes',\n    get: function get() {\n      return this.geometry.nodes;\n    },\n    set: function set(arr) {\n      this.geometry.nodes = arr;\n    }\n  }]);\n\n  return Shape;\n}(VisualObject);\n\n// Regular Shape\n\n\nvar RegularShape = function (_Shape) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(RegularShape, _Shape);\n\n  function RegularShape(type) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, RegularShape);\n\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (RegularShape.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(RegularShape)).call(this, type));\n  }\n\n  return RegularShape;\n}(Shape);\n\n// Custom Shape\nvar CustomShape = function (_Shape2) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(CustomShape, _Shape2);\n\n  function CustomShape(type) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, CustomShape);\n\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (CustomShape.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(CustomShape)).call(this, type));\n  }\n\n  return CustomShape;\n}(Shape);\n\n// Storyline\nvar Storyline = function (_Shape3) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(Storyline, _Shape3);\n\n  function Storyline(type) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, Storyline);\n\n    var _this6 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Storyline.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Storyline)).call(this, type));\n\n    _this6._characterId = -1;\n    return _this6;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(Storyline, [{\n    key: 'init',\n    value: function init() {\n      this.updateFrame();\n      this.updatePosition();\n      this.initState();\n      this.closeMove();\n    }\n  }, {\n    key: 'characterId',\n    get: function get() {\n      return this._characterId;\n    },\n    set: function set(id) {\n      this._characterId = id;\n    }\n  }]);\n\n  return Storyline;\n}(Shape);\n\n// Tool Shape\nvar ToolShape = function (_Shape4) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(ToolShape, _Shape4);\n\n  function ToolShape(type) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, ToolShape);\n\n    return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (ToolShape.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(ToolShape)).call(this, type));\n  }\n\n  return ToolShape;\n}(Shape);\n\n// Text\nvar Text = function (_VisualObject2) {\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_inherits___default()(Text, _VisualObject2);\n\n  function Text(type, x, y) {\n    __WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this, Text);\n\n    var _this8 = __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_possibleConstructorReturn___default()(this, (Text.__proto__ || __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Text)).call(this, type));\n\n    _this8.frameX = x;\n    _this8.frameY = y;\n    _this8._frameX = x;\n    _this8._frameY = y;\n    _this8.frameW = 0;\n    _this8.frameH = 0;\n    _this8.fontSize = 12;\n    _this8.fontFamily = 'Arial';\n    _this8.color = 'black';\n    _this8.content = 'hello';\n    _this8.initState();\n    return _this8;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(Text, [{\n    key: 'updateX',\n    value: function updateX(newX) {\n      this.frameX = this._frameX + newX;\n    }\n  }, {\n    key: 'updateY',\n    value: function updateY(newY) {\n      this.frameY = this._frameY + newY;\n    }\n  }, {\n    key: 'beginMove',\n    value: function beginMove() {\n      this._frameX = this.frameX;\n      this._frameY = this.frameY;\n    }\n  }]);\n\n  return Text;\n}(VisualObject);\n\n/***/ }),\n\n/***/ \"rkOb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Bending'),expression:\"'Bending'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"segE\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"sfWC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Line_vue__ = __webpack_require__(\"aYsG\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5cc15f5a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Line_vue__ = __webpack_require__(\"/scB\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_Line_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_5cc15f5a_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_Line_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"sl5J\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faPaintBrush__ = __webpack_require__(\"dcMW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faPaintBrush___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faPaintBrush__);\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'CurveTool',\n\n  computed: {\n    icon: function icon() {\n      return __WEBPACK_IMPORTED_MODULE_0__fortawesome_fontawesome_free_solid_faPaintBrush___default.a;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"syNJ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mousetrap__ = __webpack_require__(\"knr3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_mousetrap___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_mousetrap__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'PathSelect',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number\n  },\n\n  data: function data() {\n    return {\n      points: []\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    pathD: function pathD() {\n      var d = '';\n      this.points.forEach(function (point, index) {\n        if (index === 0) {\n          d = 'M ' + point.x + ' ' + point.y;\n        } else if (index > 0) {\n          d += ' L ' + point.x + ' ' + point.y;\n        }\n      });\n      return d;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingCurveTool', 'selectedCharacters'])),\n\n  methods: {\n    restore: function restore() {\n      this.points = [];\n    }\n  },\n\n  watch: {\n    mousedownCount: function mousedownCount(newVal) {\n      if (this.selectedCharacters.length > 0) {\n        this.points.push({\n          x: this.mouseX,\n          y: this.mouseY\n        });\n      }\n    },\n    isUsingCurveTool: function isUsingCurveTool(newVal) {\n      if (newVal) {\n        this.restore();\n      } else if (this.points.length > 0) {\n        this.$store.dispatch('reshapeCharacters', this.points);\n      }\n    }\n  },\n\n  // IMPORTANT\n  mounted: function mounted() {\n    var _this = this;\n\n    var mousetrap = new __WEBPACK_IMPORTED_MODULE_2_mousetrap__();\n    mousetrap.bind('esc', function () {\n      _this.restore();\n    });\n  }\n});\n\n/***/ }),\n\n/***/ \"t2k0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_LinkTool_vue__ = __webpack_require__(\"SQ8e\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d2ea0aec_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_LinkTool_vue__ = __webpack_require__(\"Oky+\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_LinkTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_d2ea0aec_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_LinkTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"t3u6\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__types_VisualObject__ = __webpack_require__(\"rWw5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'PenTool',\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingPenTool'])),\n\n  watch: {\n    isUsingPenTool: function isUsingPenTool(newVal) {\n      if (newVal) {\n        var customShape = new __WEBPACK_IMPORTED_MODULE_2__types_VisualObject__[\"a\" /* CustomShape */]('customshape');\n        this.$store.commit(__WEBPACK_IMPORTED_MODULE_3__store_MutationTypes__[\"m\" /* INSERT_VISUAL_OBJECT */], customShape);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"tS/o\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"tbYJ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"u1Rf\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RectFrame_vue__ = __webpack_require__(\"H5jB\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1aee5186_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RectFrame_vue__ = __webpack_require__(\"gW7Q\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RectFrame_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_1aee5186_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_RectFrame_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"u4D7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"hexagon\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"uBqI\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_BendTool_vue__ = __webpack_require__(\"QsEu\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_89dde5b6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_BendTool_vue__ = __webpack_require__(\"rkOb\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_BendTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_89dde5b6_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_BendTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"uWrl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_UploadTool_vue__ = __webpack_require__(\"xGqh\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2bb215e4_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_UploadTool_vue__ = __webpack_require__(\"BAdX\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"rFRI\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_UploadTool_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_2bb215e4_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_UploadTool_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"upPS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_VisualObject_vue__ = __webpack_require__(\"7TG9\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_04f6f320_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_VisualObject_vue__ = __webpack_require__(\"i0bz\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_VisualObject_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_04f6f320_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_VisualObject_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"vDLA\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_BezierTool__ = __webpack_require__(\"cxcd\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_ControlNode__ = __webpack_require__(\"1N/p\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__types_VisualObject__ = __webpack_require__(\"rWw5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mousetrap__ = __webpack_require__(\"knr3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_mousetrap___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_mousetrap__);\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'CustomShape',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  data: function data() {\n    return {\n      draggedNodeId: -1,\n      xReferedToNode: 0,\n      yReferedToNode: 0\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    visible: function visible() {\n      return this.object.isShow;\n    },\n    reshape: function reshape() {\n      return this.object.isReshape;\n    },\n    created: function created() {\n      return this.object.isCreate;\n    },\n    pathD: function pathD() {\n      var _this = this;\n\n      var pathD = '';\n      this.nodes.forEach(function (node, index) {\n        if (index === 0) {\n          pathD += 'M ' + node.x + ' ' + node.y;\n        } else {\n          var lastNode = _this.nodes[index - 1];\n          pathD += ' C ' + lastNode.x3 + ' ' + lastNode.y3 + ' ' + node.x2 + ' ' + node.y2 + ' ' + node.x + ' ' + node.y;\n        }\n      });\n      pathD = this.nodes.length > 2 ? pathD += 'Z' : pathD;\n      return pathD;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['isUsingPenTool', 'objects'])),\n\n  methods: {\n    deleteNode: function deleteNode(index) {\n      this.object.deleteBezierNode(index);\n    }\n  },\n\n  watch: {\n    mousedownCount: function mousedownCount(newVal) {\n      if (!this.created) {\n        this.draggedNodeId = this.object.addBezierNode(this.mouseX, this.mouseY, this.mouseX, this.mouseY);\n        // debugger\n        this.nodes[this.draggedNodeId].activateBezierTool();\n      }\n    },\n    mouseupCount: function mouseupCount(newVal) {\n      if (!this.created && this.draggedNodeId > -1) {\n        this.nodes[this.draggedNodeId].closeBezierTool();\n      }\n    },\n    mouseX: function mouseX(newVal) {\n      if (!this.created) {\n        var ID = this.draggedNodeId;\n        if (ID > -1) {\n          var node = this.nodes[ID];\n          if (node.isActiveBezierTool) {\n            node.x2 = newVal;\n            node.x3 = 2 * node.x - newVal;\n          }\n        }\n      }\n    },\n    mouseY: function mouseY(newVal) {\n      if (!this.created) {\n        var ID = this.draggedNodeId;\n        if (ID > -1) {\n          var node = this.nodes[ID];\n          if (node.isActiveBezierTool) {\n            node.y2 = newVal;\n            node.y3 = 2 * node.y - newVal;\n          }\n        }\n      }\n    },\n    isUsingPenTool: function isUsingPenTool(newVal) {\n      if (!this.object.isCreate) {\n        this.object.init();\n      }\n    }\n  },\n\n  // IMPORTANT\n  mounted: function mounted() {\n    var _this2 = this;\n\n    var mousetrap = new __WEBPACK_IMPORTED_MODULE_6_mousetrap__();\n    mousetrap.bind('esc', function () {\n      _this2.object.init();\n      // begin next path\n      var customShape = new __WEBPACK_IMPORTED_MODULE_5__types_VisualObject__[\"a\" /* CustomShape */]('customshape');\n      _this2.$store.commit(__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__[\"m\" /* INSERT_VISUAL_OBJECT */], customShape);\n    });\n  },\n\n\n  components: {\n    beziertool: __WEBPACK_IMPORTED_MODULE_3__utils_BezierTool__[\"a\" /* default */],\n    controlnode: __WEBPACK_IMPORTED_MODULE_4__utils_ControlNode__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"veAT\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"vjNh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export UPDATE_OBJECTS_QUEUE */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return INSERT_VISUAL_OBJECT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return LOCATE_FOCUSOBJECT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return LOCATE_FOCUSOBJECT_STYLE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"y\", function() { return RESTORE_FOCUSOBJECT_STYLE; });\n/* unused harmony export ACTIVATE_OBJECT_CARD */\n/* unused harmony export RESTORE_OBJECT_CARD */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"q\", function() { return OPEN_FILL_COLOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return CLOSE_FILL_COLOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"s\", function() { return OPEN_STROKE_COLOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return CLOSE_STROKE_COLOR; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"u\", function() { return OPEN_TOOL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return CLOSE_TOOL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return CHANGE_TOOL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"x\", function() { return RESTORE_DEFAULT_TOOLS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"t\", function() { return OPEN_TEXT_TOOL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return CLOSE_TEXT_TOOL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return LOCATE_TEXT_OBJECT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"z\", function() { return RESTORE_TEXT_OBJECT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"w\", function() { return RESTORE_DEFAULT_OBJECTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"r\", function() { return OPEN_PANEL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return CLOSE_PANEL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ACTIVATE_PANEL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return CHANGE_PANEL; });\n/* unused harmony export SET_UPLOAD_IDENTIFIER */\n/* unused harmony export INSERT_STORYLINE */\n/* unused harmony export SET_STORYLINE_SESSIONTABLE */\n/* unused harmony export GROUP_CHARACTERS */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"B\", function() { return UPDATE_REQUEST; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"C\", function() { return UPDATE_STORYLINE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return ADD_FOCUSING_CHARACTER; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return ADD_SELECTING_CHARACTER; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return CLEAR_SELECTING_CHARACTERS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"v\", function() { return RECORD_TARGET_PATH; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"D\", function() { return UPDATE_SVG_CARD; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"A\", function() { return UNDO; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return ADD_HISTORY; });\nvar UPDATE_OBJECTS_QUEUE = 'UPDATE_OBJECTS_QUEUE';\nvar INSERT_VISUAL_OBJECT = 'INSERT_VISUAL_OBJECT';\nvar LOCATE_FOCUSOBJECT = 'LOCATE_FOCUSOBJECT';\nvar LOCATE_FOCUSOBJECT_STYLE = 'LOCATE_FOCUSOBJECT_STYLE';\nvar RESTORE_FOCUSOBJECT_STYLE = 'RESTORE_FOCUSOBJECT_STYLE';\nvar ACTIVATE_OBJECT_CARD = 'ACTIVATE_OBJECT_CARD';\nvar RESTORE_OBJECT_CARD = 'RESTORE_OBJECT_CARD';\nvar OPEN_FILL_COLOR = 'OPEN_FILL_COLOR';\nvar CLOSE_FILL_COLOR = 'CLOSE_FILL_COLOR';\nvar OPEN_STROKE_COLOR = 'OPEN_STROKE_COLOR';\nvar CLOSE_STROKE_COLOR = 'CLOSE_STROKE_COLOR';\n\nvar OPEN_TOOL = 'OPEN_TOOL';\nvar CLOSE_TOOL = 'CLOSE_TOOL';\nvar CHANGE_TOOL = 'CHANGE_TOOL';\nvar RESTORE_DEFAULT_TOOLS = 'RESTORE_DEFAULT_TOOLS';\nvar OPEN_TEXT_TOOL = 'OPEN_TEXT_TOOL';\nvar CLOSE_TEXT_TOOL = 'CLOSE_TEXT_TOOL';\n\nvar LOCATE_TEXT_OBJECT = 'LOCATE_TEXT_OBJECT';\nvar RESTORE_TEXT_OBJECT = 'RESTORE_TEXT_OBJECT';\n\nvar RESTORE_DEFAULT_OBJECTS = 'RESTORE_DEFAULT_OBJECTS';\n\nvar OPEN_PANEL = 'OPEN_PANEL';\nvar CLOSE_PANEL = 'CLOSE_PANEL';\nvar ACTIVATE_PANEL = 'ACTIVATE_PANEL';\nvar CHANGE_PANEL = 'CHANGE_PANEL';\n\nvar SET_UPLOAD_IDENTIFIER = 'SET_UPLOAD_IDENTIFIER';\nvar INSERT_STORYLINE = 'INSERT_STORYLINE';\nvar SET_STORYLINE_SESSIONTABLE = 'SET_STORYLINE_SESSIONTABLE';\nvar GROUP_CHARACTERS = 'GROUP_CHARACTERS';\nvar UPDATE_REQUEST = 'UPDATE_REQUEST';\nvar UPDATE_STORYLINE = 'UPDATE_STORYLINE';\nvar ADD_FOCUSING_CHARACTER = 'ADD_FOCUSING_CHARACTER';\nvar ADD_SELECTING_CHARACTER = 'ADD_SELECTING_CHARACTER';\nvar CLEAR_SELECTING_CHARACTERS = 'CLEAR_SELECTING_CHARACTERS';\n\nvar RECORD_TARGET_PATH = 'RECORD_TARGET_PATH';\nvar UPDATE_SVG_CARD = 'UPDATE_SVG_CARD';\n\nvar UNDO = 'UNDO';\nvar ADD_HISTORY = 'ADD_HISTORY';\n\n/***/ }),\n\n/***/ \"vqau\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ToolItem__ = __webpack_require__(\"gsLH\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__tools_UploadTool__ = __webpack_require__(\"uWrl\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tools_SaveTool__ = __webpack_require__(\"Yq7S\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tools_UndoTool__ = __webpack_require__(\"BYOV\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ToolBox',\n\n  data: function data() {\n    return {\n      usingToolName: '',\n      toolItems: ['OrderTool', 'BendTool', 'ScaleTool', 'CurveTool'\n      // 'LinkTool'\n      // 'PenTool'\n      ]\n    };\n  },\n\n\n  methods: {\n    enterTool: function enterTool(toolName) {\n      this.usingToolName = toolName;\n    },\n    cancelTool: function cancelTool(toolName) {\n      this.usingToolName = '';\n    }\n  },\n\n  components: {\n    'upload-tool': __WEBPACK_IMPORTED_MODULE_1__tools_UploadTool__[\"a\" /* default */],\n    'save-tool': __WEBPACK_IMPORTED_MODULE_2__tools_SaveTool__[\"a\" /* default */],\n    'undo-tool': __WEBPACK_IMPORTED_MODULE_3__tools_UndoTool__[\"a\" /* default */],\n    'tool-item': __WEBPACK_IMPORTED_MODULE_0__ToolItem__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"wEMg\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__RotateFrame__ = __webpack_require__(\"dZkg\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'MoveFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data: function data() {\n    return {\n      moveDragged: false,\n      objectDragged: false,\n      recordedMouseX: 0,\n      recordedMouseY: 0,\n      displacementX: 0,\n      displacementY: 0\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    objectDraggedLocked: function objectDraggedLocked() {\n      return !this.object.isMove;\n    },\n    moveDraggedLocked: function moveDraggedLocked() {\n      return !this.object.isSelected;\n    },\n    xScaleFactor: function xScaleFactor() {\n      return this.storyConfig.xScaleFactor;\n    },\n    yScaleFactor: function yScaleFactor() {\n      return this.storyConfig.yScaleFactor;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapGetters */])(['storyConfig'])),\n\n  methods: {\n    handleMousedown: function handleMousedown() {\n      if (event.button === 0) {\n        this.recordedMouseX = this.mouseX;\n        this.recordedMouseY = this.mouseY;\n        this.object.initTransform();\n        this.objectDragged = true;\n      }\n    },\n    handleMouseup: function handleMouseup() {\n      if (event.button === 0) {\n        this.lastDisplacementX = this.displacementX;\n        this.lastDisplacementY = this.displacementY;\n        this.objectDragged = false;\n      }\n      this.object.updateFrame();\n      this.object.updatePosition();\n    },\n    handleContextmenu: function handleContextmenu() {\n      this.$store.commit(__WEBPACK_IMPORTED_MODULE_2__store_MutationTypes__[\"n\" /* LOCATE_FOCUSOBJECT */], this.object);\n      return false;\n    }\n  },\n\n  watch: {\n    mouseX: function mouseX(newVal) {\n      this.displacementX = newVal - this.recordedMouseX;\n      // drag move\n      if (this.objectDragged && !this.objectDraggedLocked) {\n        if (this.object.type === 'storyline') {\n          this.object.updateX(this.displacementX / this.xScaleFactor);\n        } else {\n          this.object.updateX(this.displacementX);\n        }\n      }\n    },\n    mouseY: function mouseY(newVal) {\n      this.displacementY = newVal - this.recordedMouseY;\n      if (this.objectDragged && !this.objectDraggedLocked) {\n        if (this.object.type === 'storyline') {\n          this.object.updateY(this.displacementY / this.yScaleFactor);\n        } else {\n          this.object.updateY(this.displacementY);\n        }\n      }\n    }\n  },\n\n  components: {\n    rotateframe: __WEBPACK_IMPORTED_MODULE_3__RotateFrame__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"xGqh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__ = __webpack_require__(\"vjNh\");\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'UploadTool',\n\n  methods: {\n    handleUpload: function handleUpload(event) {\n      var _this = this;\n\n      var file = event.target.files[0];\n      var type = file.name.split('.')[1];\n      if (type === 'xml') {\n        this.$store.dispatch('uploadXMLFile', file);\n      } else if (type === 'json') {\n        var reader = new FileReader();\n        reader.onloadend = function (event) {\n          if (event.target.readyState === FileReader.DONE) {\n            // console.log(event.target.result, typeof (event.target.result))\n            var request = JSON.parse(event.target.result);\n            _this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"x\" /* RESTORE_DEFAULT_TOOLS */]);\n            _this.$store.commit(__WEBPACK_IMPORTED_MODULE_0__store_MutationTypes__[\"B\" /* UPDATE_REQUEST */], request);\n            _this.$store.dispatch('updateStoryline');\n          }\n        };\n        reader.readAsText(file);\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ \"xJD8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_toolbox_ToolBox__ = __webpack_require__(\"YRYm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_workspace_WorkSpace__ = __webpack_require__(\"qTQm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_panelbar_SidePanelBar__ = __webpack_require__(\"NZGm\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_panelbar_SidePanel__ = __webpack_require__(\"/vB+\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'App',\n\n  mounted: function mounted() {\n    // \n    document.oncontextmenu = function () {\n      return false;\n    };\n  },\n\n\n  components: {\n    'tool-box': __WEBPACK_IMPORTED_MODULE_0__components_toolbox_ToolBox__[\"a\" /* default */],\n    'workspace': __WEBPACK_IMPORTED_MODULE_1__components_workspace_WorkSpace__[\"a\" /* default */],\n    'side-panelbar': __WEBPACK_IMPORTED_MODULE_2__components_panelbar_SidePanelBar__[\"a\" /* default */],\n    'side-panel': __WEBPACK_IMPORTED_MODULE_3__components_panelbar_SidePanel__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"y8Pj\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return EquivalentIndexFinder; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map__ = __webpack_require__(\"ifoU\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__);\n\n\n\nvar EquivalentIndexFinder = function () {\n  function EquivalentIndexFinder(sessionTable) {\n    __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this, EquivalentIndexFinder);\n\n    this.sessionTable = sessionTable;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(EquivalentIndexFinder, [{\n    key: \"find\",\n    value: function find(character, timeframe) {\n      var result = new __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_map___default.a();\n      var sessionId = this.sessionTable[character][timeframe];\n      if (sessionId === -1 || sessionId === 9999) {\n        return result;\n      }\n      var timeframeCount = this.sessionTable[0].length;\n      for (var i = 0; i < this.sessionTable.length; i++) {\n        var timeframeRange = [];\n        for (var j = 0; j < timeframeCount; j++) {\n          if (this.sessionTable[i][j] === sessionId) {\n            timeframeRange.push(j);\n          }\n        }\n        if (timeframeRange.length > 0) {\n          result.set(i, timeframeRange);\n        }\n      }\n      return result;\n    }\n  }]);\n\n  return EquivalentIndexFinder;\n}();\n\n/***/ }),\n\n/***/ \"yO/d\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__ = __webpack_require__(\"bOdI\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__MutationTypes__ = __webpack_require__(\"vjNh\");\n\n\nvar _mutations;\n\n\n\nvar state = {\n  isUsingOrderTool: false,\n  isUsingScaleTool: false,\n  isUsingBendTool: false,\n  isUsingCurveTool: false,\n  isUsingLinkTool: false,\n  isUsingUndoTool: false,\n  isUsingTextTool: false,\n  isUsingPenTool: false\n};\n\nvar getters = {\n  isUsingOrderTool: function isUsingOrderTool(state) {\n    return state.isUsingOrderTool;\n  },\n  isUsingBendTool: function isUsingBendTool(state) {\n    return state.isUsingBendTool;\n  },\n  isUsingScaleTool: function isUsingScaleTool(state) {\n    return state.isUsingScaleTool;\n  },\n  isUsingCurveTool: function isUsingCurveTool(state) {\n    return state.isUsingCurveTool;\n  },\n  isUsingLinkTool: function isUsingLinkTool(state) {\n    return state.isUsingLinkTool;\n  },\n  isUsingUndoTool: function isUsingUndoTool(state) {\n    return state.isUsingUndoTool;\n  },\n  isUsingTextTool: function isUsingTextTool(state) {\n    return state.isUsingTextTool;\n  },\n  isUsingPenTool: function isUsingPenTool(state) {\n    return state.isUsingPenTool;\n  }\n};\n\nvar mutations = (_mutations = {}, __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"u\" /* OPEN_TOOL */], function (state, toolName) {\n  switch (toolName) {\n    case 'OrderTool':\n      state.isUsingOrderTool = true;\n      break;\n    case 'BendTool':\n      state.isUsingBendTool = true;\n      break;\n    case 'ScaleTool':\n      state.isUsingScaleTool = true;\n      break;\n    case 'CurveTool':\n      state.isUsingCurveTool = true;\n      break;\n    case 'LinkTool':\n      state.isUsingLinkTool = true;\n      break;\n    case 'PenTool':\n      state.isUsingPenTool = true;\n      break;\n    case 'TextTool':\n      state.isUsingTextTool = true;\n      break;\n    default:\n      break;\n  }\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"l\" /* CLOSE_TOOL */], function (state, toolName) {\n  switch (toolName) {\n    case 'OrderTool':\n      state.isUsingOrderTool = false;\n      break;\n    case 'BendTool':\n      state.isUsingBendTool = false;\n      break;\n    case 'ScaleTool':\n      state.isUsingScaleTool = false;\n      break;\n    case 'CurveTool':\n      state.isUsingCurveTool = false;\n      break;\n    case 'LinkTool':\n      state.isUsingLinkTool = false;\n      break;\n    case 'PenTool':\n      state.isUsingPenTool = false;\n      break;\n    case 'TextTool':\n      state.isUsingTextTool = false;\n      break;\n    default:\n      break;\n  }\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"x\" /* RESTORE_DEFAULT_TOOLS */], function (state) {\n  state.isUsingOrderTool = false;\n  state.isUsingBendTool = false;\n  state.isUsingScaleTool = false;\n  state.isUsingCurveTool = false;\n  state.isUsingLinkTool = false;\n  state.isUsingUndoTool = false;\n  state.isUsingTextTool = false;\n  state.isUsingPenTool = false;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"t\" /* OPEN_TEXT_TOOL */], function (state) {\n  state.isUsingTextTool = true;\n}), __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_defineProperty___default()(_mutations, __WEBPACK_IMPORTED_MODULE_1__MutationTypes__[\"k\" /* CLOSE_TEXT_TOOL */], function (state) {\n  state.isUsingTextTool = false;\n}), _mutations);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  state: state,\n  getters: getters,\n  mutations: mutations\n});\n\n/***/ }),\n\n/***/ \"yezX\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(\"Dd8w\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex__ = __webpack_require__(\"NYxO\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__RectFrame__ = __webpack_require__(\"u1Rf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__StyleFrame__ = __webpack_require__(\"peX0\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'ScaleFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data: function data() {\n    return {\n      copyNodes: []\n    };\n  },\n\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    nodes: function nodes() {\n      return this.object.nodes;\n    },\n    frameX: function frameX() {\n      return this.object.frameX;\n    },\n    frameY: function frameY() {\n      return this.object.frameY;\n    },\n    frameW: function frameW() {\n      return this.object.frameW;\n    },\n    frameH: function frameH() {\n      return this.object.frameH;\n    },\n    isScaleShow: function isScaleShow() {\n      if (this.object.type === 'storyline') {\n        return false;\n      }\n      if (this.object.type === 'line') {\n        return false;\n      }\n      if (this.nodes.length < 3) {\n        return false;\n      }\n      return this.object.isScale;\n    }\n  }, Object(__WEBPACK_IMPORTED_MODULE_2_vuex__[\"c\" /* mapGetters */])(['isUsingPenTool'])),\n\n  methods: {\n    handleMousedown: function handleMousedown() {\n      if (event.button === 0) {\n        this.mousedownTime = Date.now();\n        this.copyNodes = __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.cloneDeep(this.nodes);\n      }\n    },\n    handleMouseup: function handleMouseup() {\n      if (event.button === 0) {\n        var _mousedownTime = Date.now();\n        var clickTime = _mousedownTime - this.mousedownTime;\n        if (clickTime < 200) {\n          if (!this.object.isReshape) {\n            if (this.object.isScale) {\n              this.object.closeScale();\n              if (this.object.type !== 'storyline') {\n                this.object.activateMove();\n              }\n            } else {\n              if (!this.isUsingPenTool) {\n                this.object.activateScale();\n              }\n              this.object.closeMove();\n            }\n          }\n        } else {\n          this.mousedownTime = _mousedownTime;\n        }\n      }\n    },\n    scaleByX: function scaleByX(val) {\n      var scaleRatio = val / this.frameW;\n      var anchor = this.frameX + this.frameW;\n      this.updateNodeX(scaleRatio, anchor);\n    },\n    scaleByY: function scaleByY(val) {\n      var scaleRatio = val / this.frameH;\n      var anchor = this.frameY + this.frameH;\n      this.updateNodeY(scaleRatio, anchor);\n    },\n    scaleByW: function scaleByW(val) {\n      var scaleRatio = val / this.frameW;\n      var anchor = this.frameX;\n      this.updateNodeX(scaleRatio, anchor);\n    },\n    scaleByH: function scaleByH(val) {\n      var scaleRatio = val / this.frameH;\n      var anchor = this.frameY;\n      this.updateNodeY(scaleRatio, anchor);\n    },\n    updateNodeX: function updateNodeX(ratio, anchor) {\n      var _this = this;\n\n      this.nodes.forEach(function (node, index) {\n        var copyNode = _this.copyNodes[index];\n        node._x = (copyNode._x - anchor) * ratio + anchor;\n        node._x2 = (copyNode._x2 - anchor) * ratio + anchor;\n        node._x3 = (copyNode._x3 - anchor) * ratio + anchor;\n      });\n    },\n    updateNodeY: function updateNodeY(ratio, anchor) {\n      var _this2 = this;\n\n      this.nodes.forEach(function (node, index) {\n        var copyNode = _this2.copyNodes[index];\n        node._y = (copyNode._y - anchor) * ratio + anchor;\n        node._y2 = (copyNode._y2 - anchor) * ratio + anchor;\n        node._y3 = (copyNode._y3 - anchor) * ratio + anchor;\n      });\n    },\n    updateFrame: function updateFrame(val) {\n      this.object.frameX = val.x;\n      this.object.frameY = val.y;\n      this.object.frameW = val.w;\n      this.object.frameH = val.h;\n      // update position\n      this.object.updatePosition();\n    },\n    rotate: function rotate(_ref) {\n      var sin = _ref.sin,\n          cos = _ref.cos;\n\n      this.$emit('rotate', { sin: sin, cos: cos });\n    }\n  },\n\n  components: {\n    styleframe: __WEBPACK_IMPORTED_MODULE_4__StyleFrame__[\"a\" /* default */],\n    rectframe: __WEBPACK_IMPORTED_MODULE_3__RectFrame__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ \"yq3R\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"storyline\",on:{\"mousedown\":_vm.handleMousedown,\"mouseup\":_vm.handleMouseup}},[_c('path',{attrs:{\"fill\":\"none\",\"d\":_vm.pathD,\"stroke\":\"white\",\"stroke-width\":\"10\",\"opacity\":\"1\"}}),_vm._v(\" \"),_c('path',{attrs:{\"fill\":\"none\",\"d\":_vm.pathD,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_c('text',{staticClass:\"label\",attrs:{\"text-anchor\":\"end\",\"font-size\":\"16\",\"x\":_vm.labelX,\"y\":_vm.labelY},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleSelecting($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.beginDragMoving($event)},\"mouseup\":_vm.endDragMoving}},[_vm._v(\"\\n    \"+_vm._s(_vm.character)+\"\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"z4iF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BezierNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return Node; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return StyleNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__ = __webpack_require__(\"Zrlr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__ = __webpack_require__(\"wxAW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass__);\n\n\nvar BezierNode = function () {\n  function BezierNode(x, y, x2, y2) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, BezierNode);\n\n    this._activate = false;\n    this._last = null;\n    // point\n    this._x = x;\n    this._y = y;\n    this._xBak = x;\n    this._yBak = y;\n    // control point\n    this._x2 = x2;\n    this._y2 = y2;\n    this._xBak2 = x2;\n    this._yBak2 = y2;\n    // reversed control point\n    this._x3 = 2 * x2 - x;\n    this._y3 = 2 * y2 - y;\n    this._xBak3 = this._x3;\n    this._yBak3 = this._y3;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(BezierNode, [{\n    key: \"backup\",\n\n    // backup (x, y, x2, y2) before updating and rotating\n    value: function backup() {\n      this._xBak = this._x;\n      this._yBak = this._y;\n      this._xBak2 = this._x2;\n      this._yBak2 = this._y2;\n      this._xBak3 = this._x3;\n      this._yBak3 = this._y3;\n    }\n  }, {\n    key: \"activateBezierTool\",\n    value: function activateBezierTool() {\n      this._activate = true;\n    }\n  }, {\n    key: \"closeBezierTool\",\n    value: function closeBezierTool() {\n      this._activate = false;\n    }\n  }, {\n    key: \"move\",\n    value: function move(moveX, moveY) {\n      this._x += moveX;\n      this._y += moveY;\n      this._x2 += moveX;\n      this._y2 += moveY;\n      this._x3 += moveX;\n      this._y3 += moveY;\n    }\n  }, {\n    key: \"update\",\n    value: function update(distX, distY) {\n      this._x = this._xBak + distX;\n      this._y = this._yBak + distY;\n      this._x2 = this._xBak2 + distX;\n      this._y2 = this._yBak2 + distY;\n      this._x3 = this._xBak3 + distX;\n      this._y3 = this._yBak3 + distY;\n    }\n  }, {\n    key: \"updateX\",\n    value: function updateX(distX) {\n      this._x = this._xBak + distX;\n      this._x2 = this._xBak2 + distX;\n      this._x3 = this._xBak3 + distX;\n    }\n  }, {\n    key: \"updateY\",\n    value: function updateY(distY) {\n      this._y = this._yBak + distY;\n      this._y2 = this._yBak2 + distY;\n      this._y3 = this._yBak3 + distY;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(sin, cos, refX, refY) {\n      this._x = (this._xBak - refX) * cos - (this._yBak - refY) * sin + refX;\n      this._y = (this._xBak - refX) * sin + (this._yBak - refY) * cos + refY;\n      this._x2 = (this._xBak2 - refX) * cos - (this._yBak2 - refY) * sin + refX;\n      this._y2 = (this._xBak2 - refX) * sin + (this._yBak2 - refY) * cos + refY;\n      this._x3 = (this._xBak3 - refX) * cos - (this._yBak3 - refY) * sin + refX;\n      this._y3 = (this._xBak3 - refX) * sin + (this._yBak3 - refY) * cos + refY;\n    }\n  }, {\n    key: \"isActiveBezierTool\",\n    get: function get() {\n      return this._activate;\n    }\n  }, {\n    key: \"lastNode\",\n    set: function set(node) {\n      this._last = node;\n    },\n    get: function get() {\n      return this._last;\n    }\n  }, {\n    key: \"x\",\n    get: function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n    }\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n    }\n  }, {\n    key: \"x2\",\n    get: function get() {\n      return this._x2;\n    },\n    set: function set(value) {\n      this._x2 = value;\n    }\n  }, {\n    key: \"y2\",\n    get: function get() {\n      return this._y2;\n    },\n    set: function set(value) {\n      this._y2 = value;\n    }\n  }, {\n    key: \"x3\",\n    set: function set(value) {\n      this._x3 = value;\n    },\n    get: function get() {\n      return this._x3;\n    }\n  }, {\n    key: \"y3\",\n    get: function get() {\n      return this._y3;\n    },\n    set: function set(value) {\n      this._y3 = value;\n    }\n  }]);\n\n  return BezierNode;\n}();\n\nvar Node = function () {\n  function Node(x, y) {\n    __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, Node);\n\n    this.x = x;\n    this._xBak = x;\n    this.y = y;\n    this._yBak = y;\n    this.isOptimized = false;\n    this.isOptimizedTmp = false;\n  }\n\n  __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_createClass___default()(Node, [{\n    key: \"backup\",\n    value: function backup() {\n      this._xBak = this.x;\n      this._yBak = this.y;\n    }\n  }, {\n    key: \"move\",\n    value: function move(moveX, moveY) {\n      this.x += moveX;\n      this.y += moveY;\n    }\n  }, {\n    key: \"updateX\",\n    value: function updateX(distX) {\n      this.x = this._xBak + distX;\n    }\n  }, {\n    key: \"updateY\",\n    value: function updateY(distY) {\n      this.y = this.y > -10000 ? this._yBak + distY : -10000;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(sin, cos, refX, refY) {\n      this.x = (this._xBak - refX) * cos - (this._yBak - refY) * sin + refX;\n      this.y = (this._xBak - refX) * sin + (this._yBak - refY) * cos + refY;\n    }\n  }]);\n\n  return Node;\n}();\n\nvar StyleNode = function StyleNode(x, y) {\n  __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default()(this, StyleNode);\n\n  this.x = x;\n  this.y = y;\n};\n\n/***/ }),\n\n/***/ \"zr+e\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingCurveTool),expression:\"isUsingCurveTool\"}],staticClass:\"path-select\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":\"none\",\"stroke\":\"blue\",\"stroke-width\":\"5\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.64383804c8a90248b6d8.js","<template>\n  <div id=\"workspace\"\n    @click=\"handleClick($event)\"\n    @contextmenu=\"handleContextmenu($event)\"\n    @mousemove=\"handleMousemove($event)\"\n    @mousedown=\"handleMousedown($event)\"\n    @mouseup=\"handleMouseup($event)\">\n    <div class=\"painting\" @scroll=\"handleScroll\">\n      <svg-card v-for=\"card in paintingCardList\"\n        :key=\"card.id\"\n        :cardObject=\"card\"\n        :scrollX=\"paintingScrollX\"\n        :scrollY=\"paintingScrollY\"\n        :mouse=\"mouse\">\n      </svg-card>\n    </div>\n    <context-menu v-show=\"isShowContextMenu\"\n      :scrollX=\"paintingScrollX\"\n      :scrollY=\"paintingScrollY\"\n      :recordX=\"contextMenuPositionX\"\n      :recordY=\"contextMenuPositionY\">\n    </context-menu>\n    <color-picker class=\"fillpicker\" v-model=\"objectStyle.fill\" v-show=\"isUsingFillColor\"></color-picker>\n    <color-picker class=\"strokepicker\" v-model=\"objectStyle.stroke\" v-show=\"isUsingStrokeColor\"></color-picker>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapActions } from 'vuex'\nimport { Sketch } from 'vue-color'\nimport ContextMenu from '../menus/ContextMenu'\nimport SVGCard from './cards/SVGCard'\n\nexport default {\n  name: 'WorkSpace',\n\n  data () {\n    return {\n      paintingEl: null,\n      isShowContextMenu: false,\n      contextMenuPositionX: 0,\n      contextMenuPositionY: 0,\n      paintingScrollX: 0,\n      paintingScrollY: 0,\n      mouse: {\n        positionX: 0,\n        positionY: 0,\n        upCount: 0,\n        downCount: 0\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'isUsingFillColor',\n      'isUsingStrokeColor',\n      'paintingCardList',\n      'objectStyle',\n      'objects'\n    ])\n  },\n\n  mounted () {\n    this.$store.dispatch('addPaintingCard')\n    this.paintingEl = document.getElementById('painting')\n  },\n\n  methods: {\n    handleMousemove () {\n      this.mouse.positionX = event.clientX\n      this.mouse.positionY = event.clientY\n    },\n\n    handleMousedown () {\n      if (event.button === 0) {\n        this.mouse.downCount++\n      }\n    },\n\n    handleMouseup () {\n      if (event.button === 0) {\n        this.mouse.upCount++\n      }\n    },\n\n    handleContextmenu () {\n      this.contextMenuPositionX = this.mouse.positionX\n      this.contextMenuPositionY = this.mouse.positionY\n      this.isShowContextMenu = true\n    },\n\n    handleClick () {\n      this.isShowContextMenu = false\n    },\n\n    handleScroll () {\n      this.paintingScrollX = this.paintingEl.scrollLeft\n      this.paintingScrollY = this.paintingEl.scrollTop\n    },\n\n    ...mapActions([\n      'addPaintingCard'\n    ])\n  },\n\n  components: {\n    'context-menu': ContextMenu,\n    'color-picker': Sketch,\n    'svg-card': SVGCard\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../assets/Constants.scss';\n\n#workspace {\n  width: 100vw;\n  height: 100vh;\n  background: $GRAY1D;\n  // overflow: hidden;\n\n  .painting {\n    width: 100%;\n    height: 100%;\n    background-attachment: scroll;\n    // overflow: hidden;\n  \n    &::-webkit-scrollbar {\n      width: 12px;\n      height: 12px;\n    }\n  \n    &::-webkit-scrollbar-track {\n      background: $GRAY3;\n    }\n  \n    &::-webkit-scrollbar-thumb {\n      background: $THEME_BLUE;\n    }\n  }\n\n  .vc-sketch {\n    position: absolute;\n    left: 350px;\n  }\n\n  .fillpicker {\n    top: 85px;\n  }\n\n  .strokepicker {\n    top: 115px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/WorkSpace.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"line\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5cc15f5a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Line.vue\n// module id = /scB\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ccfb464\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SidePanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SidePanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SidePanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ccfb464\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SidePanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/SidePanel.vue\n// module id = /vB+\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Triangle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Triangle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1d69c3fe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Triangle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Triangle.vue\n// module id = 0d6M\n// module chunks = 1","<template>\n  <li>\n    <div class=\"tree-node-content\"\n      :class=\"{bold: isFolder}\"\n      @dblclick=\"changeVisible\">\n      <p v-if=\"visible\">{{ model.name }}\n        <span v-if=\"isFolder\" @click=\"toggle\">[{{ open ? '-' : '+' }}]</span>\n      </p>\n      <s v-else>{{ model.name }}\n        <span v-if=\"isFolder\" @click=\"toggle\">[{{ open ? '-' : '+' }}]</span>\n      </s>\n    </div>\n    <ul v-show=\"open\" v-if=\"isFolder\">\n      <tree-node\n        class=\"tree-node\"\n        v-for=\"(model, index) in model.children\"\n        :key=\"index\"\n        :model=\"model\">\n      </tree-node>\n      <!-- <li class=\"add\" @click=\"addChild\">+</li> -->\n    </ul>\n  </li>\n</template>\n\n<script>\nexport default {\n  name: 'TreeNode',\n\n  props: {\n    model: Object\n  },\n\n  data () {\n    return {\n      open: false\n    }\n  },\n\n  computed: {\n    isFolder () {\n      return this.model.children && this.model.children.length\n    },\n\n    visible () {\n      return this.model.isShow\n    }\n  },\n\n  methods: {\n    toggle () {\n      if (this.isFolder) {\n        this.open = !this.open\n      }\n    },\n\n    changeVisible () {\n      if (this.model.isShow) {\n        this.model.closeShow()\n      } else {\n        this.model.activateShow()\n      }\n    },\n\n    changeType () {\n      if (!this.isFolder) {\n        this.$set(this.model, 'children', [])\n        this.addChild()\n        this.open = true\n      }\n    },\n\n    addChild () {\n      this.model.children.push({\n        name: 'new element'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.tree-node-content {\n  font-size: 24px;\n  p {\n    margin: 0px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/panels/TreePanel/TreeNode.vue","<template>\n  <g class=\"triangle\" v-show=\"visible\">\n    <path :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <controlnode v-for=\"(node, index) in nodes\"\n      v-show=\"reshape\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mouseupCount=\"mouseupCount\"\n      :mousedownCount=\"mousedownCount\"\n      :node=\"node\"\n      :key=\"index\">\n    </controlnode>\n  </g>\n</template>\n\n<script>\nimport ControlNode from '../utils/ControlNode'\n\nexport default {\n  name: 'Triangle',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  mounted () {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(150, 50, 150, 50)\n      this.object.addBezierNode(50, 150, 50, 150)\n      this.object.addBezierNode(250, 150, 250, 150)\n      this.object.init()\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          pathD += ` L ${node.x} ${node.y}`\n        }\n      })\n      if (this.nodes.length > 2) {\n        pathD += ` L ${this.nodes[0].x} ${this.nodes[0].y}`\n      }\n      return pathD\n    }\n  },\n\n  components: {\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Triangle.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ControlNode.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ControlNode.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0becab1a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ControlNode.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/utils/ControlNode.vue\n// module id = 1N/p\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"side-panel-bar\"},[_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleElementPanel}},[_c('icon',{attrs:{\"name\":\"navicon\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Element\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleShapePanel}},[_c('icon',{attrs:{\"name\":\"map\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Shape\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleTextPanel}},[_c('icon',{attrs:{\"name\":\"text-width\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Text\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"side-panel-item\",on:{\"click\":_vm.handleStoryPanel}},[_c('icon',{attrs:{\"name\":\"file-text\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"Story\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1bd8595a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/SidePanelBar.vue\n// module id = 24zk\n// module chunks = 1","<template>\n  <div  v-tooltip=\"'Scaling'\">\n    <font-awesome-icon :icon=\"icon\" />\n  </div>\n</template>\n\n<script>\nimport Icon from '@fortawesome/fontawesome-free-solid/faExpandArrowsAlt'\nexport default {\n  name: 'ScaleTool',\n\n  computed: {\n    icon () {\n      return Icon\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/ScaleTool.vue","<template>\n  <div class=\"text-card\"\n    v-show=\"visible\"\n    @contextmenu=\"handleContextMenu\"\n    @click.stop=\"handleClick\"\n    @mousedown.stop=\"handleMousedown\"\n    @mouseup=\"handleMouseup\"\n    :style=\"styleObject\">\n    {{ content }}\n  </div>\n</template>\n\n<script>\nimport { LOCATE_TEXT_OBJECT, RESTORE_TEXT_OBJECT, LOCATE_FOCUSOBJECT } from '../../../store/MutationTypes'\n\nexport default {\n  name: 'TextObject',\n\n  props: {\n    mouse: Object,\n    object: Object,\n    scrollX: Number,\n    scrollY: Number\n  },\n\n  data () {\n    return {\n      isLocated: false,\n      isDragged: false,\n      recordMouseX: 0,\n      recordMouseY: 0\n    }\n  },\n\n  methods: {\n    handleClick () {\n      this.isLocated = !this.isLocated\n      if (this.isLocated) {\n        this.$store.commit(LOCATE_TEXT_OBJECT, this.object)\n      } else {\n        this.$store.commit(RESTORE_TEXT_OBJECT)\n      }\n    },\n\n    handleMousedown () {\n      if (event.button === 0) {\n        this.isDragged = true\n        this.object.beginMove()\n        this.recordMouseX = this.mouseX\n        this.recordMouseY = this.mouseY\n      }\n    },\n\n    handleMouseup () {\n      if (event.button === 0) {\n        this.isDragged = false\n      }\n    },\n\n    handleContextMenu () {\n      this.$store.commit(LOCATE_FOCUSOBJECT, this.object)\n    }\n  },\n\n  computed: {\n    visible () {\n      return this.object.isShow\n    },\n\n    mouseX () {\n      return this.mouse.positionX + this.scrollX\n    },\n\n    mouseY () {\n      return this.mouse.positionY + this.scrollY\n    },\n\n    x () {\n      return this.object.frameX\n    },\n\n    y () {\n      return this.object.frameY\n    },\n\n    w () {\n      return this.object.frameW\n    },\n\n    h () {\n      return this.object.frameH\n    },\n\n    fontSize () {\n      return this.object.fontSize\n    },\n\n    fontFamily () {\n      return this.object.fontFamily\n    },\n\n    color () {\n      return this.object.color\n    },\n\n    content () {\n      return this.object.content\n    },\n\n    styleObject () {\n      return {\n        top: `${this.y}px`,\n        left: `${this.x}px`,\n        fontSize: `${this.fontSize}px`,\n        fontFamily: `${this.fontFamily}`,\n        color: `${this.color}`,\n        cursor: 'move'\n      }\n    }\n  },\n\n  watch: {\n    mouseX (newVal) {\n      if (this.isDragged) {\n        let displacementX = newVal - this.recordMouseX\n        this.object.updateX(displacementX)\n      }\n    },\n\n    mouseY (newVal) {\n      if (this.isDragged) {\n        let displacementY = newVal - this.recordMouseY\n        this.object.updateY(displacementY)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\ndiv.text-card {\n  position: absolute;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/objects/TextObject.vue","<template>\n  <g class=\"red-select\" v-show=\"isUsingScaleTool\">\n    <line v-for=\"n in linesNum\"\n      :x1=\"sPoints[n-1].x\"\n      :y1=\"sPoints[n-1].y\"\n      :x2=\"ePoints[n-1].x\"\n      :y2=\"ePoints[n-1].y\"\n      stroke=\"red\"\n      stroke-width=\"3\"\n      :key=\"n\">\n    </line>\n  </g>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport * as Mousetrap from 'mousetrap'\n\nexport default {\n  name: 'ScaleSelect',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number\n  },\n\n  data () {\n    return {\n      sPoints: [],\n      ePoints: [],\n      linesNum: 0,\n      mousedownNum: 0\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'isUsingScaleTool'\n    ])\n  },\n\n  methods: {\n    reset () {\n      this.sPoints = []\n      this.ePoints = []\n      this.linesNum = 0\n      this.mousedownNum = 0\n    }\n  },\n\n  mounted () {\n    let mousetrap = new Mousetrap()\n    mousetrap.bind('esc', () => {\n      if (this.linesNum === 2) {\n        if (this.isUsingScaleTool) {\n          this.$store.dispatch('scaleSession', {\n            sPoints: this.sPoints,\n            ePoints: this.ePoints,\n            linesNum: this.linesNum\n          })\n        }\n        // if (this.isUsingHorizontalScale) {\n        //   this.$store.dispatch('scaleSessionHorizontal', {\n        //     sPoints: this.sPoints,\n        //     ePoints: this.ePoints,\n        //     linesNum: this.linesNum\n        //   })\n        // }\n      }\n      this.reset()\n    })\n  },\n\n  watch: {\n    mousedownCount (newVal) {\n      if (this.isUsingScaleTool) {\n        this.mousedownNum++\n        if (this.mousedownNum % 2 === 1) {\n          this.sPoints.push({\n            x: this.mouseX,\n            y: this.mouseY\n          })\n        }\n        if (this.mousedownNum % 2 === 0) {\n          this.linesNum ++\n          this.ePoints.push({\n            x: this.mouseX,\n            y: this.mouseY\n          })\n        }\n        // if (this.mousedownNum === 5) {\n        //   if (this.isUsingScaleTool) {\n        //     this.$store.dispatch('scaleSession', {\n        //       sPoints: this.sPoints,\n        //       ePoints: this.ePoints,\n        //       linesNum: this.linesNum\n        //     })\n        //   }\n        //   if (this.isUsingHorizontalScale) {\n        //     this.$store.dispatch('scaleSessionHorizontal', {\n        //       sPoints: this.sPoints,\n        //       ePoints: this.ePoints,\n        //       linesNum: this.linesNum\n        //     })\n        //   }\n        //   this.reset()\n        // }\n      }\n    },\n\n    isUsingScaleTool (newVal) {\n      if (newVal) {\n        this.reset()\n      } else if (this.linesNum === 2) {\n        this.$store.dispatch('scaleSession', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        })\n      }\n    }\n\n    // isUsingHorizontalScale (newVal) {\n    //   if (newVal) {\n    //     this.reset()\n    //   } else if (this.linesNum === 2) {\n    //     this.$store.dispatch('scaleSessionHorizontal', {\n    //       sPoints: this.sPoints,\n    //       ePoints: this.ePoints,\n    //       linesNum: this.linesNum\n    //     })\n    //   }\n    // }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/utils/ScaleSelect.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"echelon\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0920a5a6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Echelon.vue\n// module id = 3jbm\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.modelVal),expression:\"modelVal\"}],style:(_vm.styleObject),attrs:{\"type\":\"range\",\"min\":_vm.min,\"max\":_vm.max,\"step\":_vm.step},domProps:{\"value\":(_vm.modelVal)},on:{\"__r\":function($event){_vm.modelVal=$event.target.value}}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-270c3e90\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/utils/ToolSlider.vue\n// module id = 3zLJ\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Hexagon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Hexagon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-45149f60\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Hexagon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Hexagon.vue\n// module id = 4IQm\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16a62adc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./StoryPanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StoryPanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StoryPanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16a62adc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StoryPanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/panels/StoryPanel.vue\n// module id = 58s9\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"BezierTool\"},[_c('line',{attrs:{\"stroke\":\"black\",\"x1\":_vm.node.x3,\"y1\":_vm.node.y3,\"x2\":_vm.node.x2,\"y2\":_vm.node.y2,\"stroke-width\":\"1\"}}),_vm._v(\" \"),_c('circle',{attrs:{\"r\":\"3\",\"cx\":_vm.node.x3,\"cy\":_vm.node.y3,\"fill\":\"black\"},on:{\"mousedown\":_vm.handleMousedownForSymmetryBezierNode}}),_vm._v(\" \"),_c('circle',{attrs:{\"r\":\"3\",\"cx\":_vm.node.x2,\"cy\":_vm.node.y2,\"fill\":\"black\"},on:{\"mousedown\":_vm.handleMousedownForBezierNode}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5bfb6b88\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/utils/BezierTool.vue\n// module id = 5G65\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Curving'),expression:\"'Curving'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-56e4ee1f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/CurveTool.vue\n// module id = 5H7z\n// module chunks = 1","<template>\n  <!-- <icon name=\"rotate-right\" scale=1.2></icon> -->\n  <div  v-tooltip=\"'Shifting'\">\n    <font-awesome-icon :icon=\"icon\" />\n  </div>\n</template>\n\n<script>\n  import faSort from '@fortawesome/fontawesome-free-solid/faSort'\n\n  export default {\n    name: 'OrderTool',\n\n    computed: {\n      icon () {\n        return faSort\n      }\n    }\n  }\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/OrderTool.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('icon',{attrs:{\"name\":\"pencil\",\"scale\":\"1.5\"}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-38e98cbf\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/PenTool.vue\n// module id = 6zYt\n// module chunks = 1","import { Node } from './BezierNode'\nimport { SplineTwister } from './SplineTwister';\n\nexport class StoryLoader {\n  constructor (data, sessionTable, frameSteps, curveSteps, storyConfig) {\n    this.data = data\n    this.sessionTable = sessionTable\n    this.frameSteps = frameSteps\n    this.curveSteps = curveSteps\n    this.positionXTable = new Map()\n    this.storyConfig = storyConfig\n    this.generatePositionXTable()\n  }\n  \n  generateStorylines () {\n    let storylinesData = this.data\n    let storylines = []\n    for (let i=0, len=storylinesData.length; i<len; i++) {\n      let tmpStoryline = storylinesData[i]\n      let tmpStorylineSegments = tmpStoryline.points\n      let tmpStorylinePoints = this.generateSingleStorylinePair(tmpStorylineSegments, i)\n      storylines.push({\n        name: tmpStoryline.name,\n        characterId: tmpStoryline.character_id,\n        points: tmpStorylinePoints\n      })\n    }\n    let twister = new SplineTwister(storylines, this.sessionTable, this.storyConfig)\n    twister.twist(1)\n    return storylines\n  }\n\n  generateSingleStorylinePair (storylineSegments, characterId) {\n    let bezierNodes = []\n    // do transform here!\n    let xBaseline = this.storyConfig.paddingLeft\n    let yBaseline = this.storyConfig.paddingTop\n    let xScaleFactor = this.storyConfig.xScaleFactor\n    let yScaleFactor = this.storyConfig.yScaleFactor\n    for (let i=0, len=storylineSegments.length; i<len; i++) {\n      let tmpSegment = storylineSegments[i]\n      let sTimeStamp = this.getPositionX(i, true) * xScaleFactor + xBaseline\n      let eTimeStamp = this.getPositionX(i, false) * xScaleFactor + xBaseline\n      let yPos = tmpSegment.item3 > 0 ? tmpSegment.item3 * yScaleFactor + yBaseline : -10000\n      let sYPos = this.isStepPoint(i, characterId) ? -5000 : yPos\n      let sNode = new Node(sTimeStamp, sYPos)\n      let eNode = new Node(eTimeStamp, yPos)\n      bezierNodes.push(sNode)\n      bezierNodes.push(eNode)\n    }\n    return bezierNodes\n  }\n\n  isStepPoint (frame, characterId) {\n    // debugger\n    let storylineSegments = this.data[characterId].points\n    let frameCount = storylineSegments.length\n    if (frame === 0 || frame === frameCount - 1) {\n      return false\n    }\n    // must be in session whose characters less than 3\n    let session = this.sessionTable[characterId][frame]\n    let sessionCount = 0\n    for (let c = 0, len = this.sessionTable.length; c < len; c++) {\n      let tmpSession = this.sessionTable[c][frame]\n      if (tmpSession === session) {\n        sessionCount++\n      }\n    }\n    if (sessionCount > 2) {\n      return false\n    }\n    let lastSegmentY = storylineSegments[frame - 1].item3\n    let nextSegmentY = storylineSegments[frame + 1].item3\n    let currSegmentY = storylineSegments[frame].item3\n    // let threshold = 10\n    let result = (currSegmentY - lastSegmentY) * (currSegmentY - nextSegmentY)\n    if (result < 0) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n  getSegmentY (frame, characterId) {\n    return this.data[characterId].points[frame].item3\n  }\n\n  getPositionX (frame, isLeft) {\n    let [leftX, rightX] = this.positionXTable.get(frame)\n    return isLeft ? leftX : rightX\n  }\n\n  generatePositionXTable () {\n    let frameCount = this.sessionTable[0].length\n    let currLeftX = 0\n    let currRightX = this.frameSteps[0]\n    let positionXTable = this.positionXTable\n    for (let frame = 0; frame < frameCount; frame++) {\n      positionXTable.set(frame, [currLeftX, currRightX])\n      currLeftX += (this.frameSteps[frame] + this.curveSteps[frame])\n      if (frame < frameCount - 1) {\n        currRightX = currLeftX + this.frameSteps[frame + 1]\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/types/StoryLoader.js","<template>\n  <move-frame\n    :style=\"cursorStyle\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mouseupCount=\"mouseupCount\"\n    :mousedownCount=\"mousedownCount\">\n  </move-frame>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport MoveFrame from '../frames/MoveFrame'\n\nexport default {\n  name: 'VisualObject',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number,\n    mouseupCount: Number,\n    object: Object\n  },\n\n  computed: {\n    cursorStyle () {\n      let cursorType = 'move'\n      if (this.object.type === 'storyline') {\n        cursorType = 'pointer'\n      } else if (this.object.isScale) {\n        cursorType = 'default'\n      }\n      if (this.isUsingCurveTool) {\n        cursorType = 'crosshair'\n      }\n      if (this.isUsingBendTool) {\n        cursorType = 'crosshair'\n      }\n      if (this.isUsingScaleTool) {\n        cursorType = 'crosshair'\n      }\n      return {\n        'cursor': cursorType\n      }\n    },\n\n    ...mapGetters([\n      'isUsingCurveTool',\n      'isUsingBendTool',\n      'isUsingScaleTool'\n    ])\n  },\n\n  components: {\n    'move-frame': MoveFrame\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/objects/VisualObject.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ScaleTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ScaleTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fc24ff6e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ScaleTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/ScaleTool.vue\n// module id = 7Tca\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ScaleFrame.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ScaleFrame.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d4140b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ScaleFrame.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/frames/ScaleFrame.vue\n// module id = 9Dxg\n// module chunks = 1","<template>\n  <div class=\"side-panel-bar\">\n    <div class=\"side-panel-item\" @click=\"handleElementPanel\">\n      <icon name=\"navicon\" scale=2></icon>\n      <span>Element</span>\n    </div>\n    <div class=\"side-panel-item\" @click=\"handleShapePanel\">\n      <icon name=\"map\" scale=2></icon>\n      <span>Shape</span>\n    </div>\n    <div class=\"side-panel-item\" @click=\"handleTextPanel\">\n      <icon name=\"text-width\" scale=2></icon>\n      <span>Text</span>\n    </div>\n    <div class=\"side-panel-item\" @click=\"handleStoryPanel\">\n      <icon name=\"file-text\" scale=2></icon>\n      <span>Story</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  CLOSE_TOOL,\n  OPEN_PANEL,\n  CLOSE_PANEL,\n  OPEN_TEXT_TOOL,\n  CLOSE_TEXT_TOOL,\n  CLOSE_FILL_COLOR,\n  CLOSE_STROKE_COLOR\n} from '../../store/MutationTypes'\n\nexport default {\n  name: 'SidePanelBar',\n\n  data () {\n    return {\n      usingElementPanel: false,\n      usingShapePanel: false,\n      usingTextPanel: false,\n      usingStoryPanel: false\n    }\n  },\n\n  methods: {\n    handleElementPanel () {\n      this.usingElementPanel = !this.usingElementPanel\n      this.switchPanel('ElementPanel', this.usingElementPanel)\n    },\n\n    handleShapePanel () {\n      this.usingShapePanel = !this.usingShapePanel\n      this.switchPanel('ShapePanel', this.usingShapePanel)\n    },\n\n    handleTextPanel () {\n      this.usingTextPanel = !this.usingTextPanel\n      this.switchPanel('TextPanel', this.usingTextPanel)\n    },\n\n    handleStoryPanel () {\n      this.usingStoryPanel = !this.usingStoryPanel\n      this.switchPanel('StoryPanel', this.usingStoryPanel)\n    },\n\n    switchPanel (panel, isOpen) {\n      this.resetPanel()\n      if (isOpen) {\n        switch (panel) {\n          case 'ElementPanel':\n            this.usingElementPanel = true\n            break\n          case 'ShapePanel':\n            this.usingShapePanel = true\n            break\n          case 'TextPanel':\n            this.usingTextPanel = true\n            this.$store.commit(OPEN_TEXT_TOOL)\n            break\n          case 'StoryPanel':\n            this.usingStoryPanel = true\n            break\n          default:\n            break\n        }\n        this.$store.commit(OPEN_PANEL, panel)\n      } else {\n        this.$store.commit(CLOSE_PANEL, panel)\n      }\n    },\n\n    resetPanel () {\n      this.usingElementPanel = false\n      this.usingShapePanel = false\n      this.$store.commit(CLOSE_FILL_COLOR)\n      this.$store.commit(CLOSE_STROKE_COLOR)\n      this.$store.commit(CLOSE_TOOL, 'PenTool')\n      this.usingTextPanel = false\n      this.$store.commit(CLOSE_TEXT_TOOL)\n      this.usingStoryPanel = false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../assets/Constants.scss';\n\n.side-panel-bar {\n  position: absolute;\n  width: 80px;\n  height: 100%;\n  background: white;\n  border-right: 1px solid #{$GRAY1};\n  // box-shadow: 3px 3px 2px grey;\n\n  .side-panel-item {\n    padding-top: 15px;\n    width: 80px;\n    height: 65px;\n    text-align: center;\n    color: $THEME_BLUE;\n    border-bottom: 1px solid #{$GRAY1};\n\n    span {\n      display: block;\n    }\n\n    &:hover {\n      background: $GRAY1D;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/SidePanelBar.vue","<template>\n  <div class=\"tool-item\"\n    :style=\"styleObject\"\n    @mouseover=\"handleMouseover\"\n    @mouseout=\"handleMouseout\"\n    @click=\"handleClick($event)\">\n    <div v-if=\"toolName === 'OrderTool'\">\n      <order-tool></order-tool>\n    </div>\n    <div v-if=\"toolName === 'BendTool'\">\n      <bend-tool></bend-tool>\n    </div>\n    <div v-if=\"toolName === 'ScaleTool'\">\n      <scale-tool></scale-tool>\n    </div>\n    <div v-if=\"toolName === 'CurveTool'\">\n      <curve-tool></curve-tool>\n    </div>\n    <div v-if=\"toolName === 'LinkTool'\">\n      <link-tool></link-tool>\n    </div>\n    <div v-if=\"toolName === 'PenTool'\">\n      <pen-tool></pen-tool>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { OPEN_TOOL, CLOSE_TOOL, CLEAR_SELECTING_CHARACTERS } from '../../store/MutationTypes'\n\nimport OrderTool from './tools/OrderTool'\nimport BendTool from './tools/BendTool'\nimport ScaleTool from './tools/ScaleTool'\nimport CurveTool from './tools/CurveTool'\nimport LinkTool from './tools/LinkTool'\nimport PenTool from './tools/PenTool'\n\nexport default {\n  name: 'ToolItem',\n\n  props: {\n    usingToolName: String,\n    toolName: String\n  },\n\n  data () {\n    return {\n      usingToolCard: false,\n      activeColor: '#ddd',\n      styleObject: {\n        background: ''\n      }\n    }\n  },\n\n  watch: {\n    usingToolName (newToolName) {\n      if (newToolName === this.toolName) {\n        this.styleObject.background = this.activeColor\n        this.$store.commit(OPEN_TOOL, this.toolName)\n        this.usingToolCard = true\n      } else {\n        this.styleObject.background = ''\n        this.$store.commit(CLOSE_TOOL, this.toolName)\n        this.$store.commit(CLEAR_SELECTING_CHARACTERS)\n        this.usingToolCard = false\n      }\n    }\n  },\n\n  methods: {\n    handleClick () {\n      if (this.usingToolName === this.toolName) {\n        this.$emit('cancelTool', this.toolName)\n        this.usingToolCard = !this.usingToolCard\n        if (this.usingToolCard) {\n          this.styleObject.background = this.activeColor\n          this.$store.commit(OPEN_TOOL, this.toolName)\n        } else {\n          this.styleObject.background = ''\n          this.$store.commit(CLOSE_TOOL, this.toolName)\n          this.$store.commit(CLEAR_SELECTING_CHARACTERS)\n        }\n      } else {\n        this.$emit('enterTool', this.toolName)\n      }\n    },\n\n    handleMouseover () {\n      if (this.styleObject.background === '') {\n        if (this.usingToolName !== this.toolName) {\n          this.styleObject.background = this.activeColor\n        }\n      }\n    },\n\n    handleMouseout () {\n      if (this.styleObject.background === this.activeColor) {\n        if (this.usingToolName !== this.toolName) {\n          this.styleObject.background = ''\n        }\n      }\n    }\n  },\n\n  components: {\n    'order-tool': OrderTool,\n    'bend-tool': BendTool,\n    'scale-tool': ScaleTool,\n    'curve-tool': CurveTool,\n    'link-tool': LinkTool,\n    'pen-tool': PenTool\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/ToolItem.vue","import {\n  INSERT_VISUAL_OBJECT,\n  LOCATE_FOCUSOBJECT,\n  UPDATE_STORYLINE\n} from '../MutationTypes'\nimport * as _ from 'lodash'\n\nconst state = {\n  objectsQueue: [],\n  objectsTree: [],\n  focusObject: {},\n  copiedBuffer: {},\n  count: {\n    storylines: 0,\n    customshapes: 0,\n    rectangles: 0,\n    triangles: 0,\n    pentagons: 0,\n    hexagons: 0,\n    lines: 0,\n    echelons: 0,\n    circles: 0\n  }\n}\n\nconst getters = {\n  objects: state => state.objectsQueue,\n  objectsTree: state => state.objectsTree,\n  focusObject: state => state.focusObject\n}\n\nconst mutations = {\n  [INSERT_VISUAL_OBJECT] (state, obj) {\n    obj.id = state.objectsQueue.length\n    let counts = 0\n    switch (obj.type) {\n      case 'customshape':\n        counts = ++state.count.customshapes\n        break\n      case 'storyline':\n        counts = ++state.count.storylines\n        break\n      case 'rectangle':\n        counts = ++state.count.rectangles\n        break\n      case 'triangle':\n        counts = ++state.count.triangles\n        break\n      case 'pentagon':\n        counts = ++state.count.pentagons\n        break\n      case 'hexagon':\n        counts = ++state.count.hexagons\n        break\n      case 'echelon':\n        counts = ++state.count.echelons\n        break\n      case 'line':\n        counts = ++state.count.lines\n        break\n      case 'circle':\n        counts = ++state.count.circles\n        break\n      default:\n        break\n    }\n    if (obj.type !== 'storyline') {\n      obj.name = `${obj.type}${counts}`\n    }\n    obj.id = state.objectsQueue.length\n    state.objectsQueue.push(obj)\n    state.objectsTree.push({\n      name: obj.name,\n      children: [obj]\n    })\n  },\n\n  [LOCATE_FOCUSOBJECT] (state, obj) {\n    state.focusObject = obj\n  },\n\n  [UPDATE_STORYLINE] (state, obj) {\n    state.objectsQueue[obj.id].nodes = obj.nodes\n    // obj.nodes.forEach((node, i) => {\n    //   state.objectsQueue[obj.id].nodes[i].x = node.x\n    //   state.objectsQueue[obj.id].nodes[i].y = node.y\n    // })\n  }\n}\n\nconst actions = {\n  groupObjects ({ state }) {\n    let tree = state.objectsTree\n    if (tree.length > 0) {\n      let children = []\n      // only support two-level grouping\n      tree.forEach(subtree => {\n        subtree.children.forEach(item => {\n          if (item.isSelected) {\n            children.push(item)\n          }\n        })\n      })\n      tree.push({\n        name: 'group',\n        children: children\n      })\n    }\n  },\n\n  removeStorylines ({ state }) {\n    state.objectsQueue = []\n    state.objectsTree = []\n  },\n\n  scaleFocusObject ({ state }) {\n    state.focusObject.activateScale()\n    state.focusObject.closeMove()\n    state.focusObject.closeReshape()\n  },\n\n  reshapeFocusObject ({ state }) {\n    state.focusObject.closeScale()\n    state.focusObject.closeMove()\n    state.focusObject.activateReshape()\n  },\n\n  hideFocusObject ({ state }) {\n    state.focusObject.closeShow()\n  },\n\n  copyFocusObject ({ state }) {\n    state.copiedBuffer = state.focusObject\n  },\n\n  pasteFocusObject ({ state }, newPosition) {\n    let oldX = state.copiedBuffer.positionX\n    let oldY = state.copiedBuffer.positionY\n    let newX = newPosition.x\n    let newY = newPosition.y\n    let moveX = newX - oldX\n    let moveY = newY - oldY\n    let copiedObject = _.cloneDeep(state.copiedBuffer)\n    copiedObject.id = state.objectsQueue.length\n    // debugger\n    copiedObject.move(moveX, moveY)\n    copiedObject.name += '-copy'\n    state.objectsQueue.push(copiedObject)\n    state.objectsTree.push({\n      name: copiedObject.name,\n      children: [copiedObject]\n    })\n    // state.copiedBuffer = {}\n  },\n\n  cutFocusObject ({ state }) {\n    state.copiedBuffer = state.focusObject\n    let objectID = state.focusObject.id\n    for (let i = objectID + 1, len = state.objectsQueue.length; i < len; i++) {\n      let tmpObject = state.objectsQueue[i]\n      tmpObject.id--\n    }\n    state.objectsQueue.splice(objectID, 1)\n  },\n\n  cancelFocusObject ({ state }) {\n    if (state.focusObject.type !== 'storyline') {\n      state.focusObject.activateMove()\n    }\n    state.focusObject.closeScale()\n    state.focusObject.closeReshape()\n    state.focusObject.closeSelect()\n    state.focusObject = {}\n  }\n}\n\n// TODO: support multi-level grouping\n// function scanObjectsTree (tree, group, newTree) {\n//   if (tree) {\n//     tree.forEach(subtree => {\n//       if (subtree.state.isSelected) {\n//         group.children.push(subtree)\n//       } else {\n//         let newSubTree = _.cloneDeep(subtree)\n//         newSubTree.children = []\n//         newTree.push(newSubTree)\n//         if (subtree.children) {\n//           scanObjectsTree(subtree.children, group, newSubTree.children)\n//         }\n//       }\n//     })\n//   }\n// }\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/ObjectStore.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"pentagon\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5dd72131\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Pentagon.vue\n// module id = Ap5A\n// module chunks = 1","<template>\n  <div class=\"tree-panel\">\n    <ul v-for=\"(item, index) in objectsTree\" :key=\"index\">\n      <tree-node v-if=\"item.children.length == 1\" :model=\"item.children[0]\"></tree-node>\n      <tree-node v-else :model=\"item\"></tree-node>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'TreePanel',\n\n  computed: {\n    ...mapGetters([\n      'objectsTree'\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.tree-panel {\n  padding: 5px 12px;\n}\n\n.bold {\n  font-weight: bold;\n}\n\nul {\n  padding-left: 1em;\n  line-height: 1.5em;\n  margin: 0px;\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/panels/TreePanel/TreePanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"upload-tool\"},[_c('icon',{attrs:{\"name\":\"plus\",\"scale\":\"2\"}}),_vm._v(\" \"),_c('input',{attrs:{\"name\":\"upload\",\"type\":\"file\"},on:{\"change\":_vm.handleUpload}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2bb215e4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/UploadTool.vue\n// module id = BAdX\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e77dd880\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UndoTool.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UndoTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UndoTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e77dd880\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UndoTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/UndoTool.vue\n// module id = BYOV\n// module chunks = 1","import { OPEN_PANEL, CLOSE_PANEL, ACTIVATE_PANEL, CHANGE_PANEL } from '../MutationTypes'\n\nconst state = {\n  panelActivated: false,\n  panelName: ''\n}\n\nconst getters = {\n  panelActivated: state => state.panelActivated,\n  panelName: state => state.panelName\n}\n\nconst mutations = {\n  [OPEN_PANEL] (state, name) {\n    state.panelActivated = true\n    state.panelName = name\n  },\n\n  [CLOSE_PANEL] (state) {\n    state.panelActivated = false\n    state.panelName = ''\n  },\n\n  [ACTIVATE_PANEL] (state, name) {\n    if (state.panelActivated) {\n      state.panelActivated = false\n      state.panelName = ''\n    } else {\n      state.panelActivated = true\n      state.panelName = name\n    }\n  },\n\n  [CHANGE_PANEL] (state, name) {\n    state.panelName = name\n    state.panelActivated = true\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/PanelStore.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PenTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PenTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-38e98cbf\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PenTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/PenTool.vue\n// module id = CKGA\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./GroupSelect.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./GroupSelect.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0dbee687\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./GroupSelect.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/utils/GroupSelect.vue\n// module id = Crh7\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e22f0aa\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../vue-loader/lib/selector?type=styles&index=0!./Icon.vue\")\n}\nvar normalizeComponent = require(\"!../../vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../vue-loader/lib/selector?type=script&index=0!./Icon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../vue-loader/lib/selector?type=script&index=0!./Icon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e22f0aa\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../vue-loader/lib/selector?type=template&index=0!./Icon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-awesome/components/Icon.vue\n// module id = D4uH\n// module chunks = 1","import { getCurvePoints } from 'cardinal-spline-js'\nimport { StyleNode } from './BezierNode'\n\nclass Spline {\n  constructor (points) {\n    this.points = points\n  }\n}\n\n// input three points, the middle one is the control point\nfunction getQuadraticBSplinePoints(nodes, sampleNum) {\n  let px = nodes.map(node => node.x)\n  let py = nodes.map(node => node.y)\n  let step = 1 / (sampleNum - 1)\n  let outPoints = []\n  for (let i = 0; i < sampleNum; i++) {\n    let tmpT = i * step\n    let p1 = 0.5 * (tmpT - 1) ** 2\n    let p2 = 0.5 * (-2 * tmpT * tmpT + 2 * tmpT + 1)\n    let p3 = 0.5 * tmpT ** 2\n    let tmpX = p1 * px[0] + p2 * px[1] + p3 * px[2]\n    let tmpY = p1 * py[0] + p2 * py[1] + p3 * py[2]\n    let tmpNode = new StyleNode(tmpX, tmpY)\n    outPoints.push(tmpNode)\n  }\n  return outPoints\n}\n\n// sample number between two control points\nfunction cubicFit (nodes, sampleNum) {\n  let path = []\n  let orgPoints = []\n  nodes.forEach(node => {\n    orgPoints.push(node.x)\n    orgPoints.push(node.y)\n  })\n  let outPoints = getCurvePoints(orgPoints, 0.5, sampleNum)\n  let len = outPoints.length / 2\n  for (let i = 0; i < len - 1; i++) {\n    let tmpX = outPoints[2 * i]\n    let tmpY = outPoints[2 * i + 1]\n    let tmpStyleNode = new StyleNode(tmpX, tmpY)\n    path.push(tmpStyleNode)\n  }\n  return path\n}\n\nexport class CubicSplineSimple extends Spline {\n  constructor (points) {\n    super(points)\n    this.flatSampleNum = 4\n    this.stepSampleNum = 8\n    this.tension = 0.15\n  }\n\n  fit () {\n    // console.log('fit')\n    let points = this.points\n    let path = this.points.slice()\n    for (let i = 0; i < points.length - 1; ) {\n      if (Math.abs(points[i].y - points[i + 1].y) < 0.001) {\n        // first seg found\n        for (let j = i + 2; j < points.length - 1; j++) {\n          if (Math.abs(points[j].y - points[j + 1].y) < 0.001) {\n            if (Math.abs(points[i].y - points[j].y) > 0.001) {\n              // segs with diffrent y\n              let distance = j - i - 1\n              let middleNodesCount = distance - 1\n              if (middleNodesCount < 0) {\n                // what?\n                console.error('middleNode less than 0')\n              } else if (middleNodesCount < 3) {\n                let middle\n                if (middleNodesCount === 0) {\n                  middle = new StyleNode((points[i + 1].x + points[j].x) / 2, (points[i + 1].y + points[j].y) / 2)\n                } else {\n                  let middleIndex = middleNodesCount === 1 ? i + 2 : i + 3 \n                  middle = new StyleNode(points[middleIndex].x, points[middleIndex].y)\n                }\n                let result = getQuadraticBSplinePoints([points[i], points[i + 1], middle], this.stepSampleNum)\n                result = result.concat(getQuadraticBSplinePoints([middle, points[j], points[j + 1]], this.stepSampleNum))\n                path[i + 1] = result\n                for (let k = i + 2; k <= i + 2 + middleNodesCount; k++) {\n                  path[k] = undefined\n                }\n              } else {\n                let nodes = points.slice(i + 1, j + 1)\n                // console.log(nodes.length)\n                let result = nodes.length > 3 ? cubicFit(nodes, 2) : getQuadraticBSplinePoints(nodes, (nodes.length + 1) * this.stepSampleNum)\n                // let result = getQuadraticBSplinePoints(nodes, (nodes.length + 1) * this.stepSampleNum)\n                path[i + 1] = result\n                for (let k = i + 2; k <= j + 1; k++) {\n                  path[k] = undefined\n                }\n              }\n            } else {\n              // first seg match second\n            }\n            // let second seg as first\n            i = j - 1\n            break\n          }\n        }\n        i++\n      } else {\n        i++\n      }\n    }\n    // flatmap here\n    let result = []\n    path.forEach(v => {\n      if (v) {\n        if (Array.isArray(v)) {\n          v.forEach(n => {\n            result.push(n)\n          })\n        } else {\n          result.push(v)\n        }\n      }\n    })\n    return result\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/CubicSpline.js","<template>\n  <div id=\"story-panel\">\n    <div class=\"slider-wrapper\">\n      width\n      <tool-slider\n        @updateSliderVal=\"updateCanvasW($event)\"\n        :modelVal=\"canvasW\"\n        :min=\"1000\"\n        :max=\"5000\"\n        :step=\"10\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      height\n      <tool-slider\n        @updateSliderVal=\"updateCanvasH($event)\"\n        :modelVal=\"canvasH\"\n        :min=\"500\"\n        :max=\"2000\"\n        :step=\"10\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      xScale\n      <tool-slider\n        @updateSliderVal=\"updateXScalingFactor($event)\"\n        :modelVal=\"storyConfig.xScaleFactor\"\n        :min=\"0\"\n        :max=\"1\"\n        :step=\"0.01\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      yScale\n      <tool-slider\n        @updateSliderVal=\"updateYScalingFactor($event)\"\n        :modelVal=\"storyConfig.yScaleFactor\"\n        :min=\"0.5\"\n        :max=\"1\"\n        :step=\"0.02\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      Relax\n      <tool-slider\n        @updateSliderVal=\"updateRelaxingFactor($event)\"\n        :modelVal=\"storyConfig.relaxingFactor\"\n        :min=\"0\"\n        :max=\"100\"\n        :step=\"1\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      Frame\n      <tool-slider\n        @updateSliderVal=\"updateFrameStep($event)\"\n        :modelVal=\"storyConfig.frameStep\"\n        :min=\"50\"\n        :max=\"500\"\n        :step=\"1\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      Curve\n      <tool-slider\n        @updateSliderVal=\"updateCurveStep($event)\"\n        :modelVal=\"storyConfig.curveStep\"\n        :min=\"50\"\n        :max=\"500\"\n        :step=\"1\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      Smooth\n      <tool-slider\n        @updateSliderVal=\"updateSampleStep($event)\"\n        :modelVal=\"storyConfig.sampleStep\"\n        :min=\"2\"\n        :max=\"20\"\n        :step=\"1\">\n      </tool-slider>\n    </div>\n    <div class=\"slider-wrapper\">\n      Sketch\n      <tool-slider\n        @updateSliderVal=\"updateJitterWave($event)\"\n        :modelVal=\"storyConfig.jitterWave\"\n        :min=\"1\"\n        :max=\"5\"\n        :step=\"0.2\">\n      </tool-slider>\n    </div>\n    <textarea name=\"storyConfig\" cols=\"30\" rows=\"10\" placeholder=\"story configuration here...\" v-model=\"storyConfig.content\"></textarea>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'StoryPanel',\n\n  computed: {\n    canvasW () {\n      return this.paintingCardList[0].width\n    },\n\n    canvasH () {\n      return this.paintingCardList[0].height\n    },\n\n    ...mapGetters([\n      'objects',\n      'storyConfig',\n      'paintingCardList'\n    ])\n  },\n\n  methods: {\n    updateCanvasW (event) {\n      this.paintingCardList[0].geometry.width = event\n    },\n\n    updateCanvasH (event) {\n      this.paintingCardList[0].geometry.height = event\n    },\n\n    updateXScalingFactor (event) {\n      this.storyConfig.xScaleFactor = event\n    },\n\n    updateYScalingFactor (event) {\n      this.storyConfig.yScaleFactor = event\n    },\n\n    updateRelaxingFactor (event) {\n      this.storyConfig.relaxingFactor = event\n    },\n\n    updateFrameStep (event) {\n      this.storyConfig.frameStep = event\n    },\n\n    updateCurveStep (event) {\n      this.storyConfig.curveStep = event\n    },\n\n    updateSampleStep (event) {\n      this.storyConfig.sampleStep = event\n    },\n\n    updateJitterWave (event) {\n      this.storyConfig.jitterWave = event\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n#story-panel {\n  padding: 5px 12px;\n\n  .slider-wrapper {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-end;\n    margin: 5px 0;\n\n    input {\n      width: 165px;\n    }\n\n    input[type=range]::-webkit-slider-runnable-track {\n      height: 100%;\n    }\n\n    input[type=range]::-webkit-slider-thumb {\n      -webkit-appearance: none;\n      height: 100%;\n      width: 20px;\n      margin-top: 0;\n      border-radius: 50%;\n      border: 1px solid #03A9F4;\n      opacity: 0;\n    }\n  }\n\n  textarea {\n    width: 230px;\n    margin-top: 10px;\n    // border: 1px solid #03A9F4;\n    border-radius: 5px;\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/panels/StoryPanel.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-270c3e90\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ToolSlider.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolSlider.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolSlider.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-270c3e90\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ToolSlider.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/utils/ToolSlider.vue\n// module id = E7qz\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tool-item\",style:(_vm.styleObject),on:{\"mouseover\":_vm.handleMouseover,\"mouseout\":_vm.handleMouseout,\"click\":function($event){return _vm.handleClick($event)}}},[(_vm.toolName === 'OrderTool')?_c('div',[_c('order-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'BendTool')?_c('div',[_c('bend-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'ScaleTool')?_c('div',[_c('scale-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'CurveTool')?_c('div',[_c('curve-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'LinkTool')?_c('div',[_c('link-tool')],1):_vm._e(),_vm._v(\" \"),(_vm.toolName === 'PenTool')?_c('div',[_c('pen-tool')],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c1164880\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/ToolItem.vue\n// module id = EVPn\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"move-frame\",on:{\"mouseup\":function($event){return _vm.handleMouseup($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMousedown($event)},\"click\":function($event){$event.stopPropagation();},\"contextmenu\":function($event){return _vm.handleContextmenu($event)}}},[_c('rotateframe',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-33c04bfc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/frames/MoveFrame.vue\n// module id = Ef3N\n// module chunks = 1","<template>\n  <div class=\"svg-card\"\n    @mousedown=\"handleMousedown\"\n    :style=\"styleObject\">\n    <svg class=\"svg-content\">\n      <visual-object v-for=\"(object, index) in objects\"\n        v-if=\"object.type !== 'text'\"\n        :object=\"object\"\n        :mouseX=\"mouseX\"\n        :mouseY=\"mouseY\"\n        :mouseupCount=\"mouseupCount\"\n        :mousedownCount=\"mousedownCount\"\n        :key=\"index\">\n      </visual-object>\n      <frame-select\n        :mouseX=\"mouseX\"\n        :mouseY=\"mouseY\"\n        :mousedownCount=\"mousedownCount\">\n      </frame-select>\n      <scale-select\n        :mouseX=\"mouseX\"\n        :mouseY=\"mouseY\"\n        :mousedownCount=\"mousedownCount\">\n      </scale-select>\n      <path-select\n        :mouseX=\"mouseX\"\n        :mouseY=\"mouseY\"\n        :mousedownCount=\"mousedownCount\">\n      </path-select>\n    </svg>\n    <text-object v-for=\"(object, index) in textObjects\"\n      :mouse=\"mouse\"\n      :object=\"object\"\n      :scrollX=\"scrollX\"\n      :scrollY=\"scrollY\"\n      :key=\"index\">\n    </text-object>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { UPDATE_SVG_CARD, LOCATE_TEXT_OBJECT } from '../../../store/MutationTypes'\nimport { Text } from '../../../types/VisualObject'\nimport VisualObject from '../objects/VisualObject'\nimport GroupSelect from '../utils/GroupSelect'\nimport ScaleSelect from '../utils/ScaleSelect'\nimport PathSelect from '../utils/PathSelect'\nimport TextObject from '../objects/TextObject'\n\nexport default {\n  name: 'SVGCard',\n\n  props: {\n    mouse: Object,\n    cardObject: Object,\n    scrollX: Number,\n    scrollY: Number\n  },\n\n  data () {\n    return {\n      cardEl: {},\n      storyReorder: null,\n      sessionMover: null,\n      reorderRecordY: 0\n    }\n  },\n\n  computed: {\n    cardID () {\n      return this.cardObject.ID\n    },\n\n    cardWidth () {\n      return this.cardObject.width\n    },\n\n    cardHeight () {\n      return this.cardObject.height\n    },\n\n    cardDepth () {\n      return this.cardObject.depth\n    },\n\n    cardPositionX () {\n      return this.cardObject.positionX\n    },\n\n    cardPositionY () {\n      return this.cardObject.positionY\n    },\n\n    styleObject () {\n      let cursorType = ''\n      if (this.isUsingCurveTool) {\n        cursorType = 'crosshair'\n      }\n      if (this.isUsingBendTool) {\n        cursorType = 'crosshair'\n      }\n      if (this.isUsingScaleTool) {\n        cursorType = 'crosshair'\n      }\n      if (this.isUsingTextTool) {\n        cursorType = 'text'\n      }\n      return {\n        width: `${this.cardWidth}px`,\n        height: `${this.cardHeight}px`,\n        padding: `${this.cardPositionY}px ${this.cardPositionX}px`,\n        cursor: cursorType\n      }\n    },\n\n    mouseX () {\n      return this.mouse.positionX - this.cardPositionX + this.scrollX\n    },\n\n    mouseY () {\n      return this.mouse.positionY - this.cardPositionY + this.scrollY\n    },\n\n    mousedownCount () {\n      return this.mouse.downCount\n    },\n\n    mouseupCount () {\n      return this.mouse.upCount\n    },\n\n    ...mapGetters([\n      'paintingCardList',\n      'isUsingCurveTool',\n      'isUsingBendTool',\n      'isUsingScaleTool',\n      'isUsingTextTool',\n      'objects',\n      'textObjects'\n    ])\n  },\n\n  methods: {\n    handleMousedown () {\n      if (this.isUsingTextTool) {\n        let x = this.mouse.positionX + this.scrollX\n        let y = this.mouse.positionY + this.scrollY\n        let textObj = new Text('text', x, y)\n        this.$store.dispatch('insertTextObject', textObj)\n        this.$store.commit(LOCATE_TEXT_OBJECT, textObj)\n      }\n    }\n  },\n\n  mounted () {\n    // update svg size\n    let paintingEl = document.getElementsByClassName('painting')[0]\n    let paintingW = paintingEl.clientWidth\n    let paintingH = paintingEl.clientHeight\n    let positionX = 0.05 * paintingW\n    let positionY = 0.02 * paintingH\n    let svgCardW = paintingW - 2 * positionX\n    let svgCardH = paintingH - 2 * positionY\n    this.paintingCardList[0].updateGeometry(positionX, positionY, svgCardW, svgCardH)\n    this.$store.commit(UPDATE_SVG_CARD, {\n      canvasW: svgCardW,\n      canvasH: svgCardH\n    })\n  },\n\n  components: {\n    'visual-object': VisualObject,\n    'frame-select': GroupSelect,\n    'scale-select': ScaleSelect,\n    'path-select': PathSelect,\n    'text-object': TextObject\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.svg-card {\n  .svg-content {\n    width: 100%;\n    height: 100%;\n    background: white;\n    border-radius: 2px;\n    box-shadow: 3px 3px 2px grey;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/cards/SVGCard.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b06ac9b8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreeNode.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeNode.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeNode.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b06ac9b8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreeNode.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/panels/TreePanel/TreeNode.vue\n// module id = EnH0\n// module chunks = 1","<template>\n  <input\n    type=\"range\"\n    :min=\"min\"\n    :max=\"max\"\n    :step=\"step\"\n    :style=\"styleObject\"\n    v-model=\"modelVal\">\n</template>\n\n<script>\nexport default {\n  name: 'ToolSlider',\n\n  props: {\n    min: Number,\n    max: Number,\n    step: Number,\n    modelVal: Number\n  },\n\n  computed: {\n    styleObject () {\n      let ratio = (this.modelVal - this.min) * 100 / (this.max - this.min)\n      this.$emit('updateSliderVal', this.modelVal)\n      return {\n        backgroundSize: `${ratio}% 100%`\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\ninput[type=range] {\n  -webkit-appearance: none;\n  width: 120px;\n  border-radius: 5px; /**/\n  background: -webkit-linear-gradient(#888, #888) no-repeat;\n  background-size: 0% 100%;\n}\n\ninput[type=range]::-webkit-slider-runnable-track {\n  height: 10px;\n  border-radius: 5px; /**/\n  border: 1px solid #888;\n  // background: #ccc;\n  // box-shadow: 0 1px 1px #def3f8, inset 0 .125em .125em #0d1112; /**/\n}\n\ninput[type=range]:focus {\n  outline: none;\n}\n\ninput[type=range]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  height: 18px;\n  width: 18px;\n  margin-top: -5px; /**/\n  background: #fff;\n  border-radius: 50%; /**/\n  border: 1px solid #888; /**/\n  // box-shadow: 0 .125em .125em #3b4547; /**/\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/utils/ToolSlider.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('workspace'),_vm._v(\" \"),_c('side-panel'),_vm._v(\" \"),_c('side-panelbar'),_vm._v(\" \"),_c('tool-box')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-a1ac8c8c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = GBS+\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Shifting'),expression:\"'Shifting'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-798aca9f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/OrderTool.vue\n// module id = GMF1\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tree-panel\"},_vm._l((_vm.objectsTree),function(item,index){return _c('ul',{key:index},[(item.children.length == 1)?_c('tree-node',{attrs:{\"model\":item.children[0]}}):_c('tree-node',{attrs:{\"model\":item}})],1)}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-65897df7\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/panels/TreePanel/TreePanel.vue\n// module id = Gc5s\n// module chunks = 1","<template>\n  <g class=\"rect-frame\">\n    <rect\n      fill=\"none\"\n      :x=\"updateX\"\n      :y=\"updateY\"\n      :width=\"updateW\"\n      :height=\"updateH\"\n      stroke=\"blue\">\n    </rect>\n    <rect v-for=\"(node, key) in nodes\"\n      :style=\"node.cursor\"\n      :x=\"node.x - 3\"\n      :y=\"node.y - 3\"\n      :width=\"6\"\n      :height=\"6\"\n      fill=\"white\"\n      stroke=\"blue\"\n      stroke-width=\"1\"\n      @mousedown=\"handleMousedown(key)\"\n      @mouseup=\"handleMouseup\"\n      :key=\"key\">\n    </rect>\n    <line\n      :x1=\"positionX\"\n      :y1=\"positionY\"\n      :x2=\"rotateNode.x\"\n      :y2=\"rotateNode.y\"\n      stroke=\"blue\"\n      stroke-width=\"1\">\n    </line> \n    <circle \n      fill = \"blue\"\n      :cx=\"rotateNode.x\"\n      :cy=\"rotateNode.y\"\n      :r=3\n      stroke=\"black\"\n      stroke-width=\"1\"\n      @mousedown=\"handleRotateMousedown\"\n      @mouseup=\"handleRotateMouseup\">\n    </circle>\n    <circle \n      fill = \"blue\"\n      :cx=\"positionX\"\n      :cy=\"positionY\"\n      :r=3\n      stroke=\"black\"\n      stroke-width=\"1\"\n      @mousedown=\"handleRotateMousedown\"\n      @mouseup=\"handleRotateMouseup\">\n    </circle>\n  </g>\n</template>\n\n<script>\nexport default {\n  name: 'RectFrame',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    frameX: Number,\n    frameY: Number,\n    frameW: Number,\n    frameH: Number\n  },\n\n  data () {\n    return {\n      a: 0,\n      b: 0,\n      c: 0,\n      draggedNode: '',\n      frameUpdateCount: 0,\n      xMouseInFrame: 0,\n      yMouseInFrame: 0,\n      rx: 0,\n      ry: -30,\n      sin: 0,\n      cos: 0,\n      updateX: this.frameX || 0,\n      updateY: this.frameY || 0,\n      updateW: this.frameW || 0,\n      updateH: this.frameH || 0,\n      oldW: this.frameW || 0,\n      oldH: this.frameH || 0\n    }\n  },\n\n  computed: {\n    nodes () {\n      return {\n        tPoint: { x: this.updateX + this.updateW / 2, y: this.updateY, cursor: { 'cursor': 'n-resize' } },\n        rPoint: { x: this.updateX + this.updateW, y: this.updateY + this.updateH / 2, cursor: { 'cursor': 'e-resize' } },\n        bPoint: { x: this.updateX + this.updateW / 2, y: this.updateY + this.updateH, cursor: { 'cursor': 's-resize' } },\n        lPoint: { x: this.updateX, y: this.updateY + this.updateH / 2, cursor: { 'cursor': 'w-resize' } },\n        tlPoint: { x: this.updateX, y: this.updateY, cursor: { 'cursor': 'nw-resize' } },\n        trPoint: { x: this.updateX + this.updateW, y: this.updateY, cursor: { 'cursor': 'ne-resize' } },\n        brPoint: { x: this.updateX + this.updateW, y: this.updateY + this.updateH, cursor: { 'cursor': 'se-resize' } },\n        blPoint: { x: this.updateX, y: this.updateY + this.updateH, cursor: { 'cursor': 'sw-resize' } }\n      }\n    },\n\n    positionX () {\n      return this.updateX + this.updateW / 2\n    },\n\n    positionY () {\n      return this.updateY + this.updateH / 2\n    },\n\n    rotateNode () {\n      return {\n        x: this.positionX + this.rx,\n        y: this.positionY + this.ry\n      }\n    }\n  },\n\n  methods: {\n    handleMousedown (key) {\n      this.draggedNode = key\n      this.xMouseInFrame = this.mouseX - this.updateX\n      this.yMouseInFrame = this.mouseY - this.updateY\n      this.oldW = this.updateW\n      this.oldH = this.updateH\n    },\n\n    handleMouseup () {\n      this.draggedNode = ''\n      this.$emit('updateFrame', {\n        x: this.updateX,\n        y: this.updateY,\n        w: this.updateW,\n        h: this.updateH\n      })\n    },\n\n    handleRotateMousedown () {\n      this.draggedNode = 'circle'\n      let a = this.rotateNode.x - this.positionX\n      let b = this.positionY - this.rotateNode.y\n      let c = Math.hypot(a, b)\n      this.sin = a / c\n      this.cos = b / c\n    },\n\n    handleRotateMouseup () {\n      this.draggedNode = ''\n      let a = this.rotateNode.x - this.positionX\n      let b = this.positionY - this.rotateNode.y\n      let c = Math.hypot(a, b)\n      this.$emit('rotate', {\n        sin: (a / c) * this.cos - (b / c) * this.sin,\n        cos: (b / c) * this.cos + (a / c) * this.sin\n      })\n    }\n\n  },\n\n  watch: {\n    mouseX (newVal) {\n      let newX = newVal - this.xMouseInFrame\n      let newW = this.updateW\n      switch (this.draggedNode) {\n        case 'rPoint':\n        case 'trPoint':\n        case 'brPoint':\n          newW = this.oldW + newX - this.updateX\n          if (newW > 0) {\n            this.$emit('updateW', newW)\n            this.updateW = newW\n          }\n          break\n        case 'lPoint':\n        case 'tlPoint':\n        case 'blPoint':\n          newW = this.updateW - (newX - this.updateX)\n          if (newW > 0) {\n            this.$emit('updateX', newW)\n            this.updateX = newX\n            this.updateW = newW\n          }\n          break\n        case 'circle':\n          this.rx = newVal - this.positionX\n          let a = this.rotateNode.x - this.positionX\n          let b = this.positionY - this.rotateNode.y\n          let c = Math.hypot(a, b)\n          this.$emit('rotate', { sin: (a / c) * this.cos - (b / c) * this.sin, cos: (b / c) * this.cos + (a / c) * this.sin })\n          break\n        default:\n          break\n      }\n    },\n\n    mouseY (newVal) {\n      let newY = newVal - this.yMouseInFrame\n      let newH = this.frameH\n      switch (this.draggedNode) {\n        case 'tPoint':\n        case 'tlPoint':\n        case 'trPoint':\n          newH = this.updateH - (newY - this.updateY)\n          if (newH > 0) {\n            this.$emit('updateY', newH)\n            this.updateY = newY\n            this.updateH = newH\n          }\n          break\n        case 'bPoint':\n        case 'brPoint':\n        case 'blPoint':\n          newH = this.oldH + (newY - this.updateY)\n          if (newH > 0) {\n            this.$emit('updateH', newH)\n            this.updateH = newH\n          }\n          break\n        case 'circle':\n          this.ry = newVal - this.positionY\n          let a = this.rotateNode.x - this.positionX\n          let b = this.positionY - this.rotateNode.y\n          let c = Math.hypot(a, b)\n          console.log(a, b, c)\n          this.$emit('rotate', { sin: (a / c) * this.cos - (b / c) * this.sin, cos: (b / c) * this.cos + (a / c) * this.sin })\n          break\n        default:\n          break\n      }\n    },\n\n    frameX (newVal) {\n      this.updateX = newVal\n    },\n\n    frameY (newVal) {\n      this.updateY = newVal\n    },\n\n    frameW (newVal) {\n      this.updateW = newVal\n    },\n\n    frameH (newVal) {\n      this.updateH = newVal\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/frames/RectFrame.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bc271eb0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SVGCard.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SVGCard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SVGCard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bc271eb0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SVGCard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/cards/SVGCard.vue\n// module id = H6qF\n// module chunks = 1","import {\n  LOCATE_FOCUSOBJECT_STYLE,\n  RESTORE_FOCUSOBJECT_STYLE,\n  OPEN_FILL_COLOR,\n  CLOSE_FILL_COLOR,\n  OPEN_STROKE_COLOR,\n  CLOSE_STROKE_COLOR\n} from '../MutationTypes'\n\nconst RGBA_BLACK = {\n  rgba: {\n    r: 0,\n    g: 0,\n    b: 0,\n    a: 1\n  }\n}\n\nconst RGBA_WHITE = {\n  rgba: {\n    r: 255,\n    g: 255,\n    b: 255,\n    a: 1\n  }\n}\n\nconst DEFAULT_STYLE = {\n  fill: RGBA_WHITE,\n  stroke: RGBA_BLACK,\n  strokeWidth: 1,\n  opacity: 1\n}\n\nconst state = {\n  focusObjectStyle: DEFAULT_STYLE,\n  isUsingFillColor: false,\n  isUsingStrokeColor: false\n}\n\nconst getters = {\n  objectStyle: state => state.focusObjectStyle,\n  isUsingFillColor: state => state.isUsingFillColor,\n  isUsingStrokeColor: state => state.isUsingStrokeColor\n}\n\nconst mutations = {\n  [LOCATE_FOCUSOBJECT_STYLE] (state, style) {\n    state.focusObjectStyle = style\n  },\n\n  [RESTORE_FOCUSOBJECT_STYLE] (state) {\n    state.focusObjectStyle = DEFAULT_STYLE\n  },\n\n  [OPEN_FILL_COLOR] (state) {\n    state.isUsingStrokeColor = false\n    state.isUsingFillColor = true\n  },\n\n  [CLOSE_FILL_COLOR] (state) {\n    state.isUsingFillColor = false\n  },\n\n  [OPEN_STROKE_COLOR] (state) {\n    state.isUsingFillColor = false\n    state.isUsingStrokeColor = true\n  },\n\n  [CLOSE_STROKE_COLOR] (state) {\n    state.isUsingStrokeColor = false\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/StyleStore.js","<template>\n  <g class=\"rectangle\" v-show=\"visible\">\n    <path :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <controlnode v-for=\"(node, index) in nodes\"\n      v-show=\"reshape\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mouseupCount=\"mouseupCount\"\n      :mousedownCount=\"mousedownCount\"\n      :node=\"node\"\n      :key=\"index\">\n    </controlnode>\n  </g>\n</template>\n\n<script>\nimport ControlNode from '../utils/ControlNode'\n\nexport default {\n  name: 'Rectangle',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  // init rectangle\n  mounted () {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(10, 10, 10, 10)\n      this.object.addBezierNode(100, 10, 100, 10)\n      this.object.addBezierNode(100, 100, 100, 100)\n      this.object.addBezierNode(10, 100, 10, 100)\n      this.object.init()\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          pathD += ` L ${node.x} ${node.y}`\n        }\n      })\n      if (this.nodes.length > 2) {\n        pathD += ` L ${this.nodes[0].x} ${this.nodes[0].y}`\n      }\n      return pathD\n    }\n  },\n\n  components: {\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Rectangle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingFrameSelect),expression:\"isUsingFrameSelect\"}],staticClass:\"group-select\"},_vm._l((_vm.linesNum),function(n){return _c('line',{key:n,attrs:{\"x1\":_vm.sPoints[n-1].x,\"y1\":_vm.sPoints[n-1].y,\"x2\":_vm.ePoints[n-1].x,\"y2\":_vm.ePoints[n-1].y,\"stroke\":\"red\",\"stroke-width\":\"10\",\"opacity\":\"0.5\"}})}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0dbee687\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/utils/GroupSelect.vue\n// module id = Iaoo\n// module chunks = 1","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport StyleStore from './modules/StyleStore'\nimport ObjectStore from './modules/ObjectStore'\nimport ToolStore from './modules/ToolStore'\nimport TextStore from './modules/TextStore'\nimport CardStore from './modules/CardStore'\nimport PanelStore from './modules/PanelStore'\nimport StoryStore from './modules/StoryStore'\n\nimport { RESTORE_DEFAULT_OBJECTS, CHANGE_TOOL } from './MutationTypes'\n\nVue.use(Vuex)\n\nconst state = {\n  isObjectsActiveChange: false,\n  usingToolName: ''\n}\n\nconst getters = {\n  isObjectsActiveChange: state => state.isObjectsActiveChange,\n  usingToolName: state => state.usingToolName\n}\n\nconst mutations = {\n  [RESTORE_DEFAULT_OBJECTS] (state) {\n    state.isObjectsActiveChange = !state.isObjectsActiveChange\n  },\n\n  [CHANGE_TOOL] (state, tool) {\n    state.usingToolName = tool\n  }\n}\n\nexport default new Vuex.Store({\n  modules: {\n    StyleStore,\n    ObjectStore,\n    ToolStore,\n    TextStore,\n    CardStore,\n    PanelStore,\n    StoryStore\n  },\n  state,\n  getters,\n  mutations\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('scaleframe',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount},on:{\"rotate\":function($event){return _vm.rotate($event)}}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4fbbcee8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/frames/RotateFrame.vue\n// module id = J4kB\n// module chunks = 1","<template>\n  <g class=\"echelon\" v-show=\"visible\">\n    <path :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <controlnode v-for=\"(node, index) in nodes\"\n      v-show=\"reshape\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mouseupCount=\"mouseupCount\"\n      :mousedownCount=\"mousedownCount\"\n      :node=\"node\"\n      :key=\"index\">\n    </controlnode>\n  </g>\n</template>\n\n<script>\nimport ControlNode from '../utils/ControlNode'\n\nexport default {\n  name: 'Echelon',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  // init echelon\n  mounted () {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(125, 100, 125, 100)\n      this.object.addBezierNode(175, 100, 175, 100)\n      this.object.addBezierNode(200, 200, 200, 200)\n      this.object.addBezierNode(100, 200, 100, 200)\n      this.object.init()\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          pathD += ` L ${node.x} ${node.y}`\n        }\n      })\n      if (this.nodes.length > 2) {\n        pathD += ` L ${this.nodes[0].x} ${this.nodes[0].y}`\n      }\n      return pathD\n    }\n  },\n\n  components: {\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Echelon.vue","<template>\n  <g class=\"hexagon\" v-show=\"visible\">\n    <path :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <controlnode v-for=\"(node, index) in nodes\"\n      v-show=\"reshape\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mouseupCount=\"mouseupCount\"\n      :mousedownCount=\"mousedownCount\"\n      :node=\"node\"\n      :key=\"index\">\n    </controlnode>\n  </g>\n</template>\n\n<script>\nimport ControlNode from '../utils/ControlNode'\n\nexport default {\n  name: 'Hexagon',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  // init hexagon\n  mounted () {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(100, 10, 100, 10)\n      this.object.addBezierNode(200, 10, 200, 10)\n      this.object.addBezierNode(250, 96.5, 250, 96.5)\n      this.object.addBezierNode(200, 183, 100, 183)\n      this.object.addBezierNode(100, 183, 100, 183)\n      this.object.addBezierNode(50, 96.5, 50, 96.5)\n      this.object.init()\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          pathD += ` L ${node.x} ${node.y}`\n        }\n      })\n      if (this.nodes.length > 2) {\n        pathD += ` L ${this.nodes[0].x} ${this.nodes[0].y}`\n      }\n      return pathD\n    }\n  },\n\n  components: {\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Hexagon.vue","import { StyleNode } from './BezierNode'\n\nexport class UniformSampler {\n  // assume nodes are list in a ascending order \n  static sample(nodes, step) {\n    let result = []\n    for (let i = 1; i < nodes.length; i++) {\n      let lastNode = nodes[i - 1]\n      let thisNode = nodes[i]\n\n      let arc = Math.atan2(thisNode.y - lastNode.y, thisNode.x - lastNode.x)\n      let yStep = Math.sin(arc) * step\n      let xStep = Math.cos(arc) * step\n      for (let x = lastNode.x, y = lastNode.y; x < thisNode.x; x += xStep, y += yStep) {\n        result.push(new StyleNode(x, y))\n      }\n    }\n    result.push(nodes[nodes.length - 1])\n    return result\n  }\n\n  static jitter(nodes, range) {\n    for (let i = 1; i < nodes.length; i++) {\n      let lastNode = nodes[i - 1]\n      let thisNode = nodes[i]\n      let step = UniformSampler.randomJitter(range)\n      let arc = Math.atan2(thisNode.y - lastNode.y, thisNode.x - lastNode.x) + Math.PI / 2\n      let yStep = Math.sin(arc) * step\n      let xStep = Math.cos(arc) * step\n      \n      nodes[i].y += yStep\n      nodes[i].x += xStep\n    }\n    return nodes\n  }\n\n  static randomJitter(range) {\n    return (Math.random() - 0.5) * range\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/UniformSampler.js","import {\n  INSERT_VISUAL_OBJECT,\n  UPDATE_REQUEST,\n  UPDATE_STORYLINE,\n  ADD_FOCUSING_CHARACTER,\n  ADD_SELECTING_CHARACTER,\n  CLEAR_SELECTING_CHARACTERS,\n  UPDATE_SVG_CARD,\n  RECORD_TARGET_PATH,\n  ADD_HISTORY,\n  UNDO\n} from '../MutationTypes'\nimport { Storyline } from '../../types/VisualObject'\nimport { StoryLoader } from '../../types/StoryLoader'\nimport { EmphasizeSelector, StorySelector, FrameScaler } from '../../types/Selector'\nimport { PathReshaper } from '../../types/PathReshaper'\nimport * as _ from 'lodash'\nimport axios from 'axios'\n\nconst instance = axios.create({\n  baseURL: 'http://localhost:5050/api/'\n})\n\nconst state = {\n  storylines: [],\n  storylinesBak: [],\n  rawStorylines: [],\n  frameTable: new Map(),\n  sessionTable: [],\n  permTable: [],\n  characterTable: new Map(),\n  storylineTable: new Map(),\n  dashRangeMap: [],\n  targetPath: [],\n  focusCharacters: [],\n  twineCharacters: [],\n  twineRange: [],\n  twineUsed: false,\n  selectedCharacters: [],\n  selectedFrames: [],\n  storyConfig: {\n    paddingTop: 100,\n    paddingLeft: 400,\n    paddingBottom: 100,\n    paddingRight: 100,\n    xScaleFactor: 1,\n    yScaleFactor: 1,\n    relaxingFactor: 60,\n    frameStep: 120,\n    curveStep: 160,\n    canvasW: 1800,\n    canvasH: 860,\n    curveTheta: 30 / 180 * Math.PI,\n    sampleStep: 5,\n    jitterWave: 0.00001,\n    content: ''\n  },\n  frameSteps: [],\n  curveSteps: [],\n  request: {\n    id: '',\n    sessionInnerGap: 18,\n    sessionOuterGap: 54,\n    sessionInnerGaps: [],\n    sessionOuterGaps: [],\n    majorCharacters: [],\n    orders: [],\n    groupIds: [],\n    selectedSessions: [],\n    orderTable: [],\n    sessionBreaks: []\n  },\n  history: []\n}\n\nconst getters = {\n  identifier: state => state.request.identifier,\n  request: state => state.request,\n  storyConfig: state => state.storyConfig,\n  storylines: state => state.storylines,\n  targetPath: state => state.targetPath,\n  storyFrameMap: state => state.frameTable,\n  storySessionMap: state => state.sessionTable,\n  storyCharacterMap: state => state.characterTable,\n  dashRangeMap: state => state.dashRangeMap,\n  selectedCharacters: state => state.selectedCharacters,\n  selectedFrames: state => state.selectedFrames,\n  twineCharacters: state => state.twineCharacters,\n  history: state => state.history,\n  twineUsed: state => state.twineUsed\n}\n\nconst mutations = {\n  [UPDATE_REQUEST] (state, request) {\n    state.request = request\n  },\n\n  [ADD_FOCUSING_CHARACTER] (state, id) {\n    if (state.focusCharacters.indexOf(id) === -1) {\n      state.focusCharacters.push(id)\n    }\n  },\n\n  [ADD_SELECTING_CHARACTER] (state, id) {\n    // state.selectedCharacters = []\n    if (state.selectedCharacters.indexOf(id) === -1) {\n      state.selectedCharacters.push(id)\n    }\n  },\n\n  [CLEAR_SELECTING_CHARACTERS] (state, id) {\n    state.selectedCharacters = []\n  },\n\n  [RECORD_TARGET_PATH] (state, path) {\n    state.targetPath = path\n  },\n\n  [UPDATE_SVG_CARD] (state, size) {\n    state.storyConfig.canvasW = size.canvasW\n    state.storyConfig.canvasH = size.canvasH\n  },\n\n  [ADD_HISTORY] (state) {\n    state.history.push({storylines: _.cloneDeep(state.storylines), request: _.cloneDeep(state.request)})\n  }\n}\n\nconst actions = {\n  async uploadXMLFile ({ state, dispatch }, file) {\n    let xmlData = new FormData()\n    xmlData.append('file', file)\n    let response = await instance.post('/upload', xmlData)\n    if (response.data.error === 0) {\n      state.request.id = response.data.data.identifier\n      dispatch('layoutStoryline')\n    }\n  },\n\n  async layoutStoryline ({ state, commit, dispatch }) {\n    let response = await instance.post('/update', state.request)\n    if (response.data.error === 0) {\n      // load story data first\n      state.rawStorylines = response.data.data.array\n      state.sessionTable = response.data.data.sessionTable\n      state.permTable = response.data.data.perm\n      dispatch('anchorStorylines')\n      // load frameTable, characterTable\n      dispatch('updateFrameCurveSteps')\n      dispatch('updateStorySize')\n      let storyLoader = new StoryLoader(state.rawStorylines, state.sessionTable, state.frameSteps, state.curveSteps, state.storyConfig)\n      state.storylines = storyLoader.generateStorylines()\n      dispatch('updateFrameTable')\n      dispatch('updateCharacterTable')\n      // generate storylines\n      // load storyilnes using visual objects\n      state.storylines.forEach(storyline => {\n        let tmpVisualObject = new Storyline('storyline')\n        tmpVisualObject.name = storyline.name\n        tmpVisualObject.nodes = storyline.points\n        tmpVisualObject.characterId = storyline.characterId\n        commit(INSERT_VISUAL_OBJECT, tmpVisualObject)\n        state.storylineTable.set(storyline.name, tmpVisualObject.id)\n      })\n    }\n  },\n\n  // TODO: update different config files\n  async updateStoryline ({ state, commit, dispatch }) {\n    let response = await instance.post('/update', state.request)\n    if (response.data.error === 0) {\n      if (state.storylines.length > 0) {\n        // load story data first\n        state.rawStorylines = response.data.data.array\n        state.sessionTable = response.data.data.sessionTable\n        state.permTable = response.data.data.perm\n        dispatch('anchorStorylines')\n        // generate storylines\n        dispatch('updateStorySize')\n        let storyLoader = new StoryLoader(state.rawStorylines, state.sessionTable, state.frameSteps, state.curveSteps, state.storyConfig)\n        state.storylines = storyLoader.generateStorylines()\n        // update frameTable, characterTable\n        dispatch('updateFrameTable')\n        dispatch('updateCharacterTable')\n        // update visual objects\n        state.storylines.forEach(storyline => {\n          let id = state.storylineTable.get(storyline.name)\n          commit(UPDATE_STORYLINE, {id: id, nodes: storyline.points})\n        })\n      } else {\n        dispatch('layoutStoryline')\n      }\n      commit(ADD_HISTORY)\n    }\n  },\n\n  anchorStorylines ({ state }) {\n    let frameCount = state.sessionTable[0].length\n    let characterCount = state.sessionTable.length\n    if (frameCount > 0) {\n      let minCharacterY = 9999\n      for (let frame = 0; frame < frameCount; frame++) {\n        // get minimized y position of character\n        for (let character = 0; character < characterCount; character++) {\n          if (state.permTable[character][frame] === 1) {\n            let tmpY = state.rawStorylines[character].points[frame].item3\n            minCharacterY = tmpY < minCharacterY ? tmpY : minCharacterY\n          }\n        }\n      }\n      // anchor y pos of all storylines\n      let deltaY = minCharacterY - state.storyConfig.paddingTop\n      state.rawStorylines.forEach(item => {\n        let storylineNodes = item.points\n        if (item.name !== 'RABBIT') {\n          storylineNodes.forEach(node => {\n            if (node.item3 > 0) {\n              node.item3 -= deltaY\n            }\n          })\n        }\n      })\n    }\n  },\n\n  updateFrameCurveSteps ({ state }) {\n    let defaultFrameStep = state.storyConfig.frameStep\n    let defaultCurveStep = state.storyConfig.curveStep\n    let length = state.sessionTable[0].length\n    state.frameSteps = Array.apply(null, { length: length }).map((v, i) => {\n      return defaultFrameStep\n    })\n    state.curveSteps = Array.apply(null, { length: length }).map((v, i) => {\n      return defaultCurveStep\n    })\n  },\n\n  // TODO: update y-scale\n  updateStorySize ({ state }) {\n    let compensateScale = 0.6\n    // generate x-scale factor\n    let storyLength = 0\n    state.frameSteps.forEach(v => { storyLength += v })\n    state.curveSteps.forEach(v => { storyLength += v })\n    state.storyConfig.xScaleFactor = compensateScale * (state.storyConfig.canvasW - state.storyConfig.paddingLeft - state.storyConfig.paddingRight) / storyLength\n  },\n\n  updateFrameTable ({ state }) {\n    let storylines = state.storylines\n    let frameCount = state.sessionTable[0].length\n    let characterCount = state.sessionTable.length\n    let tmpFrameTable = new Map()\n    for (let frame = 0; frame < frameCount; frame++) {\n      let lBound = 1e4\n      let rBound = 0\n      let lIndex = 2 * frame\n      let rIndex = lIndex + 1\n      for (let character = 0; character < characterCount; character++) {\n        let tmpLBound = storylines[character].points[lIndex].x\n        let tmpRBound = storylines[character].points[rIndex].x\n        lBound = lBound < tmpLBound ? lBound : tmpLBound\n        rBound = rBound > tmpRBound ? rBound : tmpRBound\n      }\n      tmpFrameTable.set(frame, [lBound, rBound])\n    }\n    // let frameTable = state.frameTable\n    for (let frame = 0; frame < frameCount; frame++) {\n      let currBound = tmpFrameTable.get(frame)\n      let lBound = -1\n      let rBound = -1\n      if (frame === 0) {\n        let nextBound = tmpFrameTable.get(frame + 1)\n        lBound = currBound[0]\n        rBound = (currBound[1] + nextBound[0]) / 2\n      } else if (frame === frameCount - 1) {\n        let lastBound = tmpFrameTable.get(frame - 1)\n        lBound = (currBound[0] + lastBound[1]) / 2\n        rBound = currBound[1]\n      } else {\n        let lastBound = tmpFrameTable.get(frame - 1)\n        let nextBound = tmpFrameTable.get(frame + 1)\n        lBound = (currBound[0] + lastBound[1]) / 2\n        rBound = (currBound[1] + nextBound[0]) / 2\n      }\n      state.frameTable.set(frame, [lBound, rBound])\n    }\n  },\n\n  updateCharacterTable ({ state }) {\n    let data = state.rawStorylines\n    let yScaleFactor = state.storyConfig.yScaleFactor\n    let yBaseline = state.storyConfig.paddingTop\n    for (let frame = 0, len = data[0].points.length; frame < len; frame++) {\n      state.characterTable.set(frame, new Map())\n    }\n    // according to rawStorylines\n    for (let id = 0, len = data.length; id < len; id++) {\n      for (let frame = 0, len = data[id].points.length; frame < len; frame++) {\n        let tmpMap = state.characterTable.get(frame)\n        let tmpY = data[id].points[frame].item3\n        // console.log(id, frame, tmpY)\n        if (tmpY > 0) {\n          tmpY = data[id].points[frame].item3 * yScaleFactor + yBaseline\n          tmpMap.set(id, tmpY)\n        }\n      }\n    }\n  },\n\n  orderStoryline ({ state, dispatch }, characterId) {\n    if (characterId < state.sessionTable.length - 1) {\n      let constraints = []\n      let characterYMap = new Map()\n      state.storylines.forEach(storyline => {\n        // characterYMap.set(storyline.characterId, storyline.points[0].y)\n        for (let i = 0, len = storyline.points.length; i < len; i++) {\n          let tmpY = storyline.points[i].y\n          if (tmpY > -10000) {\n            characterYMap.set(storyline.characterId, tmpY)\n            break\n          }\n        }\n      })\n      let focusCharacterY = characterYMap.get(characterId)\n      for (var [id, y] of characterYMap) {\n        if (id === characterId || id === state.sessionTable.length - 1) {\n          continue\n        }\n        if (y > focusCharacterY) {\n          constraints.push([characterId, id])\n        } else if (y >= 0) {\n          constraints.push([id, characterId])\n        } else {\n          constraints.push([characterId, id])\n        }\n      }\n      let oldOrders = state.request.orders\n      let newOrders = constraints\n      state.request.orders = updateOrders(oldOrders, newOrders)\n    }\n    dispatch('updateStoryline')\n  },\n\n  orderSession ({state, dispatch}, obj) {\n    let flag = true\n    state.request.orderTable.forEach(item => {\n      if (item.item1 === obj.frame) {\n        // debugger\n        item.item2 = obj.order\n        flag = false\n      }\n    })\n    if (flag) {\n      state.request.orderTable.push({\n        'item1': obj.frame,\n        'item2': obj.order\n      })\n    }\n    dispatch('updateStoryline')\n  },\n\n  // deleteSession ({ state, dispatch }, bound) {\n  //   let x1 = bound.x1\n  //   let y1 = bound.y1\n  //   let x2 = bound.x2\n  //   let y2 = bound.y2\n  //   // debugger\n  //   let emphasizeSelector = new EmphasizeSelector(state.storylines, state.frameTable, state.characterTable, state.sessionTable)\n  //   emphasizeSelector.initRedSelector(x1, x2, y1, y2)\n  //   emphasizeSelector.initGreenSelector(x1, x2, y1, y2)\n  //   let result = emphasizeSelector.buildCharacterYConstraints()\n  //   let selectedSessionDict = {}\n  //   let selectedSessionList = []\n  //   result.forEach(item => {\n  //     let characterId = item.characterId\n  //     let frame = item.frame\n  //     let session = state.sessionTable[characterId][frame]\n  //     selectedSessionDict[session] = 1\n  //   })\n  //   for (var session in selectedSessionDict) {\n  //     selectedSessionList.push(parseInt(session))\n  //   }\n  //   state.request.selectedSessions = selectedSessionList\n  //   dispatch('updateStoryline')\n  // },\n\n  reshapeCharacters ({ state, dispatch }, targetPath) {\n    let characters = state.selectedCharacters\n    let len = targetPath.length\n    if (characters.length > 0 && len > 0) {\n      state.storylinesBak = _.cloneDeep(state.storylines)\n      let pathReshaper = new PathReshaper(state.storylines, state.sessionTable, state.frameTable, state.storyConfig, targetPath)\n      pathReshaper.reshapeCharacters(characters)\n    }\n  },\n\n  cancelReshape ({state}) {\n    if (state.storylinesBak.length > 0) {\n      state.storylines.forEach((storyline, i) => {\n        let orgPoints = storyline.points\n        let copyPoints = state.storylinesBak[i].points\n        orgPoints.forEach((point, j) => {\n          point.y = copyPoints[j].y\n          point.isOptimized = copyPoints[j].isOptimized\n        })\n      })\n    }\n  },\n\n  selectFrames ({state, dispatch}, select) {\n    if (state.selectedCharacters.length > 0) {\n      state.selectedFrames = []\n      // debugger\n      let selector = new StorySelector(state.frameTable, state.sessionTable, state.characterTable)\n      let sPoints = select.sPoints\n      let ePoints = select.ePoints\n      let linesNum = select.linesNum\n      for (let i = 0; i < linesNum; i++) {\n        let tmpSFrame = selector.matchFrame(sPoints[i].x, sPoints[i].y)\n        let tmpEFrame = selector.matchFrame(ePoints[i].x, ePoints[i].y)\n        if (tmpSFrame > -1 && tmpEFrame > -1) {\n          state.selectedFrames.push([tmpSFrame, tmpEFrame])\n        }\n      }\n    }\n  },\n\n  // groupCharacters ({ state, dispatch }, select) {\n  //   let groupedCharactersDict = {}\n  //   let groupedCharactersList = []\n  //   let sPoints = select.sPoints\n  //   let ePoints = select.ePoints\n  //   let len = select.linesNum\n  //   let emphasizeSelector = new EmphasizeSelector(state.storylines, state.frameTable, state.characterTable, state.sessionTable)\n  //   for (let i = 0; i < len; i++) {\n  //     let x1 = sPoints[i].x\n  //     let y1 = sPoints[i].y\n  //     let x2 = ePoints[i].x\n  //     let y2 = ePoints[i].y\n  //     emphasizeSelector.initRedSelector(x1, x2, y1, y2)\n  //     emphasizeSelector.initGreenSelector(x1, x2, y1, y2)\n  //     let result = emphasizeSelector.buildCharacterYConstraints()\n  //     result.forEach(item => {\n  //       groupedCharactersDict[item.characterId] = item.frame\n  //     })\n  //     for (let character in groupedCharactersDict) {\n  //       groupedCharactersList.push(parseInt(character))\n  //     }\n  //   }\n  //   // debugger\n  //   state.request.groupIds = groupedCharactersList\n  //   dispatch('updateStoryline')\n  // },\n\n  straightenCharacter ({ state, dispatch }, select) {\n    if (state.focusCharacters.length > 0) {\n      let selector = new StorySelector(state.frameTable, state.sessionTable, state.characterTable)\n      let characters = state.focusCharacters\n      let sPoints = select.sPoints\n      let ePoints = select.ePoints\n      let linesNum = select.linesNum\n      for (let i = 0; i < linesNum; i++) {\n        let tmpSFrame = selector.matchFrame(sPoints[i].x, sPoints[i].y)\n        let tmpEFrame = selector.matchFrame(ePoints[i].x, ePoints[i].y)\n        let length = tmpEFrame - tmpSFrame + 1\n        let tmpArr = Array.apply(null, { length: length }).map((v, i) => {\n          return tmpSFrame++\n        })\n        let oldArr = state.request.majorCharacters\n        characters.forEach(character => {\n          updateMajorCharacters(oldArr, character, tmpArr)\n        })\n      }\n      dispatch('updateStoryline')\n      state.focusCharacters = []\n    } else {\n      dispatch('breakSession', select)\n    }\n  },\n\n  breakSession ({ state, dispatch }, select) {\n    let selector = new StorySelector(state.frameTable, state.sessionTable, state.characterTable)\n    let sPoints = select.sPoints\n    let ePoints = select.ePoints\n    let linesNum = select.linesNum\n    let sessionTable = state.sessionTable\n    let sessionBreaks = []\n    let newOuterGaps = []\n    for (let i = 0; i < linesNum; i++) {\n      let frame = selector.matchFrame(sPoints[i].x, sPoints[i].y)\n      if (frame > -1) {\n        let character = selector.matchCharacterR(frame, sPoints[i].y)\n        if (character > -1) {\n          let session = sessionTable[character][frame]\n          let lastSession = session\n          let frameBak = frame\n          while (frame > -1 && lastSession === session) {\n            lastSession = sessionTable[character][--frame]\n          }\n          lastSession = frame === -1 ? session : lastSession\n          frame = frame === -1 ? frameBak - 1 : frame\n          let upperSession = findUpperSession(frame + 1, session, state.rawStorylines, sessionTable)\n          if (frame > -1 && upperSession > -1) {\n            sessionBreaks.push({\n              'session1': lastSession,\n              'session2': session,\n              'frame': frame\n            })\n            let deltaY = ePoints[i].y > sPoints[i].y ? (ePoints[i].y - sPoints[i].y) * 1.2 : 20\n            // let deltaY = ePoints[i].y > sPoints[i].y ? 220 : 20\n            newOuterGaps.push({\n              'item1': {\n                'item1': session,\n                'item2': upperSession\n              },\n              'item2': {\n                'item1': deltaY,\n                'item2': -1\n              }\n            })\n          }\n        }\n      }\n    }\n    let oldSessionBreaks = state.request.sessionBreaks\n    state.request.sessionBreaks = updateSessionBreaks(oldSessionBreaks, sessionBreaks)\n    // let oldOuterGaps = state.request.sessionOuterGaps\n    // state.request.sessionOuterGaps = updateOuterGaps(oldOuterGaps, newOuterGaps)\n    if (sessionBreaks.length > 0) {\n      dispatch('updateStoryline')\n    }\n  },\n\n  brushingCharacter ({ state, dispatch }, select) {\n    state.dashRangeMap = []\n    if (state.selectedCharacters.length > 0) {\n      let sPoints = select.sPoints\n      let ePoints = select.ePoints\n      let linesNum = select.linesNum\n      for (let i = 0; i < linesNum; i++) {\n        state.dashRangeMap.push([sPoints[i].x, ePoints[i].x])\n      }\n    }\n  },\n\n  twineCharacters ({ state, commit, dispatch }, select) {\n    console.log('twine')\n    let twineRange = [500, 10000]\n    let twineCharacters = [2, 3]\n    let storylines = [state.storylines[twineCharacters[0]], state.storylines[twineCharacters[1]]]\n\n    let copy0 = storylines[0].points.slice()\n    let copy1 = storylines[1].points.slice()\n    copy0.forEach((p, i, a) => {\n      if ((twineRange[0] < p.x && p.x < twineRange[1]) && (i % 4 === 0 || i % 4 === 1)) {\n        const t = copy1[i]\n        copy1[i] = p\n        a[i] = t\n      }\n    })\n    storylines[0].points = copy0\n    storylines[1].points = copy1\n    storylines.forEach(storyline => {\n      let id = state.storylineTable.get(storyline.name)\n      commit(UPDATE_STORYLINE, {id: id, nodes: storyline.points})\n    })\n  },\n\n  scaleSession ({ state, dispatch }, select) {\n    let sPoint = select.sPoints[0]\n    let ePoint = select.ePoints[0]\n    let deltaX = Math.abs(sPoint.x - ePoint.x)\n    let deltaY = Math.abs(sPoint.y - ePoint.y)\n    if (deltaX < deltaY) {\n      dispatch('scaleSessionVertical', select)\n    } else {\n      dispatch('scaleSessionHorizontal', select)\n    }\n  },\n\n  scaleSessionVertical ({ state, dispatch }, select) {\n    let sPoints = select.sPoints\n    let ePoints = select.ePoints\n    let linesNum = select.linesNum\n    // debugger\n    if (linesNum === 2) {\n      let emphasizeSelector = new EmphasizeSelector(state.rawStorylines, state.frameTable, state.sessionTable, state.characterTable, state.request, state.storyConfig)\n      let result = emphasizeSelector.buildSessionConstraints(sPoints, ePoints)\n      if (sPoints[0].y > ePoints[0].y) {\n        let oldInnerGaps = state.request.sessionInnerGaps\n        let newInnerGaps = result.sessionInnerGaps\n        state.request.sessionInnerGaps = updateInnerGaps(oldInnerGaps, newInnerGaps)\n        console.log('vertical scale innergap')\n        dispatch('updateStoryline')\n      } else if (sPoints[0].y < ePoints[0].y) {\n        let oldOuterGaps = state.request.sessionOuterGaps\n        let newOuterGaps = result.sessionOuterGaps\n        state.request.sessionOuterGaps = updateOuterGaps(oldOuterGaps, newOuterGaps)\n        console.log('vertical scale outergap')\n        dispatch('updateStoryline')\n      }\n    }\n  },\n\n  scaleSessionHorizontal ({ state, dispatch, commit }, select) {\n    let frameScaler = new FrameScaler(state.frameTable, state.sessionTable, state.characterTable, state.frameSteps, state.curveSteps)\n    let sPoints = select.sPoints\n    let ePoints = select.ePoints\n    frameScaler.scale(sPoints, ePoints)\n    dispatch('updateStorySize')\n    let storyLoader = new StoryLoader(state.rawStorylines, state.sessionTable, state.frameSteps, state.curveSteps, state.storyConfig)\n    state.storylines = storyLoader.generateStorylines()\n    dispatch('updateFrameTable')\n    // update visual objects\n    state.storylines.forEach(storyline => {\n      let id = state.storylineTable.get(storyline.name)\n      commit(UPDATE_STORYLINE, {id: id, nodes: storyline.points})\n    })\n  },\n\n  [UNDO] ({ state, dispatch, commit }) {\n    if (state.history.length > 0) {\n      let last = state.history[state.history.length - 1]\n      state.storylines = last.storylines\n      state.storylines.forEach(storyline => {\n        let id = state.storylineTable.get(storyline.name)\n        commit(UPDATE_STORYLINE, {id: id, nodes: storyline.points})\n      })\n      state.request = last.request\n      state.history.splice(-1, 1)\n    }\n  }\n}\n\nfunction updateMajorCharacters (oldArr, character, arr) {\n  let flag = true\n  oldArr.forEach(item => {\n    if (item.item1 === character) {\n      item.item2 = arr\n      flag = false\n    }\n  })\n  if (flag) {\n    oldArr.push({\n      item1: character,\n      item2: arr\n    })\n  }\n}\n\nfunction findUpperSession (frame, session, rawStorylines, sessionTable) {\n  let charactersY = []\n  for (let id = 0, len = rawStorylines.length; id < len; id++) {\n    let yPos = rawStorylines[id].points[frame].item3\n    if (yPos > 0) {\n      charactersY.push({\n        id: id,\n        yPos: yPos\n      })\n    }\n  }\n  // sort characters from bottom to top\n  charactersY.sort((a, b) => {\n    return b.yPos - a.yPos\n  })\n  let upperSession = -1\n  for (let i = 0, len = charactersY.length; i < len; i++) {\n    let characterId = charactersY[i].id\n    let tmpSession = sessionTable[characterId][frame]\n    if (tmpSession === session && i < len - 1) {\n      upperSession = sessionTable[charactersY[i + 1].id][frame]\n    }\n  }\n  return upperSession === session ? 9999 : upperSession\n}\n\nfunction updateInnerGaps (oldArr, newArr) {\n  let sessionMap = new Map()\n  let sessionArr = []\n  oldArr.forEach(session => {\n    sessionMap.set(session.item1, session.item2)\n  })\n  newArr.forEach(session => {\n    sessionMap.set(session.item1, session.item2)\n  })\n  for (let [sessionId, gap] of sessionMap) {\n    sessionArr.push({\n      item1: sessionId,\n      item2: gap\n    })\n  }\n  return sessionArr\n}\n\nfunction updateOuterGaps (oldArr, newArr) {\n  let sessionMap = new Map()\n  let sessionArr = []\n  // let sessionOuterGap = 54\n  oldArr.forEach(pair => {\n    let sItem = pair.item1.item1 < pair.item1.item2 ? pair.item1.item1 : pair.item1.item2\n    let eItem = pair.item1.item1 > pair.item1.item2 ? pair.item1.item1 : pair.item1.item2\n    if (eItem > sItem) {\n      if (!sessionMap.has(sItem)) {\n        sessionMap.set(sItem, new Map())\n      }\n      let subMap = sessionMap.get(sItem)\n      subMap.set(eItem, pair.item2)\n    }\n  })\n  newArr.forEach(pair => {\n    let sItem = pair.item1.item1 < pair.item1.item2 ? pair.item1.item1 : pair.item1.item2\n    let eItem = pair.item1.item1 > pair.item1.item2 ? pair.item1.item1 : pair.item1.item2\n    if (eItem > sItem) {\n      if (!sessionMap.has(sItem)) {\n        sessionMap.set(sItem, new Map())\n      }\n      let subMap = sessionMap.get(sItem)\n      if (subMap.has(eItem)) {\n        // let scaleFactor = oldArr.length > 0 ? pair.item2.item1 / sessionOuterGap : 1\n        // let oldPair = subMap.get(eItem)\n        subMap.set(eItem, {\n          // 'item1': oldPair.item1 * scaleFactor,\n          // 'item2': oldPair.item1 * scaleFactor + 30\n          'item1': pair.item2.item1,\n          'item2': -1\n        })\n      } else {\n        subMap.set(eItem, pair.item2)\n      }\n    }\n  })\n  for (let [session1, subMap] of sessionMap) {\n    for (let [session2, gap] of subMap) {\n      sessionArr.push({\n        item1: {\n          item1: session1,\n          item2: session2\n        },\n        item2: gap\n      })\n    }\n  }\n  return sessionArr\n}\n\nfunction updateOrders (oldArr, newArr) {\n  let ordersMap = new Map()\n  let ordersArr = []\n  oldArr.forEach(order => {\n    if (!ordersMap.has(order[0])) {\n      ordersMap.set(order[0], new Map())\n    }\n    let subMap = ordersMap.get(order[0])\n    subMap.set(order[1], 1)\n  })\n  newArr.forEach(order => {\n    // remove conflict order\n    if (ordersMap.has(order[1])) {\n      let subMap = ordersMap.get(order[1])\n      if (subMap.has(order[0])) {\n        subMap.set(order[0], 0)\n      }\n    }\n    if (!ordersMap.has(order[0])) {\n      ordersMap.set(order[0], new Map())\n    }\n    let subMap = ordersMap.get(order[0])\n    subMap.set(order[1], 1)\n  })\n  for (let [sId, subMap] of ordersMap) {\n    for (let [eId, flag] of subMap) {\n      if (flag === 1 && sId !== eId) {\n        ordersArr.push([sId, eId])\n      }\n    }\n  }\n  return ordersArr\n}\n\nfunction updateSessionBreaks (oldArr, newArr) {\n  let updatedArr = []\n  let existingBreakMap = new Map()\n  oldArr.forEach(item => {\n    let frame = item.frame\n    let session1 = item.session1\n    let session2 = item.session2\n    if (existingBreakMap.has(frame)) {\n      let tmpMap = existingBreakMap.get(frame)\n      tmpMap.set(session1, session2)\n    } else {\n      let tmpMap = new Map()\n      tmpMap.set(session1, session2)\n      existingBreakMap.set(frame, tmpMap)\n    }\n  })\n  newArr.forEach(item => {\n    let frame = item.frame\n    let session1 = item.session1\n    let session2 = item.session2\n    if (existingBreakMap.has(frame)) {\n      let tmpMap = existingBreakMap.get(frame)\n      tmpMap.set(session1, session2)\n    } else {\n      let tmpMap = new Map()\n      tmpMap.set(session1, session2)\n      existingBreakMap.set(frame, tmpMap)\n    }\n  })\n  for (let [frame, item] of existingBreakMap) {\n    for (let [session1, session2] of item) {\n      updatedArr.push({\n        'frame': frame,\n        'session1': session1,\n        'session2': session2\n      })\n    }\n  }\n  return updatedArr\n}\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/StoryStore.js","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-a1ac8c8c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-a1ac8c8c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-65897df7\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreePanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreePanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreePanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-65897df7\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreePanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/panels/TreePanel/TreePanel.vue\n// module id = MIrv\n// module chunks = 1","<template>\n  <div class=\"box-card\"\n    :style=\"position\">\n    <div class=\"state\"\n      v-for=\"(state, index) in states\"\n      @click=\"handleClick(state)\"\n      :key=\"index\">\n      {{state}}\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ContextMenu',\n\n  props: ['recordX', 'recordY', 'scrollX', 'scrollY'],\n\n  data () {\n    return {\n      states: [\n        'Hide',\n        'Scale',\n        'Reshape',\n        'Copy',\n        // 'Cut',\n        'Paste',\n        'Group',\n        'Ungroup',\n        'Cancel'\n      ]\n    }\n  },\n\n  computed: {\n    position () {\n      return {\n        top: `${this.recordY}px`,\n        left: `${this.recordX}px`\n      }\n    }\n  },\n\n  methods: {\n    handleClick (state) {\n      switch (state) {\n        case 'Reshape':\n          this.$store.dispatch('reshapeFocusObject')\n          break\n        case 'Scale':\n          this.$store.dispatch('scaleFocusObject')\n          break\n        case 'Hide':\n          this.$store.dispatch('hideFocusObject')\n          break\n        case 'Cancel':\n          this.$store.dispatch('cancelFocusObject')\n          break\n        case 'Copy':\n          this.$store.dispatch('copyFocusObject')\n          break\n        case 'Paste':\n          this.$store.dispatch('pasteFocusObject', {\n            x: this.recordX + this.scrollX,\n            y: this.recordY + this.scrollY\n          })\n          break\n        case 'Cut':\n          this.$store.dispatch('cutFocusObject')\n          break\n        case 'Group':\n          this.$store.dispatch('groupObjects')\n          break\n        default:\n          break\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  .box-card {\n    position: absolute;\n    padding: 0px;\n    border: 1px solid #ddd;\n\n    .state {\n      width: 160px;\n      padding: 8px 10px;\n      font-size: 14px;\n      text-align: center;\n      border-bottom: 1px solid #ddd;\n    }\n\n    .state:hover {\n      background-color: #EEE;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/menus/ContextMenu.vue","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport store from './store'\n\n// Icon List\nimport 'vue-awesome/icons/arrows'\nimport 'vue-awesome/icons/pencil'\nimport 'vue-awesome/icons/send'\nimport 'vue-awesome/icons/square-o'\nimport 'vue-awesome/icons/text-width'\nimport 'vue-awesome/icons/rotate-right'\nimport 'vue-awesome/icons/rotate-left'\nimport 'vue-awesome/icons/file-text'\nimport 'vue-awesome/icons/file-image-o'\nimport 'vue-awesome/icons/square'\nimport 'vue-awesome/icons/sliders'\nimport 'vue-awesome/icons/bold'\nimport 'vue-awesome/icons/italic'\nimport 'vue-awesome/icons/font'\nimport 'vue-awesome/icons/text-height'\nimport 'vue-awesome/icons/map'\nimport 'vue-awesome/icons/navicon'\nimport 'vue-awesome/icons/plus'\nimport 'vue-awesome/icons/save'\n\nimport Icon from 'vue-awesome/components/Icon'\nimport TreeNode from './components/panelbar/panels/TreePanel/TreeNode'\nimport ToolSlider from './components/utils/ToolSlider'\nimport FontAwesomeIcon from '@fortawesome/vue-fontawesome'\nimport { VTooltip, VPopover, VClosePopover } from 'v-tooltip'\n\nVue.directive('tooltip', VTooltip)\nVue.directive('close-popover', VClosePopover)\nVue.component('v-popover', VPopover)\nVue.component('icon', Icon)\nVue.component('tree-node', TreeNode)\nVue.component('tool-slider', ToolSlider)\nVue.component('font-awesome-icon', FontAwesomeIcon)\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  store,\n  template: '<App/>',\n  components: { App, Icon }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1bd8595a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SidePanelBar.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SidePanelBar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SidePanelBar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1bd8595a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SidePanelBar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/SidePanelBar.vue\n// module id = NZGm\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{class:_vm.klass,style:(_vm.style),attrs:{\"version\":\"1.1\",\"role\":_vm.label ? 'img' : 'presentation',\"aria-label\":_vm.label,\"x\":_vm.x,\"y\":_vm.y,\"width\":_vm.width,\"height\":_vm.height,\"viewBox\":_vm.box}},[_vm._t(\"default\",[(_vm.icon && _vm.icon.paths)?_vm._l((_vm.icon.paths),function(path,i){return _c('path',_vm._b({key:(\"path-\" + i)},'path',path,false))}):_vm._e(),_vm._v(\" \"),(_vm.icon && _vm.icon.polygons)?_vm._l((_vm.icon.polygons),function(polygon,i){return _c('polygon',_vm._b({key:(\"polygon-\" + i)},'polygon',polygon,false))}):_vm._e(),_vm._v(\" \"),(_vm.icon && _vm.icon.raw)?[_c('g',{domProps:{\"innerHTML\":_vm._s(_vm.raw)}})]:_vm._e()])],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e22f0aa\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/vue-awesome/components/Icon.vue\n// module id = O0jz\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Pentagon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Pentagon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5dd72131\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Pentagon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Pentagon.vue\n// module id = O1zv\n// module chunks = 1","const UP = -1;\nconst DOWN = 1;\nconst SAME = 0;\n\nexport class SplineTwister {\n  constructor(data, sessionTable, storyConfig) {\n    this.data = data;\n    this.sessionTable = sessionTable;\n    this.storyConfig = storyConfig;\n  }\n\n  twist(unit) {\n    if (!this.validateData()) {\n      console.error(\"invalid input data\");\n    }\n\n    let maxOffset = 0;\n    let data = this.data;\n\n    let sessionTable = this.sessionTable;\n\n    let timeframeCount = this.data[0].points.length / 2;\n    let characterCount = this.data.length;\n\n    let characterByOrders = [];\n    for (let timeframe = 0; timeframe < timeframeCount; timeframe++) {\n      let right = timeframe * 2 + 1;\n      let characterByOrder = [];\n\n      for (let character = 0; character < characterCount; character++) {\n        characterByOrder.push({\n          character: character,\n          y: data[character].points[right].y\n        });\n      }\n\n      characterByOrder.sort((a, b) => a.y - b.y);\n      characterByOrders.push(characterByOrder);\n    }\n\n    let acc = 0;\n    for (let timeframe = 0; timeframe < timeframeCount - 1; timeframe++) {\n      let left = timeframe * 2; // value on left side may be negative\n      let right = timeframe * 2 + 1;\n      let nextTimefram = timeframe + 1;\n      let nextLeft = left + 2;\n      let nextRight = right + 2;\n\n      let characterList = characterByOrders[timeframe];\n      let nextCharacterList = characterByOrders[timeframe + 1];\n\n      let upSet = [];\n      let downSet = [];\n      let up = [];\n      let down = [];\n      let previousDirection = SAME;\n      let lastDiff = -1\n      let lastY = -1\n      let composation = []\n      characterList.forEach(({ character, y }, i) => {\n        let nextY = data[character].points[nextRight].y;\n\n        let diff = 0;\n        if (y > -1 && nextY > -1) {\n          diff = Math.round(nextY - y);\n        }\n        if (Math.abs(diff) < 0.0001) {\n          // same\n          return;\n        }\n\n        let currentDirection = diff > 0 ? DOWN : UP;\n        if (currentDirection === DOWN) {\n          // down\n          if (previousDirection === UP && up.length > 0) {\n            upSet.push(up);\n            up = [];\n          }\n          if (lastDiff === -1 || lastY === -1) {\n            down.push(character);\n            lastDiff = diff\n          } else if (Math.abs(lastDiff - diff) < 100 && Math.abs(y - lastY) < 100) {\n            down.push(character);\n          } else {\n            downSet.push(down)\n            down = [character]\n            lastDiff = diff\n          }\n          previousDirection = DOWN;\n        } else {\n          // up\n          if (previousDirection === DOWN && down.length > 0) {\n            downSet.push(down);\n            down = [];\n          }\n          if (lastDiff === -1 || lastY === -1) {\n            up.push(character)\n            lastDiff = diff\n          } else if (Math.abs(lastDiff - diff) < 100 && Math.abs(y - lastY) < 100) {\n            up.push(character)\n          } else {\n            upSet.push(up)\n            up = [character]\n            lastDiff = diff\n          }\n          up.push(character);\n          previousDirection = UP;\n        }\n        lastY = y\n      });\n      // if direction never change\n      if (up.length > 0) {\n        upSet.push(up);\n        up = [];\n      }\n      if (down.length > 0) {\n        downSet.push(down);\n        down = [];\n      }\n\n      [upSet, downSet] = this.cleanUpDownSet(upSet, downSet)\n\n      let maxXDiff = 0;\n      for (let charactersArray of upSet) {\n        maxXDiff = Math.max(\n          SplineTwister.internalTwist(charactersArray, unit, UP, data, right),\n          maxXDiff\n        );\n      }\n\n      for (let charactersArray of downSet) {\n        maxXDiff = Math.max(\n          SplineTwister.internalTwist(charactersArray, unit, DOWN, data, right),\n          maxXDiff\n        );\n      }\n\n      // for (let charArray of upSet) {\n      //   if (charArray.length === 1) {\n      //     continue\n      //   }\n      //   for (let i = 0; i < charArray.length; i++) {\n      //     data[charArray[i]].points[nextLeft].x -= maxXDiff\n      //   }\n      // }\n\n      // for (let charArray of downSet) {\n      //   if (charArray.length === 1) {\n      //     continue\n      //   }\n      //   for (let i = charArray.lenth - 1; i >= 0; i--) {\n      //     data[charArray[i]].points[nextLeft].x -= maxXDiff\n      //   }\n      // }\n\n      // TOOD: O(n^2) -> O(n)\n      for (let info of data) {\n        for (let i = nextRight; i < info.points.length; i++) {\n          info.points[i].x += maxXDiff;\n        }\n      }\n    }\n    this.fixWrongPosition(data)\n    this.scalePosition(data)\n  }\n\n  fixWrongPosition (data) {\n    let delta = 20\n    let rowLen = data.length\n    let colLen = data[0].points.length\n    for (let i = 0; i < colLen - 1; i++) {\n      let minDelta = 1000\n      for (let c = 0; c < rowLen; c++) {\n        let tmpY = data[c].points[i].y\n        let tmpNextY = data[c].points[i + 1].y\n        if (tmpY > -1 && tmpNextY > -1) {\n          let tmpDelta = data[c].points[i + 1].x - data[c].points[i].x\n          minDelta = Math.min(minDelta, tmpDelta)\n        }\n      }\n      if (minDelta < 0) {\n        let moveDistance = -minDelta + delta\n        // console.log(moveDistance)\n        for (let j = i + 1; j < colLen; j++) {\n          for (let c = 0; c < rowLen; c++) {\n            data[c].points[j].x += moveDistance\n          }\n        }\n      }\n    }\n  }\n\n  scalePosition (data) {\n    let n = data[0].points.length - 1\n    let xMin = data[0].points[0].x\n    let xMax = 0\n    for (let k = 0, len = data.length; k < len; k++) {\n      let tmpXMax = data[k].points[n].x\n      xMax = xMax > tmpXMax ? xMax : tmpXMax\n    }\n    // debugger\n    let leftBound = this.storyConfig.paddingLeft\n    let xScaleFactor = (this.storyConfig.canvasW - leftBound - this.storyConfig.paddingRight) / (xMax - xMin)\n    if (xScaleFactor < 1) {\n      // console.log(xScaleFactor)\n      // do scale here\n      data.forEach(item => {\n        let storyline = item.points\n        storyline.forEach(point => {\n          point.x *= xScaleFactor\n        })\n      })      \n    }\n  }\n\n  cleanUpDownSet (upSet, downSet) {\n    let _upSet = []\n    let _downSet = []\n    upSet.forEach(up => {\n      let tmpUp = []\n      up.forEach(c => {\n        if (tmpUp.indexOf(c) === -1) {\n          tmpUp.push(c)\n        }\n      })\n      _upSet.push(tmpUp)\n    })\n    downSet.forEach(down => {\n      let tmpDown = []\n      down.forEach(c => {\n        if (tmpDown.indexOf(c) === -1) {\n          tmpDown.push(c)\n        }\n      })\n      _downSet.push(tmpDown)\n    })\n    return [_upSet, _downSet]\n  }\n\n  validateData() {\n    let data = this.data;\n    if (!data) {\n      return false;\n    }\n\n    let size = -1;\n\n    for (let v of data) {\n      let currentLength = v.points.length;\n      if (currentLength % 2 !== 0) {\n        return false;\n      }\n      if (size === -1) {\n        size = currentLength;\n      } else {\n        if (currentLength !== size) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  static calculateMoveDistance(distance, arc) {\n    return distance * Math.tan(arc / 2);\n  }\n\n  static internalTwist(charactersArray, factor, direction, data, right) {\n    let maxXDiff = 0;\n    let nextLeft = right + 1;\n    let nextRight = right + 2;\n    if (direction !== SAME && charactersArray.length > 1) {\n      // up\n      // move latter ones to right\n      let up = direction === UP;\n      let anchor = up\n        ? charactersArray[0]\n        : charactersArray[charactersArray.length - 1];\n      let xDiff =\n        data[anchor].points[nextLeft].x - data[anchor].points[right].x;\n\n      // move this right and next left\n      if (up) {\n        for (let i = 1; i < charactersArray.length; i++) {\n          let c = charactersArray[i];\n          let pc = charactersArray[i - 1];\n          let diff = data[c].points[nextRight].y - data[c].points[right].y;\n          let yDiff = data[c].points[right].y - data[pc].points[right].y;\n          let unitMoveDistance = Math.abs(\n            SplineTwister.calculateMoveDistance(yDiff, Math.atan2(diff, xDiff))\n          );\n          let moveDistance = unitMoveDistance * factor;\n          data[c].points[right].x = data[pc].points[right].x + moveDistance;\n          data[c].points[nextLeft].x = data[pc].points[nextLeft].x + moveDistance;\n          maxXDiff = Math.max(moveDistance, maxXDiff);\n        }\n      } else {\n        for (let i = charactersArray.length - 2; i >= 0; i--) {\n          let c = charactersArray[i];\n          let yDiff = data[anchor].points[right].y - data[c].points[right].y;\n          let diff = data[c].points[nextRight].y - data[c].points[right].y;\n          let unitMoveDistance = Math.abs(\n            SplineTwister.calculateMoveDistance(yDiff, Math.atan2(diff, xDiff))\n          );\n          let moveDistance = unitMoveDistance * factor;\n          data[c].points[right].x += moveDistance;\n          data[c].points[nextLeft].x += moveDistance;\n          maxXDiff = Math.max(moveDistance, maxXDiff);\n        }\n      }\n      // composation for adding x\n    }\n    return maxXDiff;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/types/SplineTwister.js","import { CardObject } from '../../types/CardObject'\n\nconst state = {\n  paintingCardList: [],\n  paintingCardCount: 0\n}\n\nconst getters = {\n  paintingCardCount: state => state.paintingCardCount,\n  paintingCardList: state => state.paintingCardList\n}\n\nconst mutations = {}\n\nconst actions = {\n  addPaintingCard ({ state }) {\n    let id = state.paintingCardCount++\n    let card = new CardObject(id)\n    state.paintingCardList.push(card)\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/CardStore.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Twining'),expression:\"'Twining'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon,\"transform\":\"shrink1.5\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d2ea0aec\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/LinkTool.vue\n// module id = Oky+\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-panel\"},[_c('div',{staticClass:\"font-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.fontSize),expression:\"focusText.fontSize\"}],attrs:{\"type\":\"text\",\"name\":\"fontSize\",\"placeholder\":\"font size\"},domProps:{\"value\":(_vm.focusText.fontSize)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"fontSize\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"font-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.fontFamily),expression:\"focusText.fontFamily\"}],attrs:{\"type\":\"text\",\"name\":\"fontFamily\",\"placeholder\":\"font family\"},domProps:{\"value\":(_vm.focusText.fontFamily)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"fontFamily\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"font-wrapper\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.color),expression:\"focusText.color\"}],attrs:{\"type\":\"text\",\"name\":\"textColor\",\"placeholder\":\"text color\"},domProps:{\"value\":(_vm.focusText.color)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"color\", $event.target.value)}}})]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.focusText.content),expression:\"focusText.content\"}],attrs:{\"name\":\"textContent\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"insert text content\"},domProps:{\"value\":(_vm.focusText.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.focusText, \"content\", $event.target.value)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-732e8251\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/panels/TextPanel.vue\n// module id = PCxI\n// module chunks = 1","<template>\n  <div  v-tooltip=\"'Bending'\">\n    <font-awesome-icon :icon=\"icon\" />\n  </div>\n</template>\n\n<script>\nimport Icon from '@fortawesome/fontawesome-free-solid/faHandPaper'\n\nexport default {\n  name: 'BendTool',\n\n  computed: {\n    icon () {\n      return Icon\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/BendTool.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ScaleSelect.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ScaleSelect.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-63cb121b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ScaleSelect.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/utils/ScaleSelect.vue\n// module id = R/my\n// module chunks = 1","<template>\n  <div v-tooltip=\"'Twining'\">\n    <font-awesome-icon :icon=\"icon\" transform=\"shrink1.5\"/>\n  </div>\n</template>\n\n<script>\nimport Icon from '@fortawesome/fontawesome-free-solid/faSpinner'\n\nexport default {\n  name: 'LinkTool',\n\n  computed: {\n    icon () {\n      return Icon\n    }\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/LinkTool.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('rect',{attrs:{\"x\":_vm.node.x-_vm.squareSize/2,\"y\":_vm.node.y-_vm.squareSize/2,\"width\":_vm.squareSize,\"height\":_vm.squareSize,\"fill\":\"white\",\"stroke\":\"black\",\"stroke-width\":\"1\"},on:{\"mousedown\":function($event){return _vm.handleMousedown($event)},\"click\":_vm.handleClick,\"contextmenu\":_vm.handleContextmenu}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0becab1a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/utils/ControlNode.vue\n// module id = Skty\n// module chunks = 1","<template>\n  <scaleframe\n    @rotate=\"rotate($event)\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\">\n  </scaleframe>\n</template>\n\n<script>\nimport ScaleFrame from './ScaleFrame'\n\nexport default {\n  name: 'RotateFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data () {\n    return {\n      sin: 0,\n      cos: 0\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    }\n  },\n\n  methods: {\n    rotate ({sin, cos}) {\n      this.sin = sin\n      this.cos = cos\n      this.object.rotate(sin, cos)\n    }\n  },\n\n  components: {\n    scaleframe: ScaleFrame\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/frames/RotateFrame.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Save'),expression:\"'Save'\"}],staticClass:\"save-tool\",on:{\"click\":_vm.handleClick}},[_c('icon',{attrs:{\"name\":\"save\",\"scale\":\"1.5\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e1f692d8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/SaveTool.vue\n// module id = UiOb\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Undo'),expression:\"'Undo'\"}],staticClass:\"undo-tool\",on:{\"click\":_vm.handleClick}},[_c('icon',{attrs:{\"name\":\"rotate-left\",\"scale\":\"1.5\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e77dd880\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/UndoTool.vue\n// module id = Vn2c\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Scaling'),expression:\"'Scaling'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fc24ff6e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/ScaleTool.vue\n// module id = W1Js\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"workspace\"},on:{\"click\":function($event){return _vm.handleClick($event)},\"contextmenu\":function($event){return _vm.handleContextmenu($event)},\"mousemove\":function($event){return _vm.handleMousemove($event)},\"mousedown\":function($event){return _vm.handleMousedown($event)},\"mouseup\":function($event){return _vm.handleMouseup($event)}}},[_c('div',{staticClass:\"painting\",on:{\"scroll\":_vm.handleScroll}},_vm._l((_vm.paintingCardList),function(card){return _c('svg-card',{key:card.id,attrs:{\"cardObject\":card,\"scrollX\":_vm.paintingScrollX,\"scrollY\":_vm.paintingScrollY,\"mouse\":_vm.mouse}})}),1),_vm._v(\" \"),_c('context-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowContextMenu),expression:\"isShowContextMenu\"}],attrs:{\"scrollX\":_vm.paintingScrollX,\"scrollY\":_vm.paintingScrollY,\"recordX\":_vm.contextMenuPositionX,\"recordY\":_vm.contextMenuPositionY}}),_vm._v(\" \"),_c('color-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingFillColor),expression:\"isUsingFillColor\"}],staticClass:\"fillpicker\",model:{value:(_vm.objectStyle.fill),callback:function ($$v) {_vm.$set(_vm.objectStyle, \"fill\", $$v)},expression:\"objectStyle.fill\"}}),_vm._v(\" \"),_c('color-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingStrokeColor),expression:\"isUsingStrokeColor\"}],staticClass:\"strokepicker\",model:{value:(_vm.objectStyle.stroke),callback:function ($$v) {_vm.$set(_vm.objectStyle, \"stroke\", $$v)},expression:\"objectStyle.stroke\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-eefc79a0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/WorkSpace.vue\n// module id = WZ6U\n// module chunks = 1","export class CardObject {\n  constructor (id) {\n    this.id = id\n    this.zIndex = 0\n    this.geometry = {\n      positionX: 0,\n      positionY: 0,\n      width: 100,\n      height: 100\n    }\n  }\n\n  get ID () {\n    return this.id\n  }\n\n  get width () {\n    return this.geometry.width\n  }\n\n  get height () {\n    return this.geometry.height\n  }\n\n  get positionX () {\n    return this.geometry.positionX\n  }\n\n  get positionY () {\n    return this.geometry.positionY\n  }\n\n  get depth () {\n    return this.zIndex\n  }\n\n  updateID (id) {\n    this.id = id\n  }\n\n  updateGeometry (x, y, w, h) {\n    this.geometry.positionX = x\n    this.geometry.positionY = y\n    this.geometry.width = w\n    this.geometry.height = h\n  }\n\n  updateZIndex (zIndex) {\n    this.zIndex = zIndex\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/CardObject.js","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0f8ed344\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TextObject.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextObject.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextObject.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0f8ed344\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TextObject.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/objects/TextObject.vue\n// module id = X9oV\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.object.type === 'customshape')?_c('customshape',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'storyline')?_c('storyline',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity},on:{\"storylineSelect\":_vm.handleStorylineStyle}}):(_vm.object.type === 'triangle')?_c('triangleg',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'rectangle')?_c('rectangleg',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'pentagon')?_c('pentagong',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'hexagon')?_c('hexagong',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'line')?_c('lineg',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":3,\"opacity\":_vm.style.opacity}}):(_vm.object.type === 'echelon')?_c('echelong',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount,\"fillColor\":_vm.fillColor,\"strokeColor\":_vm.strokeColor,\"strokeWidth\":_vm.style.strokeWidth,\"opacity\":_vm.style.opacity}}):_vm._e()}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-04094dac\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/frames/StyleFrame.vue\n// module id = XW8H\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3960e457\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ToolBox.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolBox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolBox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3960e457\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ToolBox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/ToolBox.vue\n// module id = YRYm\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./OrderTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./OrderTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-798aca9f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./OrderTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/OrderTool.vue\n// module id = YfC9\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e1f692d8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SaveTool.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SaveTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SaveTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e1f692d8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SaveTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/SaveTool.vue\n// module id = Yq7S\n// module chunks = 1","<template>\n  <div class=\"shape-panel\">\n    <div class=\"style-card\">\n      <div class=\"color-wrapper\" @click=\"handleFillColor\">\n        Fill\n        <input type=\"text\" name=\"fillColor\" :style=\"fillColor\" readonly=\"readonly\">\n      </div>\n      <div class=\"color-wrapper\" @click=\"handleStrokeColor\">\n        Stroke\n        <input type=\"text\" name=\"strokeColor\" :style=\"strokeColor\" readonly=\"readonly\">\n      </div>\n      <div class=\"slider-wrapper\">\n        Width\n        <tool-slider\n          @updateSliderVal=\"updateStrokeWidth($event)\"\n          :modelVal=\"objectStyle.strokeWidth\"\n          :min=\"0\"\n          :max=\"10\"\n          :step=\"0.1\">\n        </tool-slider>\n      </div>\n      <div class=\"slider-wrapper\">\n        Opacity\n        <tool-slider\n          @updateSliderVal=\"updateOpacity($event)\"\n          :modelVal=\"objectStyle.opacity\"\n          :min=\"0\"\n          :max=\"1\"\n          :step=\"0.01\">\n        </tool-slider>\n      </div>\n    </div>\n    <div class=\"shape-row\">\n      <div class=\"shape-item\" @click=\"handleRectangle\">\n        <!-- <svg class=\"shape-item-svg\">\n          <rect x=\"13\" y=\"20\" width=\"60\" height=\"40\" style=\"fill:none;stroke-width:2;stroke:#333\"/>\n          <text x=\"20\" y=\"42\" font-size=\"14\">Rectangle</text>\n        </svg> -->\n        Rectangle\n      </div>\n      <div class=\"shape-item\" @click=\"handleTriangle\">\n        <!-- <svg class=\"shape-item-svg\">\n          <rect x=\"13\" y=\"20\" width=\"60\" height=\"40\" style=\"fill:none;stroke-width:2;stroke:#333\"/>\n          <text x=\"20\" y=\"42\" font-size=\"14\">Triangle</text>\n        </svg> -->\n        Triangle\n      </div>\n      <div class=\"shape-item\" @click=\"handlePentagon\">\n        <!-- <svg class=\"shape-item-svg\">\n          <rect x=\"13\" y=\"20\" width=\"60\" height=\"40\" style=\"fill:none;stroke-width:2;stroke:#333\"/>\n          <text x=\"20\" y=\"42\" font-size=\"14\">Pentagon</text>\n        </svg> -->\n        Pentagon\n      </div>      \n    </div>\n    <div class=\"shape-row\">\n      <div class=\"shape-item\" @click=\"handleHexagon\">\n        <!-- <svg class=\"shape-item-svg\">\n          <rect x=\"13\" y=\"20\" width=\"60\" height=\"40\" style=\"fill:none;stroke-width:2;stroke:#333\"/>\n          <text x=\"20\" y=\"42\" font-size=\"14\">Hexagon</text>\n        </svg> -->\n        Hexagon\n      </div>\n      <div class=\"shape-item\" @click=\"handleEchelon\">\n        <!-- <svg class=\"shape-item-svg\">\n          <rect x=\"13\" y=\"20\" width=\"60\" height=\"40\" style=\"fill:none;stroke-width:2;stroke:#333\"/>\n          <text x=\"20\" y=\"42\" font-size=\"14\">Echelon</text>\n        </svg> -->\n        Echelon\n      </div>\n      <div class=\"shape-item\" @click=\"handleLine\">\n        <!-- <svg class=\"shape-item-svg\">\n          <rect x=\"13\" y=\"20\" width=\"60\" height=\"40\" style=\"fill:none;stroke-width:2;stroke:#333\"/>\n          <text x=\"20\" y=\"42\" font-size=\"14\">Line</text>\n        </svg> -->\n        Custom\n      </div>      \n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { RegularShape, CustomShape } from '../../../types/VisualObject'\nimport VisualObject from '../../workspace/objects/VisualObject'\nimport {\n  INSERT_VISUAL_OBJECT,\n  OPEN_FILL_COLOR,\n  CLOSE_FILL_COLOR,\n  OPEN_STROKE_COLOR,\n  CLOSE_STROKE_COLOR,\n  OPEN_TOOL,\n  CLOSE_TOOL\n} from '../../../store/MutationTypes'\n\nexport default {\n  name: 'ShapePanel',\n\n  data () {\n    return {\n      shapeType: ''\n    }\n  },\n\n  computed: {\n    fillColor () {\n      return {\n        'background': this.objectStyle.fill.hex\n      }\n    },\n\n    strokeColor () {\n      return {\n        'background': this.objectStyle.stroke.hex\n      }\n    },\n\n    ...mapGetters([\n      'isUsingFillColor',\n      'isUsingStrokeColor',\n      'isUsingPenTool',\n      'objectStyle',\n      'focusText'\n    ])\n  },\n\n  methods: {\n    handleRectangle () {\n      this.insertShape('rectangle')\n      this.$store.commit(CLOSE_TOOL, 'PenTool')\n    },\n\n    handleHexagon () {\n      this.insertShape('hexagon')\n      this.$store.commit(CLOSE_TOOL, 'PenTool')\n    },\n\n    handlePentagon () {\n      this.insertShape('pentagon')\n      this.$store.commit(CLOSE_TOOL, 'PenTool')\n    },\n\n    handleTriangle () {\n      this.insertShape('triangle')\n      this.$store.commit(CLOSE_TOOL, 'PenTool')\n    },\n\n    handleEchelon () {\n      this.insertShape('echelon')\n      this.$store.commit(CLOSE_TOOL, 'PenTool')\n    },\n\n    handleLine () {\n      // this.insertShape('line')\n      if (this.isUsingPenTool) {\n        this.$store.commit(CLOSE_TOOL, 'PenTool')\n      } else {\n        this.$store.commit(OPEN_TOOL, 'PenTool')\n      }\n    },\n\n    insertShape (type) {\n      if (type) {\n        let insertShape = new RegularShape(type)\n        this.$store.commit(INSERT_VISUAL_OBJECT, insertShape)\n      }\n    },\n\n    updateOpacity (event) {\n      this.objectStyle.opacity = event\n    },\n\n    updateStrokeWidth (event) {\n      this.objectStyle.strokeWidth = event\n    },\n\n    handleFillColor () {\n      if (this.isUsingFillColor) {\n        this.$store.commit(CLOSE_FILL_COLOR)\n      } else {\n        this.$store.commit(OPEN_FILL_COLOR)\n      }\n    },\n\n    handleStrokeColor () {\n      if (this.isUsingStrokeColor) {\n        this.$store.commit(CLOSE_STROKE_COLOR)\n      } else {\n        this.$store.commit(OPEN_STROKE_COLOR)\n      }\n    }\n  },\n\n  watch: {\n    isUsingPenTool (newVal) {\n      if (newVal) {\n        let customShape = new CustomShape('customshape')\n        this.$store.commit(INSERT_VISUAL_OBJECT, customShape)\n      }\n    }\n  },\n\n  components: {\n    'visual-object': VisualObject\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../../assets/Constants.scss';\n\n.shape-panel {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n\n  .shape-row {\n    display: flex;\n    flex-direction: row;\n    flex: 0 1 80px;\n\n    .shape-item {\n      flex: 1 1;\n      text-align: center;\n      margin: 5px;\n      padding-top: 25px;\n      border: 1px solid #888;\n      font-size: 16px;\n      \n      &:hover {\n        background: $GRAY1D;\n      }\n\n      &:active {\n        background: $GRAY0;\n      }\n\n      .shape-item-svg {\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n\n  .style-card {\n    padding: 5px 12px;\n\n    .slider-wrapper {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      margin: 5px 0;\n\n      input {\n        width: 165px;\n      }\n\n      input[type=range]::-webkit-slider-runnable-track {\n        height: 100%;\n      }\n\n      input[type=range]::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        height: 100%;\n        width: 20px;\n        margin-top: 0;\n        border-radius: 50%;\n        border: 1px solid #888;\n        opacity: 0;\n      }\n    }\n\n    .color-wrapper {\n      display: flex;\n      flex-direction: row;\n      justify-content: flex-end;\n      margin: 5px 0;\n\n      input {\n        width: 164px;\n        margin-left: 2px;\n        border: 1px solid #888;\n        border-radius: 2px;\n      }\n    }\n\n    textarea {\n      width: 230px;\n      margin-top: 10px;\n      border-radius: 5px;\n    }\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/panels/ShapePanel.vue","<template>\n  <g class=\"BezierTool\">\n    <line stroke=\"black\"\n      :x1=\"node.x3\"\n      :y1=\"node.y3\"\n      :x2=\"node.x2\"\n      :y2=\"node.y2\"\n      stroke-width=\"1\">\n    </line>\n    <circle r=3\n      :cx=\"node.x3\"\n      :cy=\"node.y3\"\n      @mousedown=\"handleMousedownForSymmetryBezierNode\"\n      fill=\"black\">\n    </circle>\n    <circle r=3\n      :cx=\"node.x2\"\n      :cy=\"node.y2\"\n      @mousedown=\"handleMousedownForBezierNode\"\n      fill=\"black\">\n    </circle>\n  </g>\n</template>\n\n<script>\nexport default {\n  name: 'BezierTool',\n\n  props: ['node', 'mouseX', 'mouseY', 'mousedownCount', 'mouseupCount'],\n\n  data () {\n    return {\n      isBezierNodeDragged: false,\n      isSymmetryBezierNodeDragged: false,\n      xInNodeCoordinate: 0,\n      yInNodeCoordinate: 0,\n      fixedLength: 0,\n      fixedSymmetryLength: 0,\n      deltaX: 0,\n      deltaY: 0\n    }\n  },\n\n  methods: {\n    handleMousedownForBezierNode () {\n      this.isBezierNodeDragged = true\n      this.xInNodeCoordinate = this.mouseX - this.node.x2\n      this.yInNodeCoordinate = this.mouseY - this.node.y2\n      this.deltaX = this.node.x2 - this.node.x\n      this.deltaY = this.node.y2 - this.node.y\n      this.fixedLength = Math.hypot(this.deltaX, this.deltaY)\n      let _deltaX = this.node.x3 - this.node.x\n      let _deltaY = this.node.y3 - this.node.y\n      this.fixedSymmetryLength = Math.hypot(_deltaX, _deltaY)\n    },\n\n    handleMousedownForSymmetryBezierNode () {\n      this.isSymmetryBezierNodeDragged = true\n      this.xInNodeCoordinate = this.mouseX - this.node.x3\n      this.yInNodeCoordinate = this.mouseY - this.node.y3\n      this.deltaX = this.node.x3 - this.node.x\n      this.deltaY = this.node.y3 - this.node.y\n      this.fixedSymmetryLength = Math.hypot(this.deltaX, this.deltaY)\n      let _deltaX = this.node.x2 - this.node.x\n      let _deltaY = this.node.y2 - this.node.y\n      this.fixedLength = Math.hypot(_deltaX, _deltaY)\n    },\n\n    moveBezierNodeX (mouseX) {\n      this.node.x2 = mouseX\n      this.deltaX = this.node.x2 - this.node.x\n      let newLength = Math.hypot(this.deltaX, this.deltaY)\n      let k = this.fixedSymmetryLength / newLength\n      this.node.x3 = k * (this.node.x - mouseX) + this.node.x\n    },\n\n    moveBezierNodeY (mouseY) {\n      this.node.y2 = mouseY\n      this.deltaY = this.node.y2 - this.node.y\n      let newLength = Math.hypot(this.deltaX, this.deltaY)\n      let k = this.fixedSymmetryLength / newLength\n      this.node.y3 = k * (this.node.y - mouseY) + this.node.y\n    },\n\n    moveSymmetryBezierNodeX (mouseX) {\n      this.node.x3 = mouseX\n      this.deltaX = this.node.x3 - this.node.x\n      let newLength = Math.hypot(this.deltaX, this.deltaY)\n      let k = this.fixedLength / newLength\n      this.node.x2 = k * (this.node.x - mouseX) + this.node.x\n    },\n\n    moveSymmetryBezierNodeY (mouseY) {\n      this.node.y3 = mouseY\n      this.deltaY = this.node.y3 - this.node.y\n      let newLength = Math.hypot(this.deltaX, this.deltaY)\n      let k = this.fixedLength / newLength\n      this.node.y2 = k * (this.node.y - mouseY) + this.node.y\n    }\n  },\n\n  watch: {\n    mouseupCount () {\n      this.isBezierNodeDragged = false\n      this.isSymmetryBezierNodeDragged = false\n    },\n\n    mouseX (newVal) {\n      if (this.isBezierNodeDragged) {\n        this.moveBezierNodeX(newVal)\n      }\n      if (this.isSymmetryBezierNodeDragged) {\n        this.moveSymmetryBezierNodeX(newVal)\n      }\n    },\n\n    mouseY (newVal) {\n      if (this.isBezierNodeDragged) {\n        this.moveBezierNodeY(newVal)\n      }\n      if (this.isSymmetryBezierNodeDragged) {\n        this.moveSymmetryBezierNodeY(newVal)\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/utils/BezierTool.vue","<template>\n  <g class=\"line\" v-show=\"visible\">\n    <path :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <controlnode v-for=\"(node, index) in nodes\"\n      v-show=\"reshape\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mouseupCount=\"mouseupCount\"\n      :mousedownCount=\"mousedownCount\"\n      :node=\"node\"\n      :key=\"index\">\n    </controlnode>\n  </g>\n</template>\n\n<script>\nimport ControlNode from '../utils/ControlNode'\n\nexport default {\n  name: 'Line',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  mounted () {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(50, 50, 50, 50)\n      this.object.addBezierNode(150, 150, 150, 150)\n      this.object.init()\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          pathD += ` L ${node.x} ${node.y}`\n        }\n      })\n      if (this.nodes.length >= 2) {\n        pathD += ` L ${this.nodes[0].x} ${this.nodes[0].y}`\n      }\n      return pathD\n    }\n  },\n\n  components: {\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Line.vue","<template>\n  <rect @mousedown=\"handleMousedown($event)\"\n    @click=\"handleClick\"\n    @contextmenu=\"handleContextmenu\"\n    :x=\"node.x-squareSize/2\"\n    :y=\"node.y-squareSize/2\"\n    :width=\"squareSize\"\n    :height=\"squareSize\"\n    fill=\"white\"\n    stroke=\"black\"\n    stroke-width=\"1\">\n  </rect>\n</template>\n\n<script>\nexport default {\n  name: 'ControlNode',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'node'],\n\n  data () {\n    return {\n      dragged: false,\n      squareSize: 6,\n      xInNodeCoordinate: 0,\n      yInNodeCoordinate: 0\n    }\n  },\n\n  methods: {\n    handleMousedown () {\n      if (event.button === 0) {\n        this.dragged = true\n      }\n      this.xInNodeCoordinate = this.mouseX - this.node.x\n      this.yInNodeCoordinate = this.mouseY - this.node.y\n    },\n\n    handleClick () {\n      // this.node.isActiveBezierTool = !this.node.isActiveBezierTool\n      return this.node.isActiveBezierTool ? this.node.closeBezierTool() : this.node.activateBezierTool()\n    },\n\n    handleContextmenu () {\n      this.$emit('deleteNode')\n      return false\n    }\n  },\n\n  watch: {\n    mouseX (newVal) {\n      if (this.dragged) {\n        this.node.x = newVal - this.xInNodeCoordinate\n        if (this.node.x2) {\n          this.node.x2 = this.node.x\n        }\n        if (this.node.x3) {\n          this.node.x3 = this.node.x\n        }\n      }\n    },\n\n    mouseY (newVal) {\n      if (this.dragged) {\n        this.node.y = newVal - this.yInNodeCoordinate\n        if (this.node.y2) {\n          this.node.y2 = this.node.y\n        }\n        if (this.node.y3) {\n          this.node.y3 = this.node.y\n        }\n      }\n    },\n\n    mouseupCount () {\n      this.dragged = false\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/utils/ControlNode.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{on:{\"mouseup\":function($event){return _vm.handleMouseup($event)},\"mousedown\":function($event){return _vm.handleMousedown($event)}}},[_c('styleframe',{attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount,\"mouseupCount\":_vm.mouseupCount}}),_vm._v(\" \"),(_vm.isScaleShow)?_c('rectframe',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"frameX\":_vm.frameX,\"frameY\":_vm.frameY,\"frameW\":_vm.frameW,\"frameH\":_vm.frameH},on:{\"updateX\":function($event){return _vm.scaleByX($event)},\"updateY\":function($event){return _vm.scaleByY($event)},\"updateW\":function($event){return _vm.scaleByW($event)},\"updateH\":function($event){return _vm.scaleByH($event)},\"updateFrame\":function($event){return _vm.updateFrame($event)},\"rotate\":function($event){return _vm.rotate($event)}}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d4140b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/frames/ScaleFrame.vue\n// module id = crmn\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BezierTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BezierTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5bfb6b88\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BezierTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/utils/BezierTool.vue\n// module id = cxcd\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"tool-box\"}},[_c('upload-tool'),_vm._v(\" \"),_c('save-tool'),_vm._v(\" \"),_vm._l((_vm.toolItems),function(toolName,index){return _c('tool-item',{key:index,attrs:{\"toolName\":toolName,\"usingToolName\":_vm.usingToolName},on:{\"enterTool\":function($event){return _vm.enterTool($event)},\"calcelTool\":function($event){return _vm.cancelTool($event)}}})}),_vm._v(\" \"),_c('undo-tool')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3960e457\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/ToolBox.vue\n// module id = d5AP\n// module chunks = 1","<template>\n  <svg version=\"1.1\"\n    :class=\"klass\"\n    :role=\"label ? 'img' : 'presentation'\"\n    :aria-label=\"label\"\n    :x=\"x\"\n    :y=\"y\"\n    :width=\"width\"\n    :height=\"height\"\n    :viewBox=\"box\"\n    :style=\"style\">\n    <slot>\n      <template v-if=\"icon && icon.paths\">\n        <path v-for=\"(path, i) in icon.paths\" :key=\"`path-${i}`\" v-bind=\"path\"/>\n      </template>\n      <template v-if=\"icon && icon.polygons\">\n        <polygon v-for=\"(polygon, i) in icon.polygons\" :key=\"`polygon-${i}`\" v-bind=\"polygon\"/>\n      </template>\n      <template v-if=\"icon && icon.raw\"><g v-html=\"raw\"></g></template>\n    </slot>\n  </svg>\n</template>\n\n<style>\n.fa-icon {\n  display: inline-block;\n  fill: currentColor;\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-spin {\n  animation: fa-spin 1s 0s infinite linear;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.fa-pulse {\n  animation: fa-spin 1s infinite steps(8);\n}\n\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n\n<script>\nlet icons = {}\n\nexport default {\n  name: 'fa-icon',\n  props: {\n    name: {\n      type: String,\n      validator (val) {\n        if (val && !(val in icons)) {\n          console.warn(`Invalid prop: prop \"name\" is referring to an unregistered icon \"${val}\".` +\n            `\\nPlease make sure you have imported this icon before using it.`)\n          return false\n        }\n        return true\n      }\n    },\n    scale: [Number, String],\n    spin: Boolean,\n    inverse: Boolean,\n    pulse: Boolean,\n    flip: {\n      validator (val) {\n        return val === 'horizontal' || val === 'vertical'\n      }\n    },\n    label: String\n  },\n  data () {\n    return {\n      x: false,\n      y: false,\n      childrenWidth: 0,\n      childrenHeight: 0,\n      outerScale: 1\n    }\n  },\n  computed: {\n    normalizedScale () {\n      let scale = this.scale\n      scale = typeof scale === 'undefined' ? 1 : Number(scale)\n      if (isNaN(scale) || scale <= 0) {\n        console.warn(`Invalid prop: prop \"scale\" should be a number over 0.`, this)\n        return this.outerScale\n      }\n      return scale * this.outerScale\n    },\n    klass () {\n      return {\n        'fa-icon': true,\n        'fa-spin': this.spin,\n        'fa-flip-horizontal': this.flip === 'horizontal',\n        'fa-flip-vertical': this.flip === 'vertical',\n        'fa-inverse': this.inverse,\n        'fa-pulse': this.pulse,\n        [this.$options.name]: true\n      }\n    },\n    icon () {\n      if (this.name) {\n        return icons[this.name]\n      }\n      return null\n    },\n    box () {\n      if (this.icon) {\n        return `0 0 ${this.icon.width} ${this.icon.height}`\n      }\n      return `0 0 ${this.width} ${this.height}`\n    },\n    ratio () {\n      if (!this.icon) {\n        return 1\n      }\n      let { width, height } = this.icon\n      return Math.max(width, height) / 16\n    },\n    width () {\n      return this.childrenWidth || this.icon && this.icon.width / this.ratio * this.normalizedScale || 0\n    },\n    height () {\n      return this.childrenHeight || this.icon && this.icon.height / this.ratio * this.normalizedScale || 0\n    },\n    style () {\n      if (this.normalizedScale === 1) {\n        return false\n      }\n      return {\n        fontSize: this.normalizedScale + 'em'\n      }\n    },\n    raw () {\n      // generate unique id for each icon's SVG element with ID\n      if (!this.icon || !this.icon.raw) {\n        return null\n      }\n      let raw = this.icon.raw\n      let ids = {}\n      raw = raw.replace(/\\s(?:xml:)?id=([\"']?)([^\"')\\s]+)\\1/g, (match, quote, id) => {\n        let uniqueId = getId()\n        ids[id] = uniqueId\n        return ` id=\"${uniqueId}\"`\n      })\n      raw = raw.replace(/#(?:([^'\")\\s]+)|xpointer\\(id\\((['\"]?)([^')]+)\\2\\)\\))/g, (match, rawId, _, pointerId) => {\n        let id = rawId || pointerId\n        if (!id || !ids[id]) {\n          return match\n        }\n\n        return `#${ids[id]}`\n      })\n\n      return raw\n    }\n  },\n  mounted () {\n    if (!this.name && this.$children.length === 0) {\n      console.warn(`Invalid prop: prop \"name\" is required.`)\n      return\n    }\n\n    if (this.icon) {\n      return\n    }\n\n    let width = 0\n    let height = 0\n    this.$children.forEach(child => {\n      child.outerScale = this.normalizedScale\n\n      width = Math.max(width, child.width)\n      height = Math.max(height, child.height)\n    })\n    this.childrenWidth = width\n    this.childrenHeight = height\n    this.$children.forEach(child => {\n      child.x = (width - child.width) / 2\n      child.y = (height - child.height) / 2\n    })\n  },\n  register (data) {\n    for (let name in data) {\n      let icon = data[name]\n\n      if (!icon.paths) {\n        icon.paths = []\n      }\n      if (icon.d) {\n        icon.paths.push({ d: icon.d })\n      }\n\n      if (!icon.polygons) {\n        icon.polygons = []\n      }\n      if (icon.points) {\n        icon.polygons.push({ points: icon.points })\n      }\n\n      icons[name] = icon\n    }\n  },\n  icons\n}\n\nlet cursor = 0xd4937\nfunction getId () {\n  return `fa-${(cursor++).toString(16)}`\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// node_modules/vue-awesome/components/Icon.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RotateFrame.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RotateFrame.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4fbbcee8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RotateFrame.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/frames/RotateFrame.vue\n// module id = dZkg\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"story-panel\"}},[_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    width\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.canvasW,\"min\":1000,\"max\":5000,\"step\":10},on:{\"updateSliderVal\":function($event){return _vm.updateCanvasW($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    height\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.canvasH,\"min\":500,\"max\":2000,\"step\":10},on:{\"updateSliderVal\":function($event){return _vm.updateCanvasH($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    xScale\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.xScaleFactor,\"min\":0,\"max\":1,\"step\":0.01},on:{\"updateSliderVal\":function($event){return _vm.updateXScalingFactor($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    yScale\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.yScaleFactor,\"min\":0.5,\"max\":1,\"step\":0.02},on:{\"updateSliderVal\":function($event){return _vm.updateYScalingFactor($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Relax\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.relaxingFactor,\"min\":0,\"max\":100,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateRelaxingFactor($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Frame\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.frameStep,\"min\":50,\"max\":500,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateFrameStep($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Curve\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.curveStep,\"min\":50,\"max\":500,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateCurveStep($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Smooth\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.sampleStep,\"min\":2,\"max\":20,\"step\":1},on:{\"updateSliderVal\":function($event){return _vm.updateSampleStep($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n    Sketch\\n    \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.storyConfig.jitterWave,\"min\":1,\"max\":5,\"step\":0.2},on:{\"updateSliderVal\":function($event){return _vm.updateJitterWave($event)}}})],1),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.storyConfig.content),expression:\"storyConfig.content\"}],attrs:{\"name\":\"storyConfig\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"story configuration here...\"},domProps:{\"value\":(_vm.storyConfig.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.storyConfig, \"content\", $event.target.value)}}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16a62adc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/panels/StoryPanel.vue\n// module id = eVrT\n// module chunks = 1","<template>\n  <g class=\"storyline\"\n    @mousedown=\"handleMousedown\"\n    @mouseup=\"handleMouseup\"\n    v-show=\"visible\">\n    <path fill=\"none\"\n      :d=\"pathD\"\n      stroke=\"white\"\n      stroke-width=\"10\"\n      opacity=\"1\">\n    </path>\n    <path fill=\"none\"\n      :d=\"pathD\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <text class=\"label\"\n      @click.stop=\"handleSelecting\"\n      @mousedown.stop=\"beginDragMoving\"\n      @mouseup=\"endDragMoving\"\n      text-anchor=\"end\"\n      font-size=\"16\"\n      :x=\"labelX\"\n      :y=\"labelY\">\n      {{ character }}\n    </text>\n  </g>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { ADD_FOCUSING_CHARACTER, ADD_SELECTING_CHARACTER } from '../../../store/MutationTypes'\nimport { StoryReorder, SessionMover } from '../../../types/Selector'\nimport { CubicSplineSimple } from '../../../types/CubicSpline'\nimport { PathReshaperSingle } from '../../../types/PathReshaper'\nimport { UniformSampler } from '../../../types/UniformSampler'\nimport { TweenMax } from 'gsap'\nimport * as Mousetrap from 'mousetrap'\n\nexport default {\n  name: 'Storyline',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  data: () => {\n    return {\n      sampleNodes: [],\n      targetPath: [],\n      dragMoving: false,\n      dashlineRange: [],\n      needAnimation: true,\n      storyReorder: null,\n      sessionMover: null,\n      recordY: 0\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    cleanNodes () {\n      return this.nodes.filter(node => node.y > 0)\n    },\n\n    samples () {\n      return this.sampleNodes\n    },\n\n    visible () {\n      return this.object.isShow && this.object.name !== 'RABBIT'\n    },\n\n    character () {\n      return this.object.name\n    },\n\n    starwarColor () {\n      switch (this.character) {\n        case 'VADER':\n          return 'black'\n        case 'R2-D2':\n          return 'blue'\n        case 'C-3PO':\n          return 'orange'\n        case 'CHEWIE':\n          return 'brown'\n        case 'JABBA':\n          return 'green'\n        case 'GREEDO':\n          return 'green'\n        case 'YODA':\n          return 'green'\n        case 'BOBA FETT':\n          return 'green'\n        case 'EMPEROR':\n          return 'black'\n        case 'T-REX':\n        case 'RAPTOR1':\n        case 'RAPTOR2':\n        case 'RAPTOR3':\n        case 'DILOPHOSAURUS':\n          return 'red'\n        case 'SMITH':\n          return 'black'\n        case 'TRINITY':\n          return 'red'\n        case 'NEO':\n          return 'blue'\n        case 'MORPHEUS':\n          return 'purple'\n        case 'TANK':\n          return 'green'\n        default:\n          return 'gray'\n      }\n    },\n\n    labelX () {\n      return this.sampleNodes.length > 0 && this.nodes.length > 0 ? this.sampleNodes[0].x - 5 : -10000\n    },\n\n    labelY () {\n      return this.sampleNodes.length > 0 && this.nodes.length > 0 ? this.sampleNodes[0].y + 5 : -10000\n    },\n\n    labelXEnd () {\n      let n = this.sampleNodes.length - 1\n      return n > -1 && this.nodes.length > 0 ? this.sampleNodes[n].x + 5 : -10000\n    },\n\n    labelYEnd () {\n      let n = this.sampleNodes.length - 1\n      return n > -1 && this.nodes.length > 0 ? this.sampleNodes[n].y + 5 : -10000\n    },\n\n    bone () {\n      let cleanNodes = this.removeInvalidNodes(this.object.nodes)\n      this.sampleNodes = cleanNodes\n      let d = ''\n      cleanNodes.forEach((node, i) => {\n        let x = node.x\n        let y = node.y\n        if (i === 0) {\n          d += `M ${x} ${y}`\n        } else {\n          d += ` L ${x} ${y}`\n        }\n      })\n      return d\n    },\n\n    pathD () {\n      let cleanNodes = this.cleanNodes\n      // this.dashlineRange = this.addDashlineRange()\n      // get control points\n      if (cleanNodes.length > 0) {\n        // get sample points\n        let cubicSpline = new CubicSplineSimple(cleanNodes)\n        let fittingNodes = cubicSpline.fit()\n        let step = this.sampleStep\n        let sampleNodes = UniformSampler.sample(fittingNodes, step)\n        let wave = this.jitterWave\n        UniformSampler.jitter(sampleNodes, wave)\n        this.sampleNodes = sampleNodes\n        let dashlineStep = this.sampleStep\n        // console.log(JSON.stringify({ name: this.character, points: sampleNodes.map(v => { return { x: v.x, y: v.y } }) }))\n        return this.calculatePathD(dashlineStep, sampleNodes)\n      } else {\n        return ''\n      }\n    },\n\n    sampleStep () {\n      return this.storyConfig.sampleStep\n    },\n\n    jitterWave () {\n      return this.storyConfig.jitterWave\n    },\n\n    ...mapGetters([\n      'isUsingOrderTool',\n      'isUsingBendTool',\n      'isUsingCurveTool',\n      'isUsingLinkTool',\n      'dashRangeMap',\n      'storyConfig',\n      'storyFrameMap',\n      'storySessionMap',\n      'storyCharacterMap',\n      'storylines',\n      'selectedCharacters'\n    ])\n  },\n\n  methods: {\n    handleMousedown () {\n      // reorder\n      if (this.isUsingOrderTool) {\n        this.storyReorder = new StoryReorder(this.storylines, this.storyConfig, this.storyFrameMap, this.storySessionMap, this.storyCharacterMap)\n        this.storyReorder.locate(this.mouseX, this.mouseY)\n        this.recordY = this.mouseY\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0) {\n        this.sessionMover = new SessionMover(this.storylines, this.storyFrameMap, this.storySessionMap, this.storyCharacterMap)\n        this.sessionMover.locate(this.mouseX, this.mouseY)\n        this.recordY = this.mouseY\n      }\n    },\n\n    handleMouseup () {\n      // reorder\n      if (this.isUsingOrderTool && this.storyReorder) {\n        let result = this.storyReorder.reorder()\n        if (result.frame > -1) {\n          this.$store.dispatch('orderSession', result)\n        }\n        this.storyReorder = null\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0) {\n        this.sessionMover = null\n      }\n    },\n\n    handleSelecting () {\n      if (this.isUsingCurveTool || this.isUsingLinkTool) {\n        this.$store.commit(ADD_SELECTING_CHARACTER, this.object.characterId)\n      }\n      if (this.isUsingBendTool) {\n        this.$store.commit(ADD_FOCUSING_CHARACTER, this.object.characterId)\n      }\n      this.$emit('storylineSelect')\n    },\n\n    beginDragMoving () {\n      this.dragMoving = true\n      this.recordY = this.mouseY\n    },\n\n    endDragMoving () {\n      this.dragMoving = false\n      this.recordY = 0\n      if (this.isUsingOrderTool) {\n        this.$store.dispatch('orderStoryline', this.object.characterId)\n      }\n    },\n\n    removeInvalidNodes (nodes) {\n      let _nodes = []\n      for (let i = 0, len = nodes.length; i < len; i++) {\n        if (i === 0) {\n          if (nodes[i].y > -10000) {\n            _nodes.push(nodes[i])\n          }\n        } else if (i === len - 1) {\n          if (nodes[i].y > -10000) {\n            _nodes.push(nodes[i])\n          }\n        } else {\n          if (nodes[i].y > -10000) {\n            if (Math.abs(nodes[i].y - nodes[i - 1].y) > 1 || Math.abs(nodes[i].y - nodes[i + 1].y) > 1) {\n              _nodes.push(nodes[i])\n            }\n          }\n        }\n      }\n      return _nodes\n    },\n\n    appendDashline (node, i, step) {\n      let pathD = ''\n      let sampleNodes = this.sampleNodes\n\n      if (i === 0) {\n        pathD += `M ${node.x} ${node.y}`\n      } else {\n        let intensity = step / 2\n        let endY = node.y\n        let startY = sampleNodes[i - 1].y\n        let endX = node.x\n        let startX = sampleNodes[i - 1].x\n        let arc = Math.atan2(endY - startY, endX - startX)\n        let yStep = Math.sin(arc) * intensity\n        let xStep = Math.cos(arc) * intensity\n        let currentX = startX\n        let solid = false\n\n        while ((xStep > 0 && currentX + xStep < endX) || (xStep < 0 && currentX + xStep > endX)) {\n          if (solid) {\n            pathD += ' l'\n          } else {\n            pathD += ' m'\n          }\n          pathD += ` ${xStep} ${yStep}`\n          solid = !solid\n          currentX += xStep\n        }\n        pathD += ` L ${endX} ${endY}`\n      }\n      return pathD\n    },\n\n    appendCurve (i, wasDashline) {\n      let sampleNodes = this.sampleNodes\n      let pathD = ''\n      if (i < 2) {\n        for (let j = 1; j < 2; j++) {\n          pathD += ` L ${sampleNodes[i].x} ${sampleNodes[i].y}`\n        }\n      } else if (wasDashline) {\n        if (this.jitterWave > 0) {\n          pathD += ` C ${sampleNodes[i - 2].x},${sampleNodes[i - 2].y} ${sampleNodes[i - 1].x},${sampleNodes[i - 1].y} ${sampleNodes[i].x},${sampleNodes[i].y}`\n        } else {\n          pathD += ` L ${sampleNodes[i].x} ${sampleNodes[i].y}`\n        }\n      } else {\n        if (this.jitterWave > 0) {\n          pathD += ` S ${sampleNodes[i - 1].x},${sampleNodes[i - 1].y} ${sampleNodes[i].x},${sampleNodes[i].y}`\n        } else {\n          pathD += ` L ${sampleNodes[i].x} ${sampleNodes[i].y}`\n        }\n      }\n      return pathD\n    },\n\n    calculatePathD (step, sampleNodes) {\n      // let sampleNodes = this.sampleNodes\n      let pathD = ''\n      // line with respect to dashlineRange\n      let i = 0\n      let wasDashline = false\n      for (; i < sampleNodes.length - 3;) {\n        const node = sampleNodes[i]\n        let inDashline = false\n        for (let j = 0; j < this.dashlineRange.length; j++) {\n          if (this.dashlineRange[j][0] < node.x && node.x < this.dashlineRange[j][1]) {\n            inDashline = true\n            break\n          }\n        }\n        if (i === 0) {\n          pathD += ` M ${sampleNodes[i].x} ${sampleNodes[i].y}`\n          i++\n        } else if (inDashline) {\n          pathD += this.appendDashline(node, i, step)\n          wasDashline = true\n          i++\n        } else {\n          if (wasDashline) {\n            i += 3\n          }\n          pathD += this.appendCurve(i, wasDashline)\n          // lead to a bug when dashline begin\n          i += 2\n          wasDashline = false\n        }\n      }\n      i -= 3\n      if (i < 0) {\n        i = 0\n      }\n      for (; i < sampleNodes.length; i++) {\n        if (sampleNodes[i]) {\n          pathD += ` L ${sampleNodes[i].x} ${sampleNodes[i].y}`\n        } else {\n          // debugger\n        }\n      }\n      return pathD\n    },\n\n    addDashlineRange () {\n      switch (this.character) {\n        case '':\n          return [[100, 10000]]\n        case '':\n          return [[380, 10000]]\n        case '':\n          return [[0, 300], [350, 400]]\n        case '':\n          return [[700, 1800]]\n        case 'IMELDA':\n          return [[250, 10000]]\n        case 'HECTOR':\n          return [[230, 10000]]\n        case 'CRUZ':\n          return [[250, 10000]]\n        case 'COCO':\n          return [[1000, 10000]]\n        case 'MIGUEL':\n          return [[400, 830]]\n        default:\n          return []\n      }\n    }\n  },\n\n  mounted () {\n    this.object.init()\n    let mousetrap = new Mousetrap()\n    mousetrap.bind('esc', () => {\n      if (this.isUsingCurveTool && this.selectedCharacters.indexOf(this.object.characterId) > -1) {\n        let pathReshaper = new PathReshaperSingle(this.targetPath)\n        pathReshaper.moveFocusCharacter(this.object.nodes)\n        this.targetPath = []\n      }\n    })\n  },\n\n  watch: {\n    mouseY (newY) {\n      if (this.dragMoving && this.isUsingOrderTool) {\n        if (newY > 0) {\n          let distY = newY - this.recordY\n          this.object.updateY(distY)\n        }\n      }\n      // reorder\n      if (this.isUsingOrderTool && this.storyReorder) {\n        let moveY = this.mouseY - this.recordY\n        this.storyReorder.move(moveY)\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0 && this.sessionMover) {\n        let moveY = this.mouseY - this.recordY\n        this.sessionMover.move(moveY)\n        // let twister = new SplineTwister(this.storylines, this.storySessionMap, this.storyConfig)\n        // twister.twist(1)\n      }\n    },\n\n    mousedownCount (newVal) {\n      // reshape\n      if (this.isUsingCurveTool && this.selectedCharacters.indexOf(this.object.characterId) > -1) {\n        this.targetPath.push({\n          x: this.mouseX,\n          y: this.mouseY\n        })\n      }\n    },\n\n    mouseupCount (newVal) {\n      if (this.dragMoving && this.isUsingOrderTool) {\n        this.endDragMoving()\n      }\n      // reorder\n      if (this.isUsingOrderTool && this.storyReorder) {\n        let result = this.storyReorder.reorder()\n        if (result.frame > -1) {\n          this.$store.dispatch('orderSession', result)\n        }\n        this.storyReorder = null\n      }\n      // session mover\n      if (this.isUsingCurveTool && this.selectedCharacters.length === 0) {\n        this.sessionMover = null\n      }\n    },\n\n    dashRangeMap (newRange) {\n      if (this.selectedCharacters.indexOf(this.object.characterId) > -1) {\n        this.dashlineRange = newRange\n      }\n    },\n\n    nodes (newNodes, oldNodes) {\n      // console.log('animate')\n      if (this.needAnimation && oldNodes) {\n        if (newNodes.length !== oldNodes.length) {\n          console.error('mismatch')\n        }\n        oldNodes.forEach((node, i) => {\n          if ((node.x !== newNodes[i].x || node.y !== newNodes[i].y) && node.y > 0) {\n            TweenMax.fromTo(this.nodes[i], 1,\n              { x: oldNodes[i].x, y: oldNodes[i].y }, { x: newNodes[i].x, y: newNodes[i].y })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style>\ntext.label {\n  cursor: pointer;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Storyline.vue","<template>\n  <div class=\"side-panel\" :style=\"styleObject\">\n    <div class=\"side-panel-header\">{{ panelName === 'ShapePanel' ? 'ShapePanel' : panelName }}</div>\n    <div class=\"side-panel-content\" v-if=\"panelName === 'ElementPanel'\">\n      <tree-panel></tree-panel>\n    </div>\n    <div class=\"side-panel-content\" v-if=\"panelName === 'ShapePanel'\">\n      <shape-panel></shape-panel>\n    </div>\n    <div class=\"side-panel-content\" v-if=\"panelName === 'StoryPanel'\">\n      <story-panel></story-panel>\n    </div>\n    <div class=\"side-panel-content\" v-if=\"panelName === 'TextPanel'\">\n      <text-panel></text-panel>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport TreePanel from './panels/TreePanel/TreePanel'\nimport ShapePanel from './panels/ShapePanel'\nimport StoryPanel from './panels/StoryPanel'\nimport TextPanel from './panels/TextPanel'\n\nexport default {\n  name: 'SidePanel',\n\n  data () {\n    return {\n      styleObject: {\n        left: '-260px'\n      }\n    }\n  },\n\n  computed: {\n    ...mapGetters([\n      'panelActivated',\n      'panelName'\n    ])\n  },\n\n  watch: {\n    panelActivated (newVal) {\n      if (newVal) {\n        this.styleObject.left = '80px'\n      } else {\n        this.styleObject.left = '-260px'\n      }\n    }\n  },\n\n  components: {\n    'tree-panel': TreePanel,\n    'shape-panel': ShapePanel,\n    'story-panel': StoryPanel,\n    'text-panel': TextPanel\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../assets/Constants.scss';\n\ndiv.side-panel {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  background: white;\n  border-right: 1px solid #{$GRAY2};\n  width: $APP_PANEL_SIZE;\n  height: 100%;\n  transition: left 0.5s ease-out;\n\n  .side-panel-header {\n    flex: 0 1 65px;\n    border-bottom: 1px solid #{$GRAY2};\n    font-size: 1.6em;\n    font-weight: 700;\n    line-height: 65px;\n    text-align: center;\n    color: $GRAY5;\n  }\n\n  .side-panel-content {\n    flex: 1 1;\n  }\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/SidePanel.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PathSelect.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PathSelect.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a45afae\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PathSelect.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/utils/PathSelect.vue\n// module id = ewtb\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"custom-shape\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('g',{key:index},[_c('beziertool',{directives:[{name:\"show\",rawName:\"v-show\",value:(node.isActiveBezierTool),expression:\"node.isActiveBezierTool\"}],attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}}),_vm._v(\" \"),_c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.created || _vm.reshape),expression:\"!created || reshape\"}],attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"index\":index,\"node\":node},on:{\"deleteNode\":function($event){return _vm.deleteNode(index)}}})],1)})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e9f6a0ce\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/CustomShape.vue\n// module id = fOqo\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-25510291\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Storyline.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Storyline.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Storyline.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-25510291\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Storyline.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Storyline.vue\n// module id = fb9g\n// module chunks = 1","<template>\n  <g class=\"pentagon\" v-show=\"visible\">\n    <path :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <controlnode v-for=\"(node, index) in nodes\"\n      v-show=\"reshape\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mouseupCount=\"mouseupCount\"\n      :mousedownCount=\"mousedownCount\"\n      :node=\"node\"\n      :key=\"index\">\n    </controlnode>\n  </g>\n</template>\n\n<script>\nimport ControlNode from '../utils/ControlNode'\n\nexport default {\n  name: 'Pentagon',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  mounted () {\n    if (!this.object.isCreate) {\n      this.object.addBezierNode(90, 10, 90, 10)\n      this.object.addBezierNode(170, 70, 170, 70)\n      this.object.addBezierNode(140, 165, 140, 165)\n      this.object.addBezierNode(40, 165, 40, 165)\n      this.object.addBezierNode(10, 70, 10, 70)\n      this.object.init()\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          pathD += ` L ${node.x} ${node.y}`\n        }\n      })\n      if (this.nodes.length > 2) {\n        pathD += ` L ${this.nodes[0].x} ${this.nodes[0].y}`\n      }\n      return pathD\n    }\n  },\n\n  components: {\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/Pentagon.vue","<template>\n  <div class=\"text-panel\">\n    <div class=\"font-wrapper\">\n      <input type=\"text\" name=\"fontSize\" v-model=\"focusText.fontSize\" placeholder=\"font size\">\n    </div>\n    <div class=\"font-wrapper\">\n      <input type=\"text\" name=\"fontFamily\" v-model=\"focusText.fontFamily\" placeholder=\"font family\">\n    </div>\n    <div class=\"font-wrapper\">\n      <input type=\"text\" name=\"textColor\" v-model=\"focusText.color\" placeholder=\"text color\">\n    </div>\n    <textarea name=\"textContent\" cols=\"30\" rows=\"10\" v-model=\"focusText.content\" placeholder=\"insert text content\"></textarea>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n\nexport default {\n  name: 'TextPanel',\n\n  computed: {\n    ...mapGetters([\n      'focusText'\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../../assets/Constants.scss';\n\n.text-panel {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  // padding: 5px 12px;\n\n  .font-wrapper {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n\n    input {\n      width: 220px;\n      height: 25px;\n      margin: 5px 7px;\n      padding: 0 5px;\n      border: 1px solid #888;\n      border-radius: 3px;\n    }\n  }\n\n  textarea {\n    width: 230px;\n    margin: 5px 12px;\n    border: 1px solod #888;\n    border-radius: 5px;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/panelbar/panels/TextPanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shape-panel\"},[_c('div',{staticClass:\"style-card\"},[_c('div',{staticClass:\"color-wrapper\",on:{\"click\":_vm.handleFillColor}},[_vm._v(\"\\n      Fill\\n      \"),_c('input',{style:(_vm.fillColor),attrs:{\"type\":\"text\",\"name\":\"fillColor\",\"readonly\":\"readonly\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"color-wrapper\",on:{\"click\":_vm.handleStrokeColor}},[_vm._v(\"\\n      Stroke\\n      \"),_c('input',{style:(_vm.strokeColor),attrs:{\"type\":\"text\",\"name\":\"strokeColor\",\"readonly\":\"readonly\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n      Width\\n      \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.objectStyle.strokeWidth,\"min\":0,\"max\":10,\"step\":0.1},on:{\"updateSliderVal\":function($event){return _vm.updateStrokeWidth($event)}}})],1),_vm._v(\" \"),_c('div',{staticClass:\"slider-wrapper\"},[_vm._v(\"\\n      Opacity\\n      \"),_c('tool-slider',{attrs:{\"modelVal\":_vm.objectStyle.opacity,\"min\":0,\"max\":1,\"step\":0.01},on:{\"updateSliderVal\":function($event){return _vm.updateOpacity($event)}}})],1)]),_vm._v(\" \"),_c('div',{staticClass:\"shape-row\"},[_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleRectangle}},[_vm._v(\"\\n      Rectangle\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleTriangle}},[_vm._v(\"\\n      Triangle\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handlePentagon}},[_vm._v(\"\\n      Pentagon\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"shape-row\"},[_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleHexagon}},[_vm._v(\"\\n      Hexagon\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleEchelon}},[_vm._v(\"\\n      Echelon\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"shape-item\",on:{\"click\":_vm.handleLine}},[_vm._v(\"\\n      Custom\\n    \")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7dab7d6e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/panels/ShapePanel.vue\n// module id = gHnp\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"rect-frame\"},[_c('rect',{attrs:{\"fill\":\"none\",\"x\":_vm.updateX,\"y\":_vm.updateY,\"width\":_vm.updateW,\"height\":_vm.updateH,\"stroke\":\"blue\"}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,key){return _c('rect',{key:key,style:(node.cursor),attrs:{\"x\":node.x - 3,\"y\":node.y - 3,\"width\":6,\"height\":6,\"fill\":\"white\",\"stroke\":\"blue\",\"stroke-width\":\"1\"},on:{\"mousedown\":function($event){return _vm.handleMousedown(key)},\"mouseup\":_vm.handleMouseup}})}),_vm._v(\" \"),_c('line',{attrs:{\"x1\":_vm.positionX,\"y1\":_vm.positionY,\"x2\":_vm.rotateNode.x,\"y2\":_vm.rotateNode.y,\"stroke\":\"blue\",\"stroke-width\":\"1\"}}),_vm._v(\" \"),_c('circle',{attrs:{\"fill\":\"blue\",\"cx\":_vm.rotateNode.x,\"cy\":_vm.rotateNode.y,\"r\":3,\"stroke\":\"black\",\"stroke-width\":\"1\"},on:{\"mousedown\":_vm.handleRotateMousedown,\"mouseup\":_vm.handleRotateMouseup}}),_vm._v(\" \"),_c('circle',{attrs:{\"fill\":\"blue\",\"cx\":_vm.positionX,\"cy\":_vm.positionY,\"r\":3,\"stroke\":\"black\",\"stroke-width\":\"1\"},on:{\"mousedown\":_vm.handleRotateMousedown,\"mouseup\":_vm.handleRotateMouseup}})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1aee5186\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/frames/RectFrame.vue\n// module id = gW7Q\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7dab7d6e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ShapePanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShapePanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShapePanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7dab7d6e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShapePanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/panels/ShapePanel.vue\n// module id = gfC4\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box-card\",style:(_vm.position)},_vm._l((_vm.states),function(state,index){return _c('div',{key:index,staticClass:\"state\",on:{\"click\":function($event){return _vm.handleClick(state)}}},[_vm._v(\"\\n    \"+_vm._s(state)+\"\\n  \")])}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5e689c14\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/menus/ContextMenu.vue\n// module id = grRP\n// module chunks = 1","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ToolItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c1164880\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ToolItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/ToolItem.vue\n// module id = gsLH\n// module chunks = 1","<template>\n  <customshape v-if=\"object.type === 'customshape'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </customshape>\n  <storyline v-else-if=\"object.type === 'storyline'\"\n    @storylineSelect=\"handleStorylineStyle\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </storyline>\n  <triangleg v-else-if=\"object.type === 'triangle'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </triangleg>\n  <rectangleg v-else-if=\"object.type === 'rectangle'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </rectangleg>\n  <pentagong v-else-if=\"object.type === 'pentagon'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </pentagong>\n  <hexagong v-else-if=\"object.type === 'hexagon'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </hexagong>\n  <lineg v-else-if=\"object.type === 'line'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=3\n    :opacity=\"style.opacity\">\n  </lineg>\n  <echelong v-else-if=\"object.type === 'echelon'\"\n    :object=\"object\"\n    :mouseX=\"mouseX\"\n    :mouseY=\"mouseY\"\n    :mousedownCount=\"mousedownCount\"\n    :mouseupCount=\"mouseupCount\"\n    :fillColor=\"fillColor\"\n    :strokeColor=\"strokeColor\"\n    :strokeWidth=\"style.strokeWidth\"\n    :opacity=\"style.opacity\">\n  </echelong>\n</template>\n\n<script>\nimport { LOCATE_FOCUSOBJECT_STYLE, RESTORE_FOCUSOBJECT_STYLE } from '../../../store/MutationTypes'\nimport CustomShape from '../shapes/CustomShape'\nimport Storyline from '../shapes/Storyline'\nimport Triangle from '../shapes/Triangle'\nimport Rectangle from '../shapes/Rectangle'\nimport Pentagon from '../shapes/Pentagon'\nimport Hexagon from '../shapes/Hexagon'\nimport Line from '../shapes/Line'\nimport Echelon from '../shapes/Echelon'\n\nexport default {\n  name: 'StyleFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data () {\n    return {\n      isStorylineSelected: false,\n      style: {\n        fill: {\n          rgba: {\n            r: 255,\n            g: 255,\n            b: 255,\n            a: 1\n          }\n        },\n        stroke: {\n          rgba: {\n            r: 0,\n            g: 0,\n            b: 0,\n            a: 1\n          }\n        },\n        strokeWidth: 3,\n        opacity: 1\n      }\n    }\n  },\n\n  methods: {\n    handleStorylineStyle () {\n      this.isStorylineSelected = !this.isStorylineSelected\n      if (this.isStorylineSelected) {\n        this.$store.commit(LOCATE_FOCUSOBJECT_STYLE, this.style)\n      } else {\n        this.$store.commit(RESTORE_FOCUSOBJECT_STYLE)\n      }\n    }\n  },\n\n  computed: {\n    fillColor () {\n      let r = this.style.fill.rgba.r\n      let g = this.style.fill.rgba.g\n      let b = this.style.fill.rgba.b\n      let a = this.style.fill.rgba.a\n      return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')'\n    },\n\n    selected () {\n      return this.object.isSelected\n    },\n\n    strokeColor () {\n      if (this.selected) {\n        return 'rgba(' + 0 + ',' + 0 + ',' + 255 + ',' + 1 + ')'\n      }\n      let r = this.style.stroke.rgba.r\n      let g = this.style.stroke.rgba.g\n      let b = this.style.stroke.rgba.b\n      let a = this.style.stroke.rgba.a\n      return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')'\n    },\n\n    strokeWidth () {\n      if (this.selected) {\n        return 1\n      } else {\n        return this.style.strokeWidth\n      }\n    },\n\n    isScale () {\n      return this.object.isScale\n    }\n  },\n\n  watch: {\n    isScale (newVal) {\n      if (newVal) {\n        this.$store.commit(LOCATE_FOCUSOBJECT_STYLE, this.style)\n      } else {\n        this.$store.commit(RESTORE_FOCUSOBJECT_STYLE)\n      }\n    }\n  },\n\n  components: {\n    customshape: CustomShape,\n    storyline: Storyline,\n    triangleg: Triangle,\n    rectangleg: Rectangle,\n    pentagong: Pentagon,\n    hexagong: Hexagon,\n    lineg: Line,\n    echelong: Echelon\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/frames/StyleFrame.vue","import { LOCATE_TEXT_OBJECT, RESTORE_TEXT_OBJECT } from '../MutationTypes'\n\nconst state = {\n  focusText: {},\n  textObjects: []\n}\n\nconst getters = {\n  focusText: state => state.focusText,\n  textObjects: state => state.textObjects\n}\n\nconst mutations = {\n  [LOCATE_TEXT_OBJECT] (state, obj) {\n    state.focusText = obj\n  },\n\n  [RESTORE_TEXT_OBJECT] (state) {\n    state.focusText = {}\n  }\n}\n\nconst actions = {\n  insertTextObject ({ state }, obj) {\n    state.textObjects.push(obj)\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/TextStore.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CurveTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CurveTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56e4ee1f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CurveTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/CurveTool.vue\n// module id = hnEm\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5e689c14\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ContextMenu.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ContextMenu.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ContextMenu.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5e689c14\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ContextMenu.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/menus/ContextMenu.vue\n// module id = hxIt\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('move-frame',{style:(_vm.cursorStyle),attrs:{\"object\":_vm.object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-04f6f320\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/objects/VisualObject.vue\n// module id = i0bz\n// module chunks = 1","import { Node, StyleNode } from './BezierNode'\nimport { getCurvePoints } from 'cardinal-spline-js'\n\nconst ALPHA = 0\nconst ALIGN = 4.0\n\nexport class PathReshaperFrame {\n  constructor (storylines, minFrame, maxFrame, config, targetPath, sessionTable) {\n    this.storylines = storylines\n    this.minFrame = minFrame\n    this.maxFrame = maxFrame\n    this.config = config\n    this.sessionTable = sessionTable\n    this.targetPath = targetPath\n  }\n\n  moveFocusCharacter (focusCharacter) {\n    this.resetOptimization()\n    let storyline = this.storylines[focusCharacter].points\n    // let fitter = new LinearFitCurve(this.targetPath)\n    let fitter = new CubicFitCurve(this.targetPath)\n    let [start, end] = fitter.match(storyline, this.minFrame, this.maxFrame, this.config)\n    let contextMap = this.setOptimizingCharacters(focusCharacter, start, end)\n    for (let i = start, len = end + 1; i < len; i++) {\n      let contextCharacters = contextMap.get(i)\n      let newY = fitter.fitCurve(storyline[i])\n      if (newY > -10000) {\n        // alignment case\n        newY = this.alignContextPoint(i, newY, storyline)\n        let moveY = newY - storyline[i].y\n        this.moveContextCharacters(i, contextCharacters, focusCharacter, moveY)\n        storyline[i].y = newY\n      }\n    }\n  }\n\n  resetOptimization () {\n    this.storylines.forEach(storyline => {\n      storyline.points.forEach(point => {\n        point.isOptimizedTmp = false\n      })\n    })\n  }\n\n  setOptimizingCharacters (focusCharacter, start, end) {\n    let contextCharactersMap = new Map()\n    for (let i = start, len = end + 1; i < len; i++) {\n      let tmpContextCharacters = this.scanInSessionCharacters(i, focusCharacter)\n      contextCharactersMap.set(i, tmpContextCharacters)\n    }\n    return contextCharactersMap\n  }\n\n  scanInSessionCharacters (i, character) {\n    let sortingCharacters = []\n    let frame = this.generateFrame(i)\n    let session = this.sessionTable[character][frame]\n    if (session > -1) {\n      for (let id = 0, len = this.sessionTable.length; id < len; id++) {\n        if (this.sessionTable[id][frame] === session) {\n          sortingCharacters.push({\n            id: id,\n            y: this.storylines[id].points[i].y\n          })\n          this.storylines[id].points[i].isOptimized = true\n          this.storylines[id].points[i].isOptimizedTmp = true\n        }\n      }\n      sortingCharacters.sort((a, b) => {\n        return a.y - b.y\n      })\n    }    \n    return sortingCharacters.map(d => d.id)\n  }\n\n  generateFrame (i) {\n    return parseInt(i / 2)\n  }\n\n  moveContextCharacters (i, characters, focusCharacter, focusMoveY) {\n    let upper = []\n    let lower = []\n    let isUpper = true\n    // divide into upper and lower case\n    characters.forEach(character => {\n      if (character === focusCharacter) {\n        isUpper = false\n      }\n      if (isUpper) {\n        upper.push(character)\n      } else {\n        lower.push(character)\n      }\n    })\n    upper.push(focusCharacter)\n    upper = upper.reverse()\n    // upper case\n    let lastCharacterMoveY = focusMoveY\n    upper.forEach(character => {\n      if (character !== focusCharacter) {\n        let storyline = this.storylines[character].points\n        let oldY = storyline[i].y\n        if (oldY > -10000) {\n          let newY = oldY + lastCharacterMoveY\n          storyline[i].y = this.alignContextPoint(i, newY, storyline)\n          storyline[i].isOptimized = true\n          lastCharacterMoveY = storyline[i].y - oldY\n        }\n      }\n    })\n    // lower case\n    lastCharacterMoveY = focusMoveY\n    lower.forEach(character => {\n      if (character !== focusCharacter) {\n        let storyline = this.storylines[character].points\n        let oldY = storyline[i].y\n        if (oldY > -10000) {\n          let newY = oldY + lastCharacterMoveY\n          storyline[i].y = this.alignContextPoint(i, newY, storyline)\n          storyline[i].isOptimized = true\n          lastCharacterMoveY = storyline[i].y - oldY\n        }\n      }\n    })\n  }\n\n  alignContextPoint (i, newY, storyline) {\n    let len = storyline.length\n    let isLeftAlign = false\n    let isRightAlign = false\n    let leftAnchorY = 0\n    let rightAnchorY = 0\n    let baseY = storyline[i].y\n    let thres = 5\n    if (i > 1) {\n      let leftPoint = storyline[i - 1]\n      if (!leftPoint.isOptimizedTmp) {\n        leftAnchorY = leftPoint.y\n        if (leftAnchorY > -10000 && Math.abs(baseY - leftAnchorY) < thres) {\n          // return (newY + ALIGN * leftAnchorY) / (1 + ALIGN)\n          isLeftAlign = true\n        }\n      }\n    }\n    if (i < len - 1) {\n      let rightPoint = storyline[i + 1]\n      if (!rightPoint.isOptimizedTmp) {\n        rightAnchorY = rightPoint.y\n        if (rightAnchorY > -10000 && Math.abs(baseY - rightAnchorY) < thres) {\n          isRightAlign = true\n        }\n      }\n    }\n    let upper = newY\n    let lower = 1\n    if (isLeftAlign) {\n      upper += ALIGN * leftAnchorY\n      lower += ALIGN\n    }\n    if (isRightAlign) {\n      upper += ALIGN * rightAnchorY\n      lower += ALIGN\n    }\n    return upper / lower\n  }\n}\n\nexport class PathReshaper {\n  constructor (storylines, sessionTable, frameTable, storyConfig, targetPath) {\n    this.storylines = storylines\n    this.sessionTable = sessionTable\n    this.frameTable = frameTable\n    this.config = storyConfig\n    this.targetPath = targetPath\n  }\n\n  moveFocusCharacter (focusCharacter) {\n    let storyline = this.storylines[focusCharacter].points\n    let fitter = new CubicFitCurve(this.targetPath)\n    let [start, end] = fitter.matchStoryline(storyline, this.config)\n    // TODO: Consider context characters\n    // console.log(fitter.fittedCurve)\n    if (start > -1 && end > -1) {\n      for (let i = start, len = end + 1; i < len; i++) {\n        let newY = fitter.fitCurve(storyline[i])\n        if (newY > -10000) {\n          // console.log(focusCharacter, i, newY, storyline[i].y)\n          storyline[i].y = newY\n        }\n      }\n    }\n  }\n\n  reshapeCharacters (characters) {\n    characters.forEach(character => {\n      this.moveFocusCharacter(character)\n    })\n  }\n}\n\nexport class PathReshaperSingle {\n  constructor (targetPath) {\n    this.targetPaths = [targetPath]\n  }\n\n  moveFocusCharacter (storyline) {\n    this.targetPaths.forEach(targetPath => {\n      if (targetPath.length > 0) {\n        let fitter = new CubicFitCurve(targetPath)\n        let [start, end] = fitter.matchStoryline(storyline, this.config)\n        if (start > -1 && end > -1) {\n          for (let i = start, len = end + 1; i < len; i++) {\n            let newY = fitter.fitCurve(storyline[i])\n            if (newY > -10000) {\n              let oldY = storyline[i].y\n              storyline[i].y = newY\n            }\n          }\n        }\n      }\n    })\n  }\n}\n\nclass FitCurve {\n  constructor (targetPath) {\n    // original path\n    this.targetPath = targetPath\n    // fitted path\n    this.fittedCurve = []\n  }\n\n  // relocate at the storyline coordinates\n  syncrize (config) {\n    this.fittedCurve = []\n    // let xScale = config.xScaleFactor\n    // let yScale = config.yScaleFactor\n    let xScale = 1\n    let yScale = 1\n    let xBase = 0\n    let yBase = 0\n    this.targetPath.forEach(point => {\n      let x = (point.x - xBase) / xScale\n      let y = (point.y - yBase) / yScale\n      let fittedNode = new StyleNode(x, y)\n      this.fittedCurve.push(fittedNode)\n    })\n    this.fittedCurve.sort((a, b) => {\n      return a.x - b.x\n    })\n  }\n\n  matchStoryline (storyline, config) {\n    this.syncrize(config)\n    let [leftIndex, rightIndex] = this.locate(storyline)\n    if (leftIndex > -1 && rightIndex > -1) {\n      let leftPoint = storyline[leftIndex]\n      let rightPoint = storyline[rightIndex]\n      let n = this.targetPath.length - 1\n      let firstPoint = new StyleNode(this.fittedCurve[0].x, this.fittedCurve[0].y)\n      let lastPoint = new StyleNode(this.fittedCurve[n].x, this.fittedCurve[n].y)\n      // special case: ending point can be flexible adjusted\n      // TODO: consider point start not from the beginning\n      if (rightIndex === storyline.length - 1) {\n        this.fittedCurve.forEach(point => {\n          point.x = leftPoint.x + (point.x - firstPoint.x)\n          point.y = leftPoint.y + (point.y - firstPoint.y)\n        })\n      } else {\n        let xScale = Math.abs((rightPoint.x - leftPoint.x) / (lastPoint.x - firstPoint.x))\n        let yScale = Math.abs((rightPoint.y - leftPoint.y) / (lastPoint.y - firstPoint.y))\n        this.fittedCurve.forEach(point => {\n          point.x = leftPoint.x + xScale * (point.x - firstPoint.x)\n          point.y = leftPoint.y + yScale * (point.y - firstPoint.y)\n        })\n      }\n    }\n    return [leftIndex, rightIndex]\n  }\n\n  locate (storyline) {\n    let n = this.targetPath.length - 1\n    let firstTargetPoint = this.fittedCurve[0]\n    let lastTargetPoint = this.fittedCurve[n]\n    let isFirstPointAnchored = false\n    let isLastPointAnchored = false\n    let leftBoundIndex = -1\n    let rightBoundIndex = storyline.length - 1\n    for (let i = 1, len = storyline.length - 1; i < len; i++) {\n      // TODO: select the nearest point\n      if (storyline[i].y > -10000) {\n        if (!isFirstPointAnchored && storyline[i].x > firstTargetPoint.x) {\n          leftBoundIndex =  storyline[i - 1].y > -10000 ? i - 1 : i\n          // while (!this.isFlatPoint(storyline, leftBoundIndex++)) {}\n          isFirstPointAnchored = true\n        }\n        if (!isLastPointAnchored && storyline[i].x > lastTargetPoint.x) {\n          rightBoundIndex = i\n          isLastPointAnchored = true\n        }\n      }\n    }\n    return [leftBoundIndex, rightBoundIndex]\n  }\n\n  isFlatPoint (storyline, i) {\n    if (storyline[i].y === -10000) {\n      return false\n    }\n    if (i === 0) {\n      return true\n    }\n    let leftI = i - 1\n    while (leftI > 0 && storyline[leftI--].y === -10000) {}\n    let rightI = i + 1\n    while (rightI > 0 && storyline[rightI++].y === -10000) {}\n    if (storyline[leftI + 1].y === storyline[i].y || storyline[rightI - 1].y === storyline[i].y) {\n      return true\n    }\n    return false\n  }\n\n  match (storyline, minFrame, maxFrame, config) {\n    this.syncrize(config)\n    let leftIndex = this.getLeftPointIndex(storyline, minFrame)\n    let leftPoint = storyline[leftIndex]\n    let rightIndex = this.getRightPointIndex(storyline, maxFrame)\n    let rightPoint = storyline[rightIndex]\n    let firstPoint = new Node(this.fittedCurve[0].x, this.fittedCurve[0].y)\n    let n = this.fittedCurve.length - 1\n    let lastPoint = new Node(this.fittedCurve[n].x, this.fittedCurve[n].y)\n    // special case: ending point can be flexible adjusted\n    // if (rightIndex === storyline.length - 1) {\n    //   this.fittedCurve.forEach(point => {\n    //     point.x = leftPoint.x + (point.x - firstPoint.x)\n    //     point.y = leftPoint.y + (point.y - firstPoint.y)\n    //   })\n    // } else {\n    //   let xScale = Math.abs((rightPoint.x - leftPoint.x) / (lastPoint.x - firstPoint.x))\n    //   let yScale = Math.abs((rightPoint.y - leftPoint.y) / (lastPoint.y - firstPoint.y))\n    //   this.fittedCurve.forEach(point => {\n    //     point.x = leftPoint.x + xScale * (point.x - firstPoint.x)\n    //     point.y = leftPoint.y + yScale * (point.y - firstPoint.y)\n    //   })\n    // }\n    this.fittedCurve.forEach(point => {\n      point.x = leftPoint.x + (point.x - firstPoint.x)\n      point.y = leftPoint.y + (point.y - firstPoint.y)\n    })\n    return [leftIndex, rightIndex]\n  }\n\n  getLeftPointIndex (storyline, minFrame) {\n    let index = 2 * minFrame\n    // filter un-qualified nodes\n    while (storyline[index++].y === -10000) {}\n    return index - 1\n  }\n\n  getRightPointIndex (storyline, maxFrame) {\n    let index = 2 * maxFrame + 1\n    // filter un-qualified nodes\n    while (storyline[index--].y === -10000) {}\n    return index + 1\n  }\n}\n\n// For Testing\nclass LinearFitCurve extends FitCurve {\n  constructor (targetPath) {\n    super(targetPath)\n  }\n\n  fitCurve (point) {\n    for (let i = 0, len = this.fittedCurve.length - 1; i < len; i++) {\n      // locate at a range\n      if ((point.x - this.fittedCurve[i].x) * (point.x - this.fittedCurve[i + 1].x) <= 0) {\n        let tempK = (this.fittedCurve[i + 1].y - this.fittedCurve[i].y) / (this.fittedCurve[i + 1].x - this.fittedCurve[i].x)\n        let targetY = this.fittedCurve[i].y + tempK * (point.x - this.fittedCurve[i].x)\n        return point.y === -10000 ? -10000 : (targetY + ALPHA * point.y) / (1 + ALPHA)\n      }\n    }\n    return point.y\n  }\n}\n\nclass CubicFitCurve extends FitCurve {\n  constructor (targetPath) {\n    super(targetPath)\n  }\n\n  match (storyline, minFrame, maxFrame, config) {\n    // scale target path\n    let range = super.match(storyline, minFrame, maxFrame, config)\n    // cubic fit target path\n    let tmpArr = this.fittedCurve\n    let inPoints = []\n    this.fittedCurve.forEach(point => {\n      inPoints.push(point.x)\n      inPoints.push(point.y)\n    })\n    let samplesNum = 2\n    let outPoints = getCurvePoints(inPoints, 0.5, samplesNum)\n    this.fittedCurve = []\n    for (let i = 0, len = outPoints.length / 2; i < len; i++) {\n      let tmpX = outPoints[2 * i]\n      let tmpY = outPoints[2 * i + 1]\n      let tmpNode = new Node(tmpX, tmpY)\n      this.fittedCurve.push(tmpNode)\n    }\n    return range\n  }\n\n  matchStoryline(storyline, config) {\n    let range = super.matchStoryline(storyline, config)\n    // cubic fit target path\n    let tmpArr = this.fittedCurve\n    let inPoints = []\n    this.fittedCurve.forEach(point => {\n      inPoints.push(point.x)\n      inPoints.push(point.y)\n    })\n    let samplesNum = 2\n    let outPoints = getCurvePoints(inPoints, 0.5, samplesNum)\n    this.fittedCurve = []\n    for (let i = 0, len = outPoints.length / 2; i < len; i++) {\n      let tmpX = outPoints[2 * i]\n      let tmpY = outPoints[2 * i + 1]\n      let tmpNode = new StyleNode(tmpX, tmpY)\n      this.fittedCurve.push(tmpNode)\n    }\n    return range\n  }\n\n  fitCurve (point) {\n    for (let i = 0, len = this.fittedCurve.length - 1; i < len; i++) {\n      // locate at a range\n      if ((point.x - this.fittedCurve[i].x) * (point.x - this.fittedCurve[i + 1].x) <= 0) {\n        let tempK = (this.fittedCurve[i + 1].y - this.fittedCurve[i].y) / (this.fittedCurve[i + 1].x - this.fittedCurve[i].x)\n        let targetY = this.fittedCurve[i].y + tempK * (point.x - this.fittedCurve[i].x)\n        if (point.y === -10000) {\n          return -10000\n        } else if (point.y === -5000) {\n          // console.log(targetY)\n          return targetY\n        } else if (point.y > 0) {\n          return (targetY + ALPHA * point.y) / (1 + ALPHA)\n        }\n      }\n    }\n    return point.y\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/PathReshaper.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomShape.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CustomShape.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e9f6a0ce\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CustomShape.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/CustomShape.vue\n// module id = ieIR\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"svg-card\",style:(_vm.styleObject),on:{\"mousedown\":_vm.handleMousedown}},[_c('svg',{staticClass:\"svg-content\"},[_vm._l((_vm.objects),function(object,index){return (object.type !== 'text')?_c('visual-object',{key:index,attrs:{\"object\":object,\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount}}):_vm._e()}),_vm._v(\" \"),_c('frame-select',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount}}),_vm._v(\" \"),_c('scale-select',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount}}),_vm._v(\" \"),_c('path-select',{attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mousedownCount\":_vm.mousedownCount}})],2),_vm._v(\" \"),_vm._l((_vm.textObjects),function(object,index){return _c('text-object',{key:index,attrs:{\"mouse\":_vm.mouse,\"object\":object,\"scrollX\":_vm.scrollX,\"scrollY\":_vm.scrollY}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bc271eb0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/cards/SVGCard.vue\n// module id = ihPm\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MoveFrame.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./MoveFrame.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33c04bfc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./MoveFrame.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/frames/MoveFrame.vue\n// module id = ikkP\n// module chunks = 1","<template>\n  <div class=\"undo-tool\" @click=\"handleClick\"  v-tooltip=\"'Undo'\">\n    <icon name=\"rotate-left\" scale=1.5></icon>\n  </div>\n</template>\n\n<script>\nimport { UNDO } from '../../../store/MutationTypes'\nexport default {\n  name: 'UndoTool',\n\n  methods: {\n    // only withdraw one step\n    handleClick () {\n      console.log('undo-tool')\n      this.$store.dispatch(UNDO)\n      this.$store.dispatch('cancelReshape')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../../assets/Constants.scss';\n\n.undo-tool {\n  display: inline-block;\n  position: relative;\n  width: 40px;\n  height: 32px;\n  padding: 8px 0 0;\n  margin: 5px 0 15px 15px;\n  background: #FFF;\n  text-align: center;\n  color: $GRAY4;\n  border-radius: 50%;\n  border: 1px solid grey;\n  // box-shadow: 2px 2px 1px grey;\n\n  &:hover {\n    background: $GRAY2;\n  }\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/UndoTool.vue","<template>\n  <g class=\"group-select\" v-show=\"isUsingFrameSelect\">\n    <line v-for=\"n in linesNum\"\n      :x1=\"sPoints[n-1].x\"\n      :y1=\"sPoints[n-1].y\"\n      :x2=\"ePoints[n-1].x\"\n      :y2=\"ePoints[n-1].y\"\n      stroke=\"red\"\n      stroke-width=\"10\"\n      opacity=\"0.5\"\n      :key=\"n\">\n    </line>\n  </g>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport * as Mousetrap from 'mousetrap'\n\nexport default {\n  name: 'GroupSelect',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number,\n    mouseupCount: Number\n  },\n\n  data () {\n    return {\n      sPoints: [],\n      ePoints: [],\n      linesNum: 0,\n      mousedownNum: 0\n    }\n  },\n\n  computed: {\n    isUsingFrameSelect () {\n      return this.isUsingBendTool || this.isUsingLinkTool\n    },\n\n    ...mapGetters([\n      'isUsingBendTool',\n      'isUsingLinkTool'\n    ])\n  },\n\n  methods: {\n    restore () {\n      this.sPoints = []\n      this.ePoints = []\n      this.linesNum = 0\n      this.mousedownNum = 0\n    }\n  },\n\n  watch: {\n    mousedownCount (newVal) {\n      this.mousedownNum++\n      if (this.mousedownNum % 2 === 1) {\n        this.sPoints.push({\n          x: this.mouseX,\n          y: this.mouseY\n        })\n      }\n      if (this.mousedownNum % 2 === 0) {\n        this.linesNum ++\n        this.ePoints.push({\n          x: this.mouseX,\n          y: this.mouseY\n        })\n      }\n    },\n\n    isUsingBendTool (newVal) {\n      if (newVal) {\n        this.restore()\n      } else {\n        this.$store.dispatch('straightenCharacter', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        })\n      }\n    },\n\n    isUsingSessionBreak (newVal) {\n      if (newVal) {\n        this.restore()\n      } else {\n        this.$store.dispatch('breakSession', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        })\n      }\n    },\n\n    isUsingLinkTool (newVal) {\n      if (newVal) {\n        this.restore()\n      } else {\n        this.$store.dispatch('brushingCharacter', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        })\n      }\n    }\n  },\n\n  // IMPORTANT\n  mounted () {\n    let mousetrap = new Mousetrap()\n    mousetrap.bind('esc', () => {\n      if (this.isUsingBendTool) {\n        this.$store.dispatch('straightenCharacter', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        })\n      }\n      // if (this.isUsingSessionBreak) {\n      //   this.$store.dispatch('breakSession', {\n      //     sPoints: this.sPoints,\n      //     ePoints: this.ePoints,\n      //     linesNum: this.linesNum\n      //   })\n      // }\n      if (this.isUsingLinkTool) {\n        this.$store.dispatch('brushingCharacter', {\n          sPoints: this.sPoints,\n          ePoints: this.ePoints,\n          linesNum: this.linesNum\n        })\n      }\n      // if (this.isUsingTwine) {\n      //   this.$store.dispatch('twineCharacters', {\n      //     sPoints: this.sPoints,\n      //     ePoints: this.ePoints,\n      //     linesNum: this.linesNum\n      //   })\n      // }\n      this.restore()\n    })\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/utils/GroupSelect.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"rectangle\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-18251bbe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Rectangle.vue\n// module id = l1bS\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Echelon.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Echelon.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0920a5a6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Echelon.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Echelon.vue\n// module id = meyI\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"side-panel\",style:(_vm.styleObject)},[_c('div',{staticClass:\"side-panel-header\"},[_vm._v(_vm._s(_vm.panelName === 'ShapePanel' ? 'ShapePanel' : _vm.panelName))]),_vm._v(\" \"),(_vm.panelName === 'ElementPanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('tree-panel')],1):_vm._e(),_vm._v(\" \"),(_vm.panelName === 'ShapePanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('shape-panel')],1):_vm._e(),_vm._v(\" \"),(_vm.panelName === 'StoryPanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('story-panel')],1):_vm._e(),_vm._v(\" \"),(_vm.panelName === 'TextPanel')?_c('div',{staticClass:\"side-panel-content\"},[_c('text-panel')],1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5ccfb464\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/SidePanel.vue\n// module id = nNI8\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-732e8251\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TextPanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextPanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./TextPanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-732e8251\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./TextPanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/panelbar/panels/TextPanel.vue\n// module id = nNzv\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"triangle\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1d69c3fe\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Triangle.vue\n// module id = nbaU\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"text-card\",style:(_vm.styleObject),on:{\"contextmenu\":_vm.handleContextMenu,\"click\":function($event){$event.stopPropagation();return _vm.handleClick($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.handleMousedown($event)},\"mouseup\":_vm.handleMouseup}},[_vm._v(\"\\n  \"+_vm._s(_vm.content)+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0f8ed344\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/objects/TextObject.vue\n// module id = pP5b\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StyleFrame.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./StyleFrame.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-04094dac\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./StyleFrame.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/frames/StyleFrame.vue\n// module id = peX0\n// module chunks = 1","<template>\n  <div class=\"save-tool\" @click=\"handleClick\"  v-tooltip=\"'Save'\">\n    <icon name=\"save\" scale=1.5></icon>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\n// import { RoughDrawer } from '../../../types/RoughDrawer'\n\nexport default {\n  name: 'UploadTool',\n\n  computed: {\n    ...mapGetters([\n      'request',\n      'history',\n      'storylines'\n    ])\n  },\n\n  methods: {\n    handleClick (event) {\n      this.handleSaveSvg(event)\n      // this.handleSaveConfig()\n      // this.handleSaveHistory()\n      // RoughDrawer.draw(this.storylines, {\n      //   roughness: 1,\n      //   stroke: 'grey',\n      //   strokeWidth: 3,\n      //   simplification: 0.4\n      // })\n    },\n\n    handleSaveSvg (event) {\n      let svgEl = document.getElementsByClassName('svg-content')[0]\n      svgEl.setAttribute('xmlns', 'http://www.w3.org/2000/svg')\n      let svgData = svgEl.outerHTML\n      let preface = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n'\n      let svgBlob = new Blob([preface, svgData], {type: 'image/svg+xml;charset=utf-8'})\n      let svgUrl = URL.createObjectURL(svgBlob)\n      let downloadLink = document.createElement('a')\n      downloadLink.href = svgUrl\n      downloadLink.download = 'storyline.svg'\n      document.body.appendChild(downloadLink)\n      downloadLink.click()\n      document.body.removeChild(downloadLink)\n    },\n\n    handleSaveConfig () {\n      let configContent = this.request\n      let str = JSON.stringify(configContent)\n      let dataUrl = 'data:application/json;charset=utf-8,' + encodeURIComponent(str)\n      let downloadLink = document.createElement('a')\n      downloadLink.href = dataUrl\n      downloadLink.download = 'config.json'\n      document.body.appendChild(downloadLink)\n      downloadLink.click()\n      document.body.removeChild(downloadLink)\n    },\n\n    handleSaveHistory () {\n      let configContent = {storylines: this.storylines}\n      let str = JSON.stringify(configContent)\n      let dataUrl = 'data:application/json;charset=utf-8,' + encodeURIComponent(str)\n      let downloadLink = document.createElement('a')\n      downloadLink.href = dataUrl\n      downloadLink.download = 'history.json'\n      document.body.appendChild(downloadLink)\n      downloadLink.click()\n      document.body.removeChild(downloadLink)\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../../assets/Constants.scss';\n\n.save-tool {\n  display: inline-block;\n  position: relative;\n  width: 40px;\n  height: 32px;\n  padding: 8px 0 0;\n  margin: 5px 0 15px 15px;\n  background: #FFF;\n  text-align: center;\n  color: $GRAY4;\n  border-radius: 50%;\n  border: 1px solid grey;\n  // box-shadow: 2px 2px 1px grey;\n\n  &:hover {\n    background: $GRAY2;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/SaveTool.vue","import { EquivalentIndexFinder } from './EquivalentIndexFinder'\n\nexport class StorySelector {\n  constructor(frameMap, sessionMap, characterMap) {\n    this.frameMap = frameMap\n    this.sessionMap = sessionMap\n    this.characterMap = characterMap\n  }\n\n  matchFrame (x, y) {\n    for (let [frame, range] of this.frameMap) {\n      if ((x - range[0]) * (x - range[1]) <= 0) {\n        return frame\n      }\n    }\n    return -1\n  }\n\n  matchFrameUnBound (x, y) {\n    let minBound = 1e4\n    let maxFrame = 0\n    for (let [frame, range] of this.frameMap) {\n      minBound = range[0] < minBound ? range[0] : minBound\n      maxFrame = frame\n      if ((x - range[0]) * (x - range[1]) <= 0) {\n        return frame\n      }\n    }\n    return x < minBound ? 0 : maxFrame\n  }\n\n  matchCharacter (x, y) {\n    let frame = this.matchFrame(x, y)\n    if (frame > -1) {\n      let characterYMap = this.characterMap.get(frame)\n      for (let [characterId, characterY] of characterYMap) {\n        if (Math.abs(y - characterY) < 2) {\n          return characterId\n        }\n      }\n    }\n    return -1\n  }\n  \n  matchCharacterR (frame, y) {\n    if (frame > -1) {\n      let characterYMap = this.characterMap.get(frame)\n      for (let [characterId, characterY] of characterYMap) {\n        if (Math.abs(y - characterY) < 10) {\n          return characterId\n        }\n      }\n    }\n    return -1\n  }\n\n  matchSession (x, y) {\n    let frame = this.matchFrame(x, y)\n    if (frame > -1) {\n      let characterYMap = this.characterMap.get(frame)\n      for (let [characterId, characterY] of characterYMap) {\n        if (Math.abs(y - characterY) < 2) {\n          return this.sessionMap[characterId][frame]\n        }\n      }\n    } else {\n      return -1\n    }\n  }\n}\n\nexport class EmphasizeSelector extends StorySelector {\n  constructor (rawStorylines, frameTable, sessionTable, characterTable, request, storyConfig) {\n    super(frameTable, sessionTable, characterTable)\n    this.rawStorylines = rawStorylines\n    this.defaultInnerGap = request.sessionInnerGap\n    this.defaultOuterGap = request.sessionOuterGap\n    this.yScaleFactor = storyConfig.yScaleFactor\n    this.yBaseline = storyConfig.paddingTop\n  }\n\n  getSelectSessionList (sArr, eArr) {\n    let startX = sArr[0].x < eArr[0].x ? sArr[0].x : eArr[0].x\n    let endX = sArr[0].x < eArr[0].x ? sArr[0].x : eArr[0].x\n    let sFrame = this.matchFrameUnBound(startX, 0)\n    let eFrame = this.matchFrameUnBound(endX, 0)\n    let topY = sArr[0].y < eArr[0].y ? sArr[0].y : eArr[0].y\n    let bottomY = sArr[0].y > eArr[0].y ? sArr[0].y : eArr[0].y\n    let sessionList = []\n    for (let frame = sFrame; frame < eFrame + 1; frame++) {\n      for (let id = 0, len = this.rawStorylines.length; id < len; id++) {\n        let characterId = this.rawStorylines[id].character_id\n        let positionY = this.rawStorylines[id].points[frame].item3 * this.yScaleFactor + this.yBaseline\n        if (positionY >= topY && positionY <= bottomY) {\n          let sessionId = this.sessionMap[characterId][frame]\n          if (sessionId > -1 && sessionList.indexOf(sessionId) === -1) {\n            sessionList.push(sessionId)\n          }\n        }\n      }\n    }\n    return sessionList\n  }\n\n  getScaleFactor (sArr, eArr) {\n    return Math.abs((eArr[1].y - sArr[1].y) / (eArr[0].y - sArr[0].y))\n  }\n\n  buildSessionConstraints (sArr, eArr) {\n    let sessionList = this.getSelectSessionList(sArr, eArr)\n    let scaleFactor = this.getScaleFactor(sArr, eArr)\n    let scaleInnerGap = this.defaultInnerGap * scaleFactor\n    // let scaleOuterGap = this.defaultOuterGap * scaleFactor\n    let scaleOuterGap = Math.abs(eArr[1].y - sArr[1].y)\n    // debugger\n    let sessionInnerGaps = []\n    sessionList.forEach(sessionId => {\n      sessionInnerGaps.push({\n        'item1': sessionId,\n        'item2': scaleInnerGap\n      })\n    })\n    let sessionOuterGaps = []\n    // TODO: change current outergap\n    for (let i = 0, len = sessionList.length; i < len; i++) {\n      for (let j = i + 1; j < len; j++) {\n        sessionOuterGaps.push({\n          'item1': {\n            'item1': sessionList[i],\n            'item2': sessionList[j]\n          },\n          'item2': {\n            'item1': scaleOuterGap,\n            // 'item2': scaleOuterGap + 30\n            'item2': -1\n          }\n        })\n      }\n    }\n    return {\n      'sessionInnerGaps': sessionInnerGaps,\n      'sessionOuterGaps': sessionOuterGaps\n    }\n  }\n}\n\nexport class StoryReorder extends StorySelector {\n  constructor(storylines, storyConfig, frameMap, sessionMap, characterMap) {\n    super(frameMap, sessionMap, characterMap)\n    this.storylines = storylines\n    this.storyConfig = storyConfig\n    this.frame = -1\n    this.character = -1\n    this.session = -1\n    // record initial y position of storyline\n    this.yBak1 = 0\n    this.yBak2 = 0\n    this.newY = 0\n  }\n\n  locate (x, y) {\n    this.frame = this.matchFrame(x, y)\n    if (this.frame > -1) {\n      this.character = this.matchCharacterR(this.frame, y)\n      if (this.character > -1) {\n        // let characterYMap = this.characterMap.get(this.frame)\n        let storyline = this.storylines[this.character].points\n        this.yBak1 = this.getPositionY(storyline, 0)\n        this.yBak2 = this.getPositionY(storyline, 1)\n      }\n    }\n  }\n\n  getPositionY (storyline, pos) {\n    let frame = this.frame\n    if (frame > -1) {\n      let lIndex = 0\n      let rIndex = 1\n      if (frame > 0) {\n        // lIndex = 3 + 4 * (frame - 1) + 1\n        // rIndex = 3 + 4 * (frame - 1) + 2\n        lIndex = 2 * frame\n        rIndex = lIndex + 1\n      }\n      switch (pos) {\n        case 0:\n        return storyline[lIndex].y > -10000 ? storyline[lIndex].y : storyline[rIndex].y\n        case 1:\n        return storyline[rIndex].y\n      }\n    }\n    return -10000\n  }\n\n  move (moveY) {\n    let yScaleFactor = this.storyConfig.yScaleFactor\n    let yBaseline = this.storyConfig.paddingTop\n    let scaleMoveY = moveY / yScaleFactor\n    if (this.character > -1 && this.frame > -1) {\n      let storyline = this.storylines[this.character].points\n      this.moveStoryline(storyline, scaleMoveY)\n      this.newY = ((this.yBak1 + this.yBak2) / 2 + scaleMoveY) * yScaleFactor + yBaseline\n    }\n  }\n\n  moveStoryline (storyline, moveY) {\n    let frame = this.frame\n    if (frame > -1) {\n      let lIndex = 0\n      let rIndex = 1\n      if (frame > 0) {\n        // lIndex = 3 + 4 * (frame - 1) + 1\n        // rIndex = 3 + 4 * (frame - 1) + 2\n        lIndex = 2 * frame\n        rIndex = lIndex + 1\n      }\n      storyline[lIndex].y = storyline[lIndex].y > -10000 ? this.yBak1 + moveY : storyline[lIndex].y\n      storyline[rIndex].y = this.yBak2 + moveY\n    }\n  }\n\n  reorder () {\n    if (this.frame > -1) {\n      let cOrder = this.reorderCharacter()\n      let cSession = this.generateSessionOrder(cOrder.order)\n      let sOrder = this.reorderSession()\n      let sSession = this.generateSessionOrder(sOrder.order)\n      return this.isArrayEqual(cSession, sSession) ? cOrder : sOrder\n    }\n  }\n\n  isArrayEqual (arr1, arr2) {\n    if (arr1.length === arr2.length) {\n      for (let i = 0, len = arr1.length; i < len; i++) {\n        if (arr1[i] !== arr2[i]) {\n          return false\n        }\n      }\n      return true\n    }\n    return false\n  }\n\n  generateSessionOrder (arr) {\n    let cMap = new Map()\n    arr.forEach((pos, c) => {\n      if (pos > -1) {\n        let sessionId = this.sessionMap[c][this.frame]\n        if (sessionId > -1) {\n          if (cMap.has(sessionId)) {\n            if (cMap.get(sessionId) > pos) {\n              cMap.set(sessionId, pos)\n            }\n          } else {\n            cMap.set(sessionId, pos)\n          }\n        }\n      }\n    })\n    let cArr = []\n    for (let [session, pos] of cMap) {\n      cArr.push({\n        session: session,\n        pos: pos\n      })\n    }\n    cArr.sort((a, b) => a.pos - b.pos)\n    return cArr.map(v => v.session)\n  }\n\n  reorderCharacter () {\n    let finalList = []    \n    if (this.character > -1) {\n      // init session nodes\n      let len = this.sessionMap.length\n      let characterInSessionMap = new Map()\n      for (let character = 0; character < len; character++) {\n        let tmpSession = this.sessionMap[character][this.frame]\n        if (this.character === character) {\n          this.session = tmpSession\n        }\n        if (tmpSession > -1) {\n          if (characterInSessionMap.has(tmpSession)) {\n            let tmpList = characterInSessionMap.get(tmpSession)\n            tmpList.push(character)\n          } else {\n            characterInSessionMap.set(tmpSession, [character])\n          }\n        }\n      }\n      // sort characters of session node\n      let characterYMap = this.characterMap.get(this.frame)\n      let sessionYMap = new Map()\n      for (let [session, characters] of characterInSessionMap) {\n        let sortedCharacters = []\n        let sessionY = 0\n        characters.forEach(character => {\n          let yPos = this.character === character ? this.newY : characterYMap.get(character)\n          let flag = false\n          for (let i = 0; i < sortedCharacters.length; i++) {\n            let tmpCharacter = sortedCharacters[i]\n            let tmpYPos = this.character === tmpCharacter ? this.newY : characterYMap.get(tmpCharacter)\n            if (yPos < tmpYPos) {\n              sortedCharacters.splice(i, 0, character)\n              flag = true\n              break\n            }\n          }\n          if (!flag) {\n            sortedCharacters.push(character)\n          }\n          sessionY += characterYMap.get(character)\n        })\n        sessionY = sessionY / characters.length\n        sessionYMap.set(session, sessionY)\n        characterInSessionMap.set(session, sortedCharacters)\n      }\n      // sort session nodes\n      let sortedSessions = []\n      let sortedList = []\n      for (let [session, characters] of characterInSessionMap) {\n        let flag = false\n        for (let i = 0; i < sortedSessions.length; i++) {\n          let tmpSession = sortedSessions[i]\n          if (sessionYMap.get(session) < sessionYMap.get(tmpSession)) {\n            sortedSessions.splice(i, 0, session)\n            sortedList.splice(i, 0, characters)\n            flag = true\n            break\n          }\n        }\n        if (!flag) {\n          sortedSessions.push(session)\n          sortedList.push(characters)\n        }\n      }\n      // sort characters\n      let unionList = []\n      sortedList.forEach(tmpList => {\n        unionList = unionList.concat(tmpList)\n      })\n      // except rabbit case\n      let rabbitId = this.sessionMap.length - 1\n      let _unionList = []\n      unionList.forEach(id => {\n        if (id !== rabbitId) {\n          _unionList.push(id)\n        }\n      })\n      _unionList.splice(0, 0, rabbitId)\n      unionList = _unionList\n      // console.log(unionList)\n      // format finalList\n      let finalMap = new Map()\n      unionList.forEach((character, pos) => {\n        finalMap.set(character, pos)\n      })\n      for (let k = 0; k < len; k++) {\n        if (finalMap.has(k)) {\n          finalList.push(finalMap.get(k))\n        } else {\n          finalList.push(-1)\n        }\n      }\n    }\n    return {\n      frame: this.frame,\n      order: finalList\n    }\n  }\n\n  reorderSession () {\n    let finalList = []    \n    if (this.character > -1) {\n      // init session nodes\n      let len = this.sessionMap.length\n      let characterInSessionMap = new Map()\n      for (let character = 0; character < len; character++) {\n        let tmpSession = this.sessionMap[character][this.frame]\n        if (this.character === character) {\n          this.session = tmpSession\n        }\n        if (tmpSession > -1) {\n          if (characterInSessionMap.has(tmpSession)) {\n            let tmpList = characterInSessionMap.get(tmpSession)\n            tmpList.push(character)\n          } else {\n            characterInSessionMap.set(tmpSession, [character])\n          }\n        }\n      }\n      // sort characters of session node\n      let characterYMap = this.characterMap.get(this.frame)\n      let sessionYMap = new Map()\n      for (let [session, characters] of characterInSessionMap) {\n        let sortedCharacters = []\n        let sessionY = 0\n        characters.forEach(character => {\n          let yPos = characterYMap.get(character)\n          let flag = false\n          for (let i = 0; i < sortedCharacters.length; i++) {\n            let tmpCharacter = sortedCharacters[i]\n            let tmpYPos = characterYMap.get(tmpCharacter)\n            if (yPos < tmpYPos) {\n              sortedCharacters.splice(i, 0, character)\n              flag = true\n              break\n            }\n          }\n          if (!flag) {\n            sortedCharacters.push(character)\n          }\n          sessionY += yPos\n        })\n        sessionY = this.session === session ? this.newY : sessionY / characters.length\n        sessionYMap.set(session, sessionY)\n        characterInSessionMap.set(session, sortedCharacters)\n      }\n      // sort session nodes\n      let sortedSessions = []\n      let sortedList = []\n      for (let [session, characters] of characterInSessionMap) {\n        let flag = false\n        for (let i = 0; i < sortedSessions.length; i++) {\n          let tmpSession = sortedSessions[i]\n          if (sessionYMap.get(session) < sessionYMap.get(tmpSession)) {\n            sortedSessions.splice(i, 0, session)\n            sortedList.splice(i, 0, characters)\n            flag = true\n            break\n          }\n        }\n        if (!flag) {\n          sortedSessions.push(session)\n          sortedList.push(characters)\n        }\n      }\n      // sort characters\n      let unionList = []\n      sortedList.forEach(tmpList => {\n        unionList = unionList.concat(tmpList)\n      })\n      // except rabbit case\n      let rabbitId = this.sessionMap.length - 1\n      let _unionList = []\n      unionList.forEach(id => {\n        if (id !== rabbitId) {\n          _unionList.push(id)\n        }\n      })\n      _unionList.splice(0, 0, rabbitId)\n      unionList = _unionList\n      // console.log(unionList)\n      // format finalList\n      let finalMap = new Map()\n      unionList.forEach((character, pos) => {\n        finalMap.set(character, pos)\n      })\n      for (let k = 0; k < len; k++) {\n        if (finalMap.has(k)) {\n          finalList.push(finalMap.get(k))\n        } else {\n          finalList.push(-1)\n        }\n      }\n    }\n    return {\n      frame: this.frame,\n      order: finalList\n    }\n  }\n}\n\nexport class Merger extends StorySelector {\n  constructor(frameMap, sessionMap, characterMap) {\n    super(frameMap, sessionMap, characterMap)\n  }\n\n  merge(x, y) {\n    let session = matchSession (x, y)\n    let result\n    if (session !== -1) {\n      result = {\n        \"item1\": session,\n        \"item2\": 0\n      }\n    }\n\n    return result\n  }\n}\n\nexport class Spliter extends StorySelector {\n  constructor(frameMap, sessionMap, characterMap, defaultInnerGap) {\n    super(frameMap, sessionMap, characterMap)\n    this.defaultInnerGap = defaultInnerGap\n  }\n\n  split(x, y) {\n    let session = matchSession (x, y)\n    let result\n    if (session !== -1) {\n      result = {\n        \"item1\": session,\n        \"item2\": this.defaultInnerGap\n      }\n    }\n\n    return result\n  }\n}\n\nexport class FrameScaler extends StorySelector {\n  constructor(frameMap, sessionMap, characterMap, frameSteps, curveSteps) {\n    super(frameMap, sessionMap, characterMap)\n    this.frameSteps = frameSteps\n    this.curveSteps = curveSteps\n  }\n\n  scale(sPoints, ePoints) {\n    let x1 = sPoints[0].x\n    let x2 = ePoints[0].x\n    let x3 = sPoints[1].x\n    let x4 = ePoints[1].x\n    let startFrame = this.matchFrameUnBound(x1, 0)\n    let endFrame = this.matchFrameUnBound(x2, 0)\n    let scaleFactor = Math.abs(x4 - x3) / Math.abs(x2 - x1)\n    if (x2 > x1) {\n      console.log('horizontal scale curve step')\n      this.scaleCurveStep(startFrame, endFrame, scaleFactor)\n    } else if (x2 < x1) {\n      console.log('horizontal scale frame step')      \n      this.scaleFrameStep(startFrame, endFrame, scaleFactor)\n    }\n  }\n  \n  scaleCurveStep (startFrame, endFrame, scaleFactor) {\n    if (endFrame - 1 >= startFrame + 1) {\n      for (let frame = 0; frame < this.frameMap.size; frame++) {\n        // reduce selection sensitivity\n        if (startFrame + 1 <= frame && frame <= endFrame - 1) {\n          this.curveSteps[frame] *= scaleFactor\n        }\n      }\n    }\n  }\n  \n  scaleFrameStep (startFrame, endFrame, scaleFactor) {\n    if (startFrame - 1 >= endFrame + 1) {\n      for (let frame = 0; frame < this.frameMap.size; frame++) {\n        if (endFrame + 1 <= frame && frame <= startFrame - 1) {\n          this.frameSteps[frame] *= scaleFactor\n        }\n      }\n    }\n  }\n}\n\nexport class SessionMover extends StorySelector {\n  constructor (storylines, frameTable, sessionTable, characterTable) {\n    super(frameTable, sessionTable, characterTable)\n    this.storylines = storylines\n    this.moveTable = new Map()\n    this.yBak1 = new Map()\n    this.yBak2 = new Map()\n  }\n\n  locate (x, y) {\n    this.frame = this.matchFrame(x, y)\n    if (this.frame > -1) {\n      this.character = this.matchCharacterR(this.frame, y)\n      if (this.character > -1) {\n        let equivalentIndexFinder = new EquivalentIndexFinder(this.sessionMap)\n        this.moveTable = equivalentIndexFinder.find(this.character, this.frame)\n        for (let [character, frameRange] of this.moveTable) {\n          let storyline = this.storylines[character].points\n          let tmpFrame = frameRange[0]\n          let tmpLeftY = this.getPositionY(storyline, tmpFrame, 0)\n          let tmpRightY = this.getPositionY(storyline, tmpFrame, 1)\n          this.yBak1.set(character, tmpLeftY)\n          this.yBak2.set(character, tmpRightY)\n        }\n      }\n    }\n  }\n\n  getPositionY (storyline, frame, pos) {\n    if (frame > -1) {\n      let lIndex = 0\n      let rIndex = 1\n      if (frame > 0) {\n        lIndex = 2 * frame\n        rIndex = lIndex + 1\n      }\n      switch (pos) {\n        case 0:\n        return storyline[lIndex].y > -10000 ? storyline[lIndex].y : storyline[rIndex].y\n        case 1:\n        return storyline[rIndex].y\n      }\n    }\n    return -10000\n  }\n\n  move (moveY) {\n    let frame = this.frame\n    let character = this.character\n    let moveTable = this.moveTable\n    if (frame > -1 && character > -1) {\n      for (let [character, frameRange] of moveTable) {\n        this.moveStoryline(moveY, character, frameRange)\n      }\n    }\n  }\n\n  moveStoryline (moveY, character, frameRange) {\n    let storyline = this.storylines[character].points\n    frameRange.forEach(frame => {\n      let lIndex = 2 * frame\n      let rIndex = lIndex + 1\n      let tmpYBak1 = this.yBak1.get(character)\n      let tmpYBak2 = this.yBak2.get(character)\n      storyline[lIndex].y = storyline[lIndex].y > -10000 ? tmpYBak1 + moveY : storyline[lIndex].y\n      storyline[rIndex].y = tmpYBak2 + moveY\n      // update character map\n      let tmpY = (storyline[lIndex].y + storyline[rIndex].y) / 2\n      let tmpMap = this.characterMap.get(frame)\n      tmpMap.set(character, tmpY)\n    })\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/Selector.js","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Rectangle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Rectangle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-18251bbe\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Rectangle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Rectangle.vue\n// module id = q+vf\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',[_c('div',{staticClass:\"tree-node-content\",class:{bold: _vm.isFolder},on:{\"dblclick\":_vm.changeVisible}},[(_vm.visible)?_c('p',[_vm._v(_vm._s(_vm.model.name)+\"\\n      \"),(_vm.isFolder)?_c('span',{on:{\"click\":_vm.toggle}},[_vm._v(\"[\"+_vm._s(_vm.open ? '-' : '+')+\"]\")]):_vm._e()]):_c('s',[_vm._v(_vm._s(_vm.model.name)+\"\\n      \"),(_vm.isFolder)?_c('span',{on:{\"click\":_vm.toggle}},[_vm._v(\"[\"+_vm._s(_vm.open ? '-' : '+')+\"]\")]):_vm._e()])]),_vm._v(\" \"),(_vm.isFolder)?_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.open),expression:\"open\"}]},_vm._l((_vm.model.children),function(model,index){return _c('tree-node',{key:index,staticClass:\"tree-node\",attrs:{\"model\":model}})}),1):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b06ac9b8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/panelbar/panels/TreePanel/TreeNode.vue\n// module id = qOY/\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eefc79a0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./WorkSpace.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkSpace.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkSpace.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eefc79a0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./WorkSpace.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/WorkSpace.vue\n// module id = qTQm\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingScaleTool),expression:\"isUsingScaleTool\"}],staticClass:\"red-select\"},_vm._l((_vm.linesNum),function(n){return _c('line',{key:n,attrs:{\"x1\":_vm.sPoints[n-1].x,\"y1\":_vm.sPoints[n-1].y,\"x2\":_vm.ePoints[n-1].x,\"y2\":_vm.ePoints[n-1].y,\"stroke\":\"red\",\"stroke-width\":\"3\"}})}),0)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-63cb121b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/utils/ScaleSelect.vue\n// module id = rNQu\n// module chunks = 1","import { BezierNode } from './BezierNode'\n\nclass State {\n  constructor () {\n    this._visible = true\n    this._scale = false\n    this._reshape = false\n    this._move = true\n    this._select = false\n    this._rotate = false\n    this._create = false\n  }\n\n  get isShow () {\n    return this._visible\n  }\n\n  get isScale () {\n    return this._scale\n  }\n\n  get isReshape () {\n    return this._reshape\n  }\n\n  get isMove () {\n    return this._move\n  }\n\n  get isSelect () {\n    return this._select\n  }\n\n  get isRotate () {\n    return this._rotate\n  }\n\n  get isCreate () {\n    return this._create\n  }\n\n  activateShow () {\n    this._visible = true\n  }\n\n  closeShow () {\n    this._visible = false\n  }\n\n  activateScale () {\n    this._scale = true\n  }\n\n  closeScale () {\n    this._scale = false\n  }\n\n  activateReshape () {\n    this._reshape = true\n  }\n\n  closeReshape () {\n    this._reshape = false\n  }\n\n  activateMove () {\n    this._move = true\n  }\n\n  closeMove () {\n    this._move = false\n  }\n\n  activateSelect () {\n    this._select = true\n  }\n\n  closeSelect () {\n    this._select = false\n  }\n\n  activateRotate () {\n    this._rotate = true\n  }\n\n  closeRotate () {\n    this._rotate = false\n  }\n\n  initState () {\n    this._create = true\n    this._move = true\n    // this._visible = true\n  }\n}\n\n// base object for shape and text\nclass VisualObject extends State {\n  constructor (type) {\n    super()\n    this._id = -1\n    this._type = type\n    this._name = ''\n    this._cardID = 0\n  }\n\n  get name () {\n    return this._name\n  }\n\n  set name (str) {\n    this._name = str\n  }\n\n  get type () {\n    return this._type\n  }\n\n  get id () {\n    return this._id\n  }\n\n  set id (value) {\n    this._id = value\n  }\n}\n\n// base object for customshape, toolshape, and storyline\nclass Shape extends VisualObject {\n  constructor (type) {\n    super(type)\n    this._frameX = 0\n    this._frameY = 0\n    this._frameW = 0\n    this._frameH = 0\n    this._positionX = 0\n    this._positionY = 0\n    this._offsetX = 0\n    this._offsetY = 0\n    this.geometry = {\n      nodes: []\n    }\n  }\n\n  get frameX () {\n    return this._frameX\n  }\n\n  set frameX (value) {\n    this._frameX = value\n  }\n\n  get frameY () {\n    return this._frameY\n  }\n\n  set frameY (value) {\n    this._frameY = value\n  }\n\n  get frameH () {\n    return this._frameH\n  }\n\n  set frameH (value) {\n    this._frameH = value\n  }\n\n  get frameW () {\n    return this._frameW\n  }\n\n  set frameW (value) {\n    this._frameW = value\n  }\n\n  get positionX () {\n    return this._positionX\n  }\n\n  get positionY () {\n    return this._positionY\n  }\n\n  get nodes () {\n    return this.geometry.nodes\n  }\n\n  set nodes (arr) {\n    this.geometry.nodes = arr\n  }\n\n  move (moveX, moveY) {\n    // move position\n    this._positionX += moveX\n    this._positionY += moveY\n    // move frame\n    this._frameX += moveX\n    this._frameY += moveY\n    // move nodes\n    this.geometry.nodes.forEach(node => {\n      node.move(moveX, moveY)\n    })\n  }\n\n  rotate (sin, cos) {\n    // rotate nodes\n    // debugger\n    this.geometry.nodes.forEach(node => {\n      node.rotate(sin, cos, this._positionX, this._positionY)\n    })\n    // update frame\n    this.updateFrame()\n    // this.updatePosition()\n  }\n\n  update (distX, distY) {\n    // update nodes\n    this.geometry.nodes.forEach(node => {\n      node.update(distX, distY)\n    })\n    // update frame and position\n    this.updateFrame()\n    this.updatePosition()\n  }\n\n  updateX (distX) {\n    this.geometry.nodes.forEach(node => {\n      if (node.y > -10000) {\n        node.updateX(distX)\n      }\n    })\n    this.updateFrame()\n    this.updatePosition()\n  }\n\n  updateY (distY) {\n    this.geometry.nodes.forEach(node => {\n      if (node.y > -10000) {\n        node.updateY(distY)\n      }\n    })\n    this.updateFrame()\n    this.updatePosition()\n  }\n\n  updateFrame () {\n    let xNodes = this.geometry.nodes.map(node => node.x)\n    let yNodes = this.geometry.nodes.map(node => node.y)\n    this._frameX = Math.min.apply(null, xNodes)\n    this._frameW = Math.max.apply(null, xNodes) - this._frameX\n    this._frameY = Math.min.apply(null, yNodes)\n    this._frameH = Math.max.apply(null, yNodes) - this._frameY\n  }\n\n  updatePosition () {\n    this._positionX = this._frameX + this._frameW / 2\n    this._positionY = this._frameY + this._frameH / 2\n  }\n\n  // TODO\n  scale (scale) {\n\n  }\n\n  initTransform () {\n    this.geometry.nodes.forEach(node => {\n      node.backup()\n    })\n  }\n\n  addBezierNode (x, y, x2, y2) {\n    let bezierNode = new BezierNode(x, y, x2, y2)\n    this.geometry.nodes.push(bezierNode)\n    return this.geometry.nodes.length - 1\n  }\n\n  updateBezierNode (i, x, y, x2, y2) {\n    let bezierNode = new BezierNode(x, y, x2, y2)\n    if (this.geometry.nodes.length < i) {\n      this.geometry.nodes.push(bezierNode)\n    } else {\n      this.geometry.nodes[i] = bezierNode\n    }\n  }\n\n  deleteBezierNode (i) {\n    this.geometry.nodes.splice(i, 1)\n  }\n\n  init () {\n    this.updateFrame()\n    this.updatePosition()\n    this.initState()\n  }\n}\n\n// Regular Shape\nexport class RegularShape extends Shape {\n  constructor (type) {\n    super(type)\n  }\n}\n\n// Custom Shape\nexport class CustomShape extends Shape {\n  constructor (type) {\n    super(type)\n  }\n}\n\n// Storyline\nexport class Storyline extends Shape {\n  constructor (type) {\n    super(type)\n    this._characterId = -1\n  }\n\n  get characterId () {\n    return this._characterId\n  }\n\n  set characterId (id) {\n    this._characterId = id\n  }\n\n  init() {\n    this.updateFrame()\n    this.updatePosition()\n    this.initState()\n    this.closeMove()\n  }\n}\n\n// Tool Shape\nexport class ToolShape extends Shape {\n  constructor (type) {\n    super(type)\n  }\n}\n\n// Text\nexport class Text extends VisualObject {\n  constructor (type, x, y) {\n    super (type)\n    this.frameX = x\n    this.frameY = y\n    this._frameX = x\n    this._frameY = y\n    this.frameW = 0\n    this.frameH = 0\n    this.fontSize = 12\n    this.fontFamily = 'Arial'\n    this.color = 'black'\n    this.content = 'hello'\n    this.initState()\n  }\n\n  updateX (newX) {\n    this.frameX = this._frameX + newX\n  }\n\n  updateY (newY) {\n    this.frameY = this._frameY + newY\n  }\n\n  beginMove () {\n    this._frameX = this.frameX\n    this._frameY = this.frameY\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/VisualObject.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:('Bending'),expression:\"'Bending'\"}]},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-89dde5b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/toolbox/tools/BendTool.vue\n// module id = rkOb\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Line.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Line.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5cc15f5a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Line.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/shapes/Line.vue\n// module id = sfWC\n// module chunks = 1","<template>\n  <div  v-tooltip=\"'Curving'\">\n    <font-awesome-icon :icon=\"icon\" />\n  </div>\n</template>\n\n<script>\nimport Icon from '@fortawesome/fontawesome-free-solid/faPaintBrush'\n\nexport default {\n  name: 'CurveTool',\n\n  computed: {\n    icon () {\n      return Icon\n    }\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/CurveTool.vue","<template>\n  <g class=\"path-select\" v-show=\"isUsingCurveTool\">\n    <path\n      :d=\"pathD\"\n      fill=\"none\"\n      stroke=\"blue\"\n      stroke-width=\"5\"\n    ></path>\n  </g>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport * as Mousetrap from 'mousetrap'\n\nexport default {\n  name: 'PathSelect',\n\n  props: {\n    mouseX: Number,\n    mouseY: Number,\n    mousedownCount: Number\n  },\n\n  data () {\n    return {\n      points: []\n    }\n  },\n\n  computed: {\n    pathD () {\n      let d = ''\n      this.points.forEach((point, index) => {\n        if (index === 0) {\n          d = `M ${point.x} ${point.y}`\n        } else if (index > 0) {\n          d += ` L ${point.x} ${point.y}`\n        }\n      })\n      return d\n    },\n\n    ...mapGetters([\n      'isUsingCurveTool',\n      'selectedCharacters'\n    ])\n  },\n\n  methods: {\n    restore () {\n      this.points = []\n    }\n  },\n\n  watch: {\n    mousedownCount (newVal) {\n      if (this.selectedCharacters.length > 0) {\n        this.points.push({\n          x: this.mouseX,\n          y: this.mouseY\n        })\n      }\n    },\n\n    isUsingCurveTool (newVal) {\n      if (newVal) {\n        this.restore()\n      } else if (this.points.length > 0) {\n        this.$store.dispatch('reshapeCharacters', this.points)\n      }\n    }\n  },\n\n  // IMPORTANT\n  mounted () {\n    let mousetrap = new Mousetrap()\n    mousetrap.bind('esc', () => {\n      this.restore()\n    })\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/utils/PathSelect.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LinkTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./LinkTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d2ea0aec\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./LinkTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/LinkTool.vue\n// module id = t2k0\n// module chunks = 1","<template>\n  <icon name=\"pencil\" scale=1.5></icon>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { CustomShape } from '../../../types/VisualObject'\nimport { INSERT_VISUAL_OBJECT } from '../../../store/MutationTypes'\n\nexport default {\n  name: 'PenTool',\n\n  computed: {\n    ...mapGetters([\n      'isUsingPenTool'\n    ])\n  },\n\n  watch: {\n    isUsingPenTool (newVal) {\n      if (newVal) {\n        let customShape = new CustomShape('customshape')\n        this.$store.commit(INSERT_VISUAL_OBJECT, customShape)\n      }\n    }\n  }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/PenTool.vue","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RectFrame.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RectFrame.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1aee5186\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RectFrame.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/frames/RectFrame.vue\n// module id = u1Rf\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"hexagon\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":_vm.fillColor,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_vm._l((_vm.nodes),function(node,index){return _c('controlnode',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.reshape),expression:\"reshape\"}],key:index,attrs:{\"mouseX\":_vm.mouseX,\"mouseY\":_vm.mouseY,\"mouseupCount\":_vm.mouseupCount,\"mousedownCount\":_vm.mousedownCount,\"node\":node}})})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-45149f60\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Hexagon.vue\n// module id = u4D7\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BendTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./BendTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-89dde5b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./BendTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/BendTool.vue\n// module id = uBqI\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2bb215e4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UploadTool.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UploadTool.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UploadTool.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2bb215e4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UploadTool.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/toolbox/tools/UploadTool.vue\n// module id = uWrl\n// module chunks = 1","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./VisualObject.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./VisualObject.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-04f6f320\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./VisualObject.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/workspace/objects/VisualObject.vue\n// module id = upPS\n// module chunks = 1","<template>\n  <g class=\"custom-shape\" v-show=\"visible\">\n    <path\n      :d=\"pathD\"\n      :fill=\"fillColor\"\n      :stroke=\"strokeColor\"\n      :stroke-width=\"strokeWidth\"\n      :opacity=\"opacity\">\n    </path>\n    <g v-for=\"(node, index) in nodes\" :key=\"index\">\n      <beziertool v-show=\"node.isActiveBezierTool\"\n        :mouseX=\"mouseX\"\n        :mouseY=\"mouseY\"\n        :mouseupCount=\"mouseupCount\"\n        :mousedownCount=\"mousedownCount\"\n        :node=\"node\">\n      </beziertool>\n      <controlnode v-show=\"!created || reshape\"\n        @deleteNode=\"deleteNode(index)\"\n        :mouseX=\"mouseX\"\n        :mouseY=\"mouseY\"\n        :mouseupCount=\"mouseupCount\"\n        :mousedownCount=\"mousedownCount\"\n        :index=\"index\"\n        :node=\"node\">\n      </controlnode>\n    </g>\n  </g>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { INSERT_VISUAL_OBJECT } from '../../../store/MutationTypes'\nimport BezierTool from '../utils/BezierTool'\nimport ControlNode from '../utils/ControlNode'\nimport { CustomShape } from '../../../types/VisualObject'\n\nimport * as Mousetrap from 'mousetrap'\n\nexport default {\n  name: 'CustomShape',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'fillColor', 'strokeColor', 'strokeWidth', 'opacity', 'object'],\n\n  data () {\n    return {\n      draggedNodeId: -1,\n      xReferedToNode: 0,\n      yReferedToNode: 0\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    visible () {\n      return this.object.isShow\n    },\n\n    reshape () {\n      return this.object.isReshape\n    },\n\n    created () {\n      return this.object.isCreate\n    },\n\n    pathD () {\n      let pathD = ''\n      this.nodes.forEach((node, index) => {\n        if (index === 0) {\n          pathD += `M ${node.x} ${node.y}`\n        } else {\n          let lastNode = this.nodes[index - 1]\n          pathD += ` C ${lastNode.x3} ${lastNode.y3} ${node.x2} ${node.y2} ${node.x} ${node.y}`\n        }\n      })\n      pathD = this.nodes.length > 2 ? pathD += 'Z' : pathD\n      return pathD\n    },\n\n    ...mapGetters([\n      'isUsingPenTool',\n      'objects'\n    ])\n  },\n\n  methods: {\n    deleteNode (index) {\n      this.object.deleteBezierNode(index)\n    }\n  },\n\n  watch: {\n    mousedownCount (newVal) {\n      if (!this.created) {\n        this.draggedNodeId = this.object.addBezierNode(this.mouseX, this.mouseY, this.mouseX, this.mouseY)\n        // debugger\n        this.nodes[this.draggedNodeId].activateBezierTool()\n      }\n    },\n\n    mouseupCount (newVal) {\n      if (!this.created && this.draggedNodeId > -1) {\n        this.nodes[this.draggedNodeId].closeBezierTool()\n      }\n    },\n\n    mouseX (newVal) {\n      if (!this.created) {\n        let ID = this.draggedNodeId\n        if (ID > -1) {\n          let node = this.nodes[ID]\n          if (node.isActiveBezierTool) {\n            node.x2 = newVal\n            node.x3 = 2 * node.x - newVal\n          }\n        }\n      }\n    },\n\n    mouseY (newVal) {\n      if (!this.created) {\n        let ID = this.draggedNodeId\n        if (ID > -1) {\n          let node = this.nodes[ID]\n          if (node.isActiveBezierTool) {\n            node.y2 = newVal\n            node.y3 = 2 * node.y - newVal\n          }\n        }\n      }\n    },\n\n    isUsingPenTool (newVal) {\n      if (!this.object.isCreate) {\n        this.object.init()\n      }\n    }\n  },\n\n  // IMPORTANT\n  mounted () {\n    let mousetrap = new Mousetrap()\n    mousetrap.bind('esc', () => {\n      this.object.init()\n      // begin next path\n      let customShape = new CustomShape('customshape')\n      this.$store.commit(INSERT_VISUAL_OBJECT, customShape)\n    })\n  },\n\n  components: {\n    beziertool: BezierTool,\n    controlnode: ControlNode\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/shapes/CustomShape.vue","export const UPDATE_OBJECTS_QUEUE = 'UPDATE_OBJECTS_QUEUE'\nexport const INSERT_VISUAL_OBJECT = 'INSERT_VISUAL_OBJECT'\nexport const LOCATE_FOCUSOBJECT = 'LOCATE_FOCUSOBJECT'\nexport const LOCATE_FOCUSOBJECT_STYLE = 'LOCATE_FOCUSOBJECT_STYLE'\nexport const RESTORE_FOCUSOBJECT_STYLE = 'RESTORE_FOCUSOBJECT_STYLE'\nexport const ACTIVATE_OBJECT_CARD = 'ACTIVATE_OBJECT_CARD'\nexport const RESTORE_OBJECT_CARD = 'RESTORE_OBJECT_CARD'\nexport const OPEN_FILL_COLOR = 'OPEN_FILL_COLOR'\nexport const CLOSE_FILL_COLOR = 'CLOSE_FILL_COLOR'\nexport const OPEN_STROKE_COLOR = 'OPEN_STROKE_COLOR'\nexport const CLOSE_STROKE_COLOR = 'CLOSE_STROKE_COLOR'\n\nexport const OPEN_TOOL = 'OPEN_TOOL'\nexport const CLOSE_TOOL = 'CLOSE_TOOL'\nexport const CHANGE_TOOL = 'CHANGE_TOOL'\nexport const RESTORE_DEFAULT_TOOLS = 'RESTORE_DEFAULT_TOOLS'\nexport const OPEN_TEXT_TOOL = 'OPEN_TEXT_TOOL'\nexport const CLOSE_TEXT_TOOL = 'CLOSE_TEXT_TOOL'\n\nexport const LOCATE_TEXT_OBJECT = 'LOCATE_TEXT_OBJECT'\nexport const RESTORE_TEXT_OBJECT = 'RESTORE_TEXT_OBJECT'\n\nexport const RESTORE_DEFAULT_OBJECTS = 'RESTORE_DEFAULT_OBJECTS'\n\nexport const OPEN_PANEL = 'OPEN_PANEL'\nexport const CLOSE_PANEL = 'CLOSE_PANEL'\nexport const ACTIVATE_PANEL = 'ACTIVATE_PANEL'\nexport const CHANGE_PANEL = 'CHANGE_PANEL'\n\nexport const SET_UPLOAD_IDENTIFIER = 'SET_UPLOAD_IDENTIFIER'\nexport const INSERT_STORYLINE = 'INSERT_STORYLINE'\nexport const SET_STORYLINE_SESSIONTABLE = 'SET_STORYLINE_SESSIONTABLE'\nexport const GROUP_CHARACTERS = 'GROUP_CHARACTERS'\nexport const UPDATE_REQUEST = 'UPDATE_REQUEST'\nexport const UPDATE_STORYLINE = 'UPDATE_STORYLINE'\nexport const ADD_FOCUSING_CHARACTER = 'ADD_FOCUSING_CHARACTER'\nexport const ADD_SELECTING_CHARACTER = 'ADD_SELECTING_CHARACTER'\nexport const CLEAR_SELECTING_CHARACTERS = 'CLEAR_SELECTING_CHARACTERS'\n\nexport const RECORD_TARGET_PATH = 'RECORD_TARGET_PATH'\nexport const UPDATE_SVG_CARD = 'UPDATE_SVG_CARD'\n\nexport const UNDO = 'UNDO'\nexport const ADD_HISTORY = 'ADD_HISTORY'\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/MutationTypes.js","<template>\n  <div id=\"tool-box\">\n    <upload-tool></upload-tool>\n    <save-tool></save-tool>\n    <tool-item v-for=\"(toolName, index) in toolItems\"\n      :toolName=\"toolName\"\n      :usingToolName=\"usingToolName\"\n      @enterTool=\"enterTool($event)\"\n      @calcelTool=\"cancelTool($event)\"\n      :key=\"index\">\n    </tool-item>\n    <undo-tool></undo-tool>\n  </div>\n</template>\n\n<script>\nimport ToolItem from './ToolItem'\nimport UploadTool from './tools/UploadTool'\nimport SaveTool from './tools/SaveTool'\nimport UndoTool from './tools/UndoTool'\n\nexport default {\n  name: 'ToolBox',\n\n  data () {\n    return {\n      usingToolName: '',\n      toolItems: [\n        'OrderTool',\n        'BendTool',\n        'ScaleTool',\n        'CurveTool'\n        // 'LinkTool'\n        // 'PenTool'\n      ]\n    }\n  },\n\n  methods: {\n    enterTool (toolName) {\n      this.usingToolName = toolName\n    },\n\n    cancelTool (toolName) {\n      this.usingToolName = ''\n    }\n  },\n\n  components: {\n    'upload-tool': UploadTool,\n    'save-tool': SaveTool,\n    'undo-tool': UndoTool,\n    'tool-item': ToolItem\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '../../assets/Constants.scss';\n\n#tool-box {\n  position: absolute;\n  left: calc(100% - 80px);\n  display: flex;\n  flex-direction: column;\n  width: 80px;\n  height: 100%;\n  // padding: 0 20px;\n\n  .tool-item {\n    display: inline-block;\n    position: relative;\n    width: 40px;\n    height: 32px;\n    padding: 8px 0 0;\n    margin: 5px 0 15px 15px;\n    background: #FFF;\n    text-align: center;\n    color: $GRAY4;\n    border-radius: 50%;\n    border: 1px solid grey;\n    // box-shadow: 2px 2px 1px grey;\n\n    &:hover {\n      background: $GRAY2;\n    }\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/ToolBox.vue","<template>\n  <g class=\"move-frame\"\n    @mouseup=\"handleMouseup($event)\"\n    @mousedown.stop=\"handleMousedown($event)\"\n    @click.stop\n    @contextmenu=\"handleContextmenu($event)\">\n    <rotateframe\n      :object=\"object\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mousedownCount=\"mousedownCount\"\n      :mouseupCount=\"mouseupCount\">\n    </rotateframe>\n  </g>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex'\nimport { LOCATE_FOCUSOBJECT } from '../../../store/MutationTypes'\nimport RotateFrame from './RotateFrame'\n\nexport default {\n  name: 'MoveFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data () {\n    return {\n      moveDragged: false,\n      objectDragged: false,\n      recordedMouseX: 0,\n      recordedMouseY: 0,\n      displacementX: 0,\n      displacementY: 0\n    }\n  },\n\n  computed: {\n    objectDraggedLocked () {\n      return !this.object.isMove\n    },\n\n    moveDraggedLocked () {\n      return !this.object.isSelected\n    },\n\n    xScaleFactor () {\n      return this.storyConfig.xScaleFactor\n    },\n\n    yScaleFactor () {\n      return this.storyConfig.yScaleFactor\n    },\n\n    ...mapGetters([\n      'storyConfig'\n    ])\n  },\n\n  methods: {\n    handleMousedown () {\n      if (event.button === 0) {\n        this.recordedMouseX = this.mouseX\n        this.recordedMouseY = this.mouseY\n        this.object.initTransform()\n        this.objectDragged = true\n      }\n    },\n\n    handleMouseup () {\n      if (event.button === 0) {\n        this.lastDisplacementX = this.displacementX\n        this.lastDisplacementY = this.displacementY\n        this.objectDragged = false\n      }\n      this.object.updateFrame()\n      this.object.updatePosition()\n    },\n\n    handleContextmenu () {\n      this.$store.commit(LOCATE_FOCUSOBJECT, this.object)\n      return false\n    }\n  },\n\n  watch: {\n    mouseX (newVal) {\n      this.displacementX = newVal - this.recordedMouseX\n      // drag move\n      if (this.objectDragged && !this.objectDraggedLocked) {\n        if (this.object.type === 'storyline') {\n          this.object.updateX(this.displacementX / this.xScaleFactor)\n        } else {\n          this.object.updateX(this.displacementX)\n        }\n      }\n    },\n\n    mouseY (newVal) {\n      this.displacementY = newVal - this.recordedMouseY\n      if (this.objectDragged && !this.objectDraggedLocked) {\n        if (this.object.type === 'storyline') {\n          this.object.updateY(this.displacementY / this.yScaleFactor)\n        } else {\n          this.object.updateY(this.displacementY)\n        }\n      }\n    }\n  },\n\n  components: {\n    rotateframe: RotateFrame\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/frames/MoveFrame.vue","<template>\n  <div class=\"upload-tool\">\n    <icon name=\"plus\" scale=\"2\"></icon>\n    <input name=\"upload\" type=\"file\" @change=\"handleUpload\">\n  </div>\n</template>\n\n<script>\nimport { RESTORE_DEFAULT_TOOLS, UPDATE_REQUEST } from '../../../store/MutationTypes'\n\nexport default {\n  name: 'UploadTool',\n\n  methods: {\n    handleUpload (event) {\n      let file = event.target.files[0]\n      let type = file.name.split('.')[1]\n      if (type === 'xml') {\n        this.$store.dispatch('uploadXMLFile', file)\n      } else if (type === 'json') {\n        let reader = new FileReader()\n        reader.onloadend = (event) => {\n          if (event.target.readyState === FileReader.DONE) {\n            // console.log(event.target.result, typeof (event.target.result))\n            let request = JSON.parse(event.target.result)\n            this.$store.commit(RESTORE_DEFAULT_TOOLS)\n            this.$store.commit(UPDATE_REQUEST, request)\n            this.$store.dispatch('updateStoryline')\n          }\n        }\n        reader.readAsText(file)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n// @import '../../../assets/Constants.scss';\n\n.upload-tool {\n  position: relative;\n  width: 50px;\n  height: 42px;\n  padding: 8px 0 0;\n  background: #FFCC00;\n  text-align: center;\n  color: white;\n  margin: 25px 8px;\n  border-radius: 50%;\n  box-shadow: 2px 2px 1px grey;\n\n  input {\n    position: absolute;\n    right: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/toolbox/tools/UploadTool.vue","<template>\n  <div id=\"app\">\n    <workspace></workspace>\n    <side-panel></side-panel>\n    <side-panelbar></side-panelbar>\n    <tool-box></tool-box>\n  </div>\n</template>\n\n<script>\nimport ToolBox from './components/toolbox/ToolBox'\nimport WorkSpace from './components/workspace/WorkSpace'\nimport SidePanelBar from './components/panelbar/SidePanelBar'\nimport SidePanel from './components/panelbar/SidePanel'\n\nexport default {\n  name: 'App',\n\n  mounted () {\n    // \n    document.oncontextmenu = function () {\n      return false\n    }\n  },\n\n  components: {\n    'tool-box': ToolBox,\n    'workspace': WorkSpace,\n    'side-panelbar': SidePanelBar,\n    'side-panel': SidePanel\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import './assets/Constants.scss';\n\nbody {\n  margin: 0px;\n  font-family: Bradley Hand ITC;\n  user-select: none;\n\n  #app {\n    display: flex;\n    flex-direction: row;\n    position: relative;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","export class EquivalentIndexFinder {\n  constructor(sessionTable) {\n    this.sessionTable = sessionTable\n  }\n\n  find (character, timeframe) {\n    let result = new Map()\n    let sessionId = this.sessionTable[character][timeframe]\n    if (sessionId === -1 || sessionId === 9999) {\n      return result\n    }\n    let timeframeCount = this.sessionTable[0].length\n    for (let i = 0; i < this.sessionTable.length; i++) {\n      let timeframeRange = []\n      for (let j = 0; j < timeframeCount; j++) {\n        if (this.sessionTable[i][j] === sessionId) {\n          timeframeRange.push(j)\n        }\n      }\n      if (timeframeRange.length > 0) {\n        result.set(i, timeframeRange)\n      }\n    }\n    return result\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/types/EquivalentIndexFinder.js","import {\n  RESTORE_DEFAULT_TOOLS,\n  OPEN_TOOL,\n  CLOSE_TOOL,\n  OPEN_TEXT_TOOL,\n  CLOSE_TEXT_TOOL\n} from '../MutationTypes'\n\nconst state = {\n  isUsingOrderTool: false,\n  isUsingScaleTool: false,\n  isUsingBendTool: false,\n  isUsingCurveTool: false,\n  isUsingLinkTool: false,\n  isUsingUndoTool: false,\n  isUsingTextTool: false,\n  isUsingPenTool: false\n}\n\nconst getters = {\n  isUsingOrderTool: state => state.isUsingOrderTool,\n  isUsingBendTool: state => state.isUsingBendTool,\n  isUsingScaleTool: state => state.isUsingScaleTool,\n  isUsingCurveTool: state => state.isUsingCurveTool,\n  isUsingLinkTool: state => state.isUsingLinkTool,\n  isUsingUndoTool: state => state.isUsingUndoTool,\n  isUsingTextTool: state => state.isUsingTextTool,\n  isUsingPenTool: state => state.isUsingPenTool\n}\n\nconst mutations = {\n  [OPEN_TOOL] (state, toolName) {\n    switch (toolName) {\n      case 'OrderTool':\n        state.isUsingOrderTool = true\n        break\n      case 'BendTool':\n        state.isUsingBendTool = true\n        break\n      case 'ScaleTool':\n        state.isUsingScaleTool = true\n        break\n      case 'CurveTool':\n        state.isUsingCurveTool = true\n        break\n      case 'LinkTool':\n        state.isUsingLinkTool = true\n        break\n      case 'PenTool':\n        state.isUsingPenTool = true\n        break\n      case 'TextTool':\n        state.isUsingTextTool = true\n        break\n      default:\n        break\n    }\n  },\n\n  [CLOSE_TOOL] (state, toolName) {\n    switch (toolName) {\n      case 'OrderTool':\n        state.isUsingOrderTool = false\n        break\n      case 'BendTool':\n        state.isUsingBendTool = false\n        break\n      case 'ScaleTool':\n        state.isUsingScaleTool = false\n        break\n      case 'CurveTool':\n        state.isUsingCurveTool = false\n        break\n      case 'LinkTool':\n        state.isUsingLinkTool = false\n        break\n      case 'PenTool':\n        state.isUsingPenTool = false\n        break\n      case 'TextTool':\n        state.isUsingTextTool = false\n        break\n      default:\n        break\n    }\n  },\n\n  [RESTORE_DEFAULT_TOOLS] (state) {\n    state.isUsingOrderTool = false\n    state.isUsingBendTool = false\n    state.isUsingScaleTool = false\n    state.isUsingCurveTool = false\n    state.isUsingLinkTool = false\n    state.isUsingUndoTool = false\n    state.isUsingTextTool = false\n    state.isUsingPenTool = false\n  },\n\n  [OPEN_TEXT_TOOL] (state) {\n    state.isUsingTextTool = true\n  },\n\n  [CLOSE_TEXT_TOOL] (state) {\n    state.isUsingTextTool = false\n  }\n}\n\nexport default {\n  state,\n  getters,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/ToolStore.js","<template>\n  <g @mouseup=\"handleMouseup($event)\"\n    @mousedown=\"handleMousedown($event)\">\n    <styleframe :object=\"object\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :mousedownCount=\"mousedownCount\"\n      :mouseupCount=\"mouseupCount\">\n    </styleframe>\n    <rectframe v-if=\"isScaleShow\"\n      @updateX=\"scaleByX($event)\"\n      @updateY=\"scaleByY($event)\"\n      @updateW=\"scaleByW($event)\"\n      @updateH=\"scaleByH($event)\"\n      @updateFrame=\"updateFrame($event)\"\n      @rotate=\"rotate($event)\"\n      :mouseX=\"mouseX\"\n      :mouseY=\"mouseY\"\n      :frameX=\"frameX\"\n      :frameY=\"frameY\"\n      :frameW=\"frameW\"\n      :frameH=\"frameH\">\n    </rectframe>\n  </g>\n</template>\n\n<script>\nimport _ from 'lodash'\nimport { mapGetters } from 'vuex'\nimport RectFrame from './RectFrame'\nimport StyleFrame from './StyleFrame'\n\nexport default {\n  name: 'ScaleFrame',\n\n  props: ['mouseX', 'mouseY', 'mousedownCount', 'mouseupCount', 'object'],\n\n  data () {\n    return {\n      copyNodes: []\n    }\n  },\n\n  computed: {\n    nodes () {\n      return this.object.nodes\n    },\n\n    frameX () {\n      return this.object.frameX\n    },\n\n    frameY () {\n      return this.object.frameY\n    },\n\n    frameW () {\n      return this.object.frameW\n    },\n\n    frameH () {\n      return this.object.frameH\n    },\n\n    isScaleShow () {\n      if (this.object.type === 'storyline') {\n        return false\n      }\n      if (this.object.type === 'line') {\n        return false\n      }\n      if (this.nodes.length < 3) {\n        return false\n      }\n      return this.object.isScale\n    },\n\n    ...mapGetters([\n      'isUsingPenTool'\n    ])\n  },\n\n  methods: {\n    handleMousedown () {\n      if (event.button === 0) {\n        this.mousedownTime = Date.now()\n        this.copyNodes = _.cloneDeep(this.nodes)\n      }\n    },\n\n    handleMouseup () {\n      if (event.button === 0) {\n        let _mousedownTime = Date.now()\n        let clickTime = _mousedownTime - this.mousedownTime\n        if (clickTime < 200) {\n          if (!this.object.isReshape) {\n            if (this.object.isScale) {\n              this.object.closeScale()\n              if (this.object.type !== 'storyline') {\n                this.object.activateMove()\n              }\n            } else {\n              if (!this.isUsingPenTool) {\n                this.object.activateScale()\n              }\n              this.object.closeMove()\n            }\n          }\n        } else {\n          this.mousedownTime = _mousedownTime\n        }\n      }\n    },\n\n    scaleByX (val) {\n      let scaleRatio = val / this.frameW\n      let anchor = this.frameX + this.frameW\n      this.updateNodeX(scaleRatio, anchor)\n    },\n\n    scaleByY (val) {\n      let scaleRatio = val / this.frameH\n      let anchor = this.frameY + this.frameH\n      this.updateNodeY(scaleRatio, anchor)\n    },\n\n    scaleByW (val) {\n      let scaleRatio = val / this.frameW\n      let anchor = this.frameX\n      this.updateNodeX(scaleRatio, anchor)\n    },\n\n    scaleByH (val) {\n      let scaleRatio = val / this.frameH\n      let anchor = this.frameY\n      this.updateNodeY(scaleRatio, anchor)\n    },\n\n    updateNodeX (ratio, anchor) {\n      this.nodes.forEach((node, index) => {\n        let copyNode = this.copyNodes[index]\n        node._x = (copyNode._x - anchor) * ratio + anchor\n        node._x2 = (copyNode._x2 - anchor) * ratio + anchor\n        node._x3 = (copyNode._x3 - anchor) * ratio + anchor\n      })\n    },\n\n    updateNodeY (ratio, anchor) {\n      this.nodes.forEach((node, index) => {\n        let copyNode = this.copyNodes[index]\n        node._y = (copyNode._y - anchor) * ratio + anchor\n        node._y2 = (copyNode._y2 - anchor) * ratio + anchor\n        node._y3 = (copyNode._y3 - anchor) * ratio + anchor\n      })\n    },\n\n    updateFrame (val) {\n      this.object.frameX = val.x\n      this.object.frameY = val.y\n      this.object.frameW = val.w\n      this.object.frameH = val.h\n      // update position\n      this.object.updatePosition()\n    },\n\n    rotate ({sin, cos}) {\n      this.$emit('rotate', { sin, cos })\n    }\n  },\n\n  components: {\n    styleframe: StyleFrame,\n    rectframe: RectFrame\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/workspace/frames/ScaleFrame.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"storyline\",on:{\"mousedown\":_vm.handleMousedown,\"mouseup\":_vm.handleMouseup}},[_c('path',{attrs:{\"fill\":\"none\",\"d\":_vm.pathD,\"stroke\":\"white\",\"stroke-width\":\"10\",\"opacity\":\"1\"}}),_vm._v(\" \"),_c('path',{attrs:{\"fill\":\"none\",\"d\":_vm.pathD,\"stroke\":_vm.strokeColor,\"stroke-width\":_vm.strokeWidth,\"opacity\":_vm.opacity}}),_vm._v(\" \"),_c('text',{staticClass:\"label\",attrs:{\"text-anchor\":\"end\",\"font-size\":\"16\",\"x\":_vm.labelX,\"y\":_vm.labelY},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleSelecting($event)},\"mousedown\":function($event){$event.stopPropagation();return _vm.beginDragMoving($event)},\"mouseup\":_vm.endDragMoving}},[_vm._v(\"\\n    \"+_vm._s(_vm.character)+\"\\n  \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-25510291\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/shapes/Storyline.vue\n// module id = yq3R\n// module chunks = 1","export class BezierNode {\n  constructor(x, y, x2, y2) {\n    this._activate = false;\n    this._last = null;\n    // point\n    this._x = x;\n    this._y = y;\n    this._xBak = x;\n    this._yBak = y;\n    // control point\n    this._x2 = x2;\n    this._y2 = y2;\n    this._xBak2 = x2;\n    this._yBak2 = y2;\n    // reversed control point\n    this._x3 = 2 * x2 - x;\n    this._y3 = 2 * y2 - y;\n    this._xBak3 = this._x3;\n    this._yBak3 = this._y3;\n  }\n\n  get isActiveBezierTool() {\n    return this._activate;\n  }\n\n  set lastNode(node) {\n    this._last = node;\n  }\n\n  get lastNode() {\n    return this._last;\n  }\n\n  get x() {\n    return this._x;\n  }\n\n  set x(value) {\n    this._x = value\n  }\n\n  get y() {\n    return this._y;\n  }\n\n  set y(value) {\n    this._y = value;\n  }\n\n  get x2() {\n    return this._x2;\n  }\n\n  set x2(value) {\n    this._x2 = value;\n  }\n\n  get y2() {\n    return this._y2;\n  }\n\n  set y2(value) {\n    this._y2 = value;\n  }\n\n  set x3(value) {\n    this._x3 = value;\n  }\n\n  get x3 () {\n    return this._x3;\n  }\n\n  get y3 () {\n    return this._y3;\n  }\n\n  set y3(value) {\n    this._y3 = value;\n  }\n  // backup (x, y, x2, y2) before updating and rotating\n  backup() {\n    this._xBak = this._x;\n    this._yBak = this._y;\n    this._xBak2 = this._x2;\n    this._yBak2 = this._y2;\n    this._xBak3 = this._x3;\n    this._yBak3 = this._y3;\n  }\n\n  activateBezierTool() {\n    this._activate = true;\n  }\n\n  closeBezierTool() {\n    this._activate = false;\n  }\n\n  move(moveX, moveY) {\n    this._x += moveX;\n    this._y += moveY;\n    this._x2 += moveX;\n    this._y2 += moveY;\n    this._x3 += moveX;\n    this._y3 += moveY;\n  }\n\n  update(distX, distY) {\n    this._x = this._xBak + distX;\n    this._y = this._yBak + distY;\n    this._x2 = this._xBak2 + distX;\n    this._y2 = this._yBak2 + distY;\n    this._x3 = this._xBak3 + distX;\n    this._y3 = this._yBak3 + distY;\n  }\n\n  updateX (distX) {\n    this._x = this._xBak + distX;\n    this._x2 = this._xBak2 + distX;\n    this._x3 = this._xBak3 + distX;\n  }\n\n  updateY (distY) {\n    this._y = this._yBak + distY;\n    this._y2 = this._yBak2 + distY;\n    this._y3 = this._yBak3 + distY;\n  }\n\n  rotate(sin, cos, refX, refY) {\n    this._x = (this._xBak - refX) * cos - (this._yBak - refY) * sin + refX\n    this._y = (this._xBak - refX) * sin + (this._yBak - refY) * cos + refY\n    this._x2 = (this._xBak2 - refX) * cos - (this._yBak2 - refY) * sin + refX\n    this._y2 = (this._xBak2 - refX) * sin + (this._yBak2 - refY) * cos + refY\n    this._x3 = (this._xBak3 - refX) * cos - (this._yBak3 - refY) * sin + refX\n    this._y3 = (this._xBak3 - refX) * sin + (this._yBak3 - refY) * cos + refY\n  }\n}\n\nexport class Node {\n  constructor (x, y) {\n    this.x = x\n    this._xBak = x\n    this.y = y\n    this._yBak = y\n    this.isOptimized = false\n    this.isOptimizedTmp = false\n  }\n\n  backup () {\n    this._xBak = this.x\n    this._yBak = this.y\n  }\n\n  move (moveX, moveY) {\n    this.x += moveX\n    this.y += moveY\n  }\n\n  updateX (distX) {\n    this.x = this._xBak + distX\n  }\n\n  updateY (distY) {\n    this.y = this.y > -10000 ? this._yBak + distY : -10000\n  }\n\n  rotate(sin, cos, refX, refY) {\n    this.x = (this._xBak - refX) * cos - (this._yBak - refY) * sin + refX\n    this.y = (this._xBak - refX) * sin + (this._yBak - refY) * cos + refY\n  }\n}\n\nexport class StyleNode {\n  constructor (x, y) {\n    this.x = x\n    this.y = y\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/types/BezierNode.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUsingCurveTool),expression:\"isUsingCurveTool\"}],staticClass:\"path-select\"},[_c('path',{attrs:{\"d\":_vm.pathD,\"fill\":\"none\",\"stroke\":\"blue\",\"stroke-width\":\"5\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a45afae\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/workspace/utils/PathSelect.vue\n// module id = zr+e\n// module chunks = 1"],"sourceRoot":""}